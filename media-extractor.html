<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Prevent Flash of Incorrect Theme (FOIT) -->
    <script>
    (function(){var t=localStorage.getItem('android-media-framework-theme');if(t)document.documentElement.setAttribute('data-theme',t);else if(window.matchMedia&&window.matchMedia('(prefers-color-scheme:light)').matches)document.documentElement.setAttribute('data-theme','light');})();
    </script>
    <title>MediaExtractor Architecture</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@300;400;600;700;900&family=IBM+Plex+Mono:wght@400;500;600&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/design-system.css">

        <style>
        /* Page-specific styles loaded from design-system.css */
    </style>
</head>

<body>
    <nav class="nav">
        <a href="index.html" class="nav-button">
            â† AOSP Media Framework
        </a>
    </nav>

    <div class="container">
        <header>
            <h1 class="page-title">ğŸ“¦ MediaExtractor</h1>
            <p class="page-subtitle">ë¯¸ë””ì–´ ì»¨í…Œì´ë„ˆ íŒŒì‹± ë° ë””ë¨¹ì‹± ì•„í‚¤í…ì²˜</p>
        </header>

        <!-- Section 1: Overview -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">1</span>
                Overview: MediaExtractorì˜ ì—­í• 
            </h2>
            <p class="section-description">
                MediaExtractorëŠ” ë¯¸ë””ì–´ ì»¨í…Œì´ë„ˆ íŒŒì¼ì„ íŒŒì‹±í•˜ì—¬ ê°œë³„ íŠ¸ë™(ì˜¤ë””ì˜¤, ë¹„ë””ì˜¤, ìë§‰)ìœ¼ë¡œ ë¶„ë¦¬í•˜ëŠ” ë””ë¨¹ì„œì…ë‹ˆë‹¤.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ¯</span>
                        ì£¼ìš” ê¸°ëŠ¥
                    </h3>
                    <div class="card-description">
                        <p><strong>ì»¨í…Œì´ë„ˆ íŒŒì‹± ë° ë””ë¨¹ì‹±</strong></p>
                        <ul>
                            <li>ì»¨í…Œì´ë„ˆ í¬ë§· íŒŒì‹± (MP4, MKV, WebM ë“±)</li>
                            <li>íŠ¸ë™ ì •ë³´ ì¶”ì¶œ (ê°œìˆ˜, í¬ë§·, ë©”íƒ€ë°ì´í„°)</li>
                            <li>ì¸ì½”ë”©ëœ ìƒ˜í”Œ ë°ì´í„° ì¶”ì¶œ</li>
                            <li>íƒ€ì„ìŠ¤íƒ¬í”„ ë° í”Œë˜ê·¸ ì œê³µ</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”„</span>
                        MediaCodecê³¼ì˜ í˜‘ì—…
                    </h3>
                    <div class="card-description">
                        <p><strong>ë””ë¨¹ì‹± + ë””ì½”ë”© íŒŒì´í”„ë¼ì¸</strong></p>
                        <ul>
                            <li>MediaExtractor: ì»¨í…Œì´ë„ˆ íŒŒì‹± ë° ìƒ˜í”Œ ì¶”ì¶œ</li>
                            <li>MediaCodec: ì¸ì½”ë”©ëœ ìƒ˜í”Œ ë””ì½”ë”©</li>
                            <li>ë¶„ë¦¬ëœ ê´€ì‹¬ì‚¬ë¡œ ìœ ì—°í•œ ì²˜ë¦¬</li>
                            <li>ì»¤ìŠ¤í…€ ë¯¸ë””ì–´ ì²˜ë¦¬ ê°€ëŠ¥</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“</span>
                        ì§€ì› ì»¨í…Œì´ë„ˆ
                    </h3>
                    <div class="card-description">
                        <p><strong>ë‹¤ì–‘í•œ í¬ë§· ì§€ì›</strong></p>
                        <ul>
                            <li>MP4 (MPEG-4 Part 14)</li>
                            <li>MKV (Matroska)</li>
                            <li>WebM</li>
                            <li>3GP, TS, FLV ë“±</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”Œ</span>
                        í™•ì¥ì„±
                    </h3>
                    <div class="card-description">
                        <p><strong>ì»¤ìŠ¤í…€ Extractor</strong></p>
                        <ul>
                            <li>Android 10+: ê°œë³„ .so íŒŒì¼</li>
                            <li>ì»¤ìŠ¤í…€ í¬ë§· ì§€ì› ê°€ëŠ¥</li>
                            <li>í”ŒëŸ¬ê·¸ì¸ ì•„í‚¤í…ì²˜</li>
                            <li>ExoPlayer í†µí•©</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 2: Architecture -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">2</span>
                ì „ì²´ ì•„í‚¤í…ì²˜
            </h2>
            <p class="section-description">
                MediaExtractorì˜ ë‚´ë¶€ êµ¬ì¡°ì™€ Parser ê³„ì¸µì„ ì‹œê°í™”í•©ë‹ˆë‹¤.
            </p>

            <div class="mermaid-container">
                <div class="mermaid">
                    graph TB
                    subgraph APP ["Application Layer"]
                    MEDIA_APP[Media App]
                    end

                    subgraph FRAMEWORK ["MediaExtractor API"]
                    ME_API[MediaExtractor<br />Public API]
                    ME_IMPL[MediaExtractor<br />Implementation]
                    end

                    subgraph NATIVE ["Native Layer - libstagefright"]
                    DATA_SRC[DataSource<br />File/URI/FD]
                    EXTRACTOR_FACTORY[MediaExtractorFactory<br />Extractor ì„ íƒ]

                    subgraph PARSERS ["Container Parsers"]
                    MP4_PARSER[MPEG4Extractor<br />MP4 Parser]
                    MKV_PARSER[MatroskaExtractor<br />MKV Parser]
                    WEBM_PARSER[WebM Parser]
                    OTHER_PARSER[Other Parsers<br />3GP, TS, FLV...]
                    end

                    SAMPLE_READER[Sample Reader<br />Track Data]
                    META_DATA[MetaData<br />Track Info]
                    end

                    subgraph STORAGE ["Data Source"]
                    FILE[Local File]
                    URI[Content URI]
                    FD[File Descriptor]
                    STREAM[Network Stream]
                    end

                    MEDIA_APP --> ME_API
                    ME_API --> ME_IMPL
                    ME_IMPL --> DATA_SRC
                    ME_IMPL --> EXTRACTOR_FACTORY

                    DATA_SRC --> FILE
                    DATA_SRC --> URI
                    DATA_SRC --> FD
                    DATA_SRC --> STREAM

                    EXTRACTOR_FACTORY --> MP4_PARSER
                    EXTRACTOR_FACTORY --> MKV_PARSER
                    EXTRACTOR_FACTORY --> WEBM_PARSER
                    EXTRACTOR_FACTORY --> OTHER_PARSER

                    MP4_PARSER --> SAMPLE_READER
                    MKV_PARSER --> SAMPLE_READER
                    WEBM_PARSER --> SAMPLE_READER
                    OTHER_PARSER --> SAMPLE_READER

                    MP4_PARSER --> META_DATA
                    MKV_PARSER --> META_DATA
                    WEBM_PARSER --> META_DATA
                    OTHER_PARSER --> META_DATA

                </div>
            </div>

            <div class="highlight-box">
                <strong>í•µì‹¬ ì»´í¬ë„ŒíŠ¸:</strong>
                <ul>
                    <li><strong>MediaExtractor API</strong>: ì•±ì´ ì‚¬ìš©í•˜ëŠ” ê³µê°œ API</li>
                    <li><strong>DataSource</strong>: íŒŒì¼, URI, FD, ìŠ¤íŠ¸ë¦¼ ë“± ë‹¤ì–‘í•œ ì†ŒìŠ¤ ì§€ì›</li>
                    <li><strong>MediaExtractorFactory</strong>: ì»¨í…Œì´ë„ˆ í¬ë§·ì— ë§ëŠ” Parser ì„ íƒ</li>
                    <li><strong>Container Parsers</strong>: MP4, MKV, WebM ë“± í¬ë§·ë³„ íŒŒì„œ</li>
                    <li><strong>Sample Reader</strong>: íŠ¸ë™ë³„ ìƒ˜í”Œ ë°ì´í„° ì½ê¸°</li>
                    <li><strong>MetaData</strong>: íŠ¸ë™ ì •ë³´ ë° ë©”íƒ€ë°ì´í„°</li>
                </ul>
            </div>
        </section>

        <!-- Section 3: Workflow -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">3</span>
                MediaExtractor ì‚¬ìš© íë¦„
            </h2>
            <p class="section-description">
                MediaExtractorë¥¼ ì‚¬ìš©í•˜ì—¬ ë¯¸ë””ì–´ íŒŒì¼ì—ì„œ ìƒ˜í”Œ ë°ì´í„°ë¥¼ ì¶”ì¶œí•˜ëŠ” ì „ì²´ ê³¼ì •ì…ë‹ˆë‹¤.
            </p>

            <div class="mermaid-container">
                <div class="mermaid">
                    sequenceDiagram
                    participant App
                    participant ME as MediaExtractor
                    participant DS as DataSource
                    participant Parser as Container Parser
                    participant Track as Track Reader

                    App->>ME: new MediaExtractor()
                    App->>ME: setDataSource(path/uri/fd)
                    ME->>DS: DataSource ìƒì„±
                    DS->>DS: íŒŒì¼/ìŠ¤íŠ¸ë¦¼ ì—´ê¸°
                    DS-->>ME: DataSource ë°˜í™˜

                    ME->>Parser: MediaExtractorFactoryë¡œ<br />ì ì ˆí•œ Parser ì„ íƒ
                    Parser->>DS: ì»¨í…Œì´ë„ˆ í—¤ë” ì½ê¸°
                    DS-->>Parser: í—¤ë” ë°ì´í„°
                    Parser->>Parser: í¬ë§· íŒŒì‹±<br />(MP4/MKV/WebM ë“±)
                    Parser->>Parser: íŠ¸ë™ ì •ë³´ ì¶”ì¶œ
                    Parser-->>ME: íŠ¸ë™ ê°œìˆ˜ ë° ë©”íƒ€ë°ì´í„°

                    App->>ME: getTrackCount()
                    ME-->>App: íŠ¸ë™ ê°œìˆ˜ ë°˜í™˜

                    loop ê° íŠ¸ë™ ìˆœíšŒ
                    App->>ME: getTrackFormat(i)
                    ME->>Parser: íŠ¸ë™ i ë©”íƒ€ë°ì´í„° ìš”ì²­
                    Parser-->>ME: MediaFormat ë°˜í™˜
                    ME-->>App: MediaFormat (MIME, í•´ìƒë„ ë“±)
                    end

                    App->>ME: selectTrack(i)
                    ME->>Track: íŠ¸ë™ i í™œì„±í™”

                    loop ìƒ˜í”Œ ì½ê¸°
                    App->>ME: readSampleData(buffer)
                    ME->>Track: í˜„ì¬ ìƒ˜í”Œ ì½ê¸°
                    Track->>DS: ìƒ˜í”Œ ë°ì´í„° ìœ„ì¹˜ë¡œ seek
                    DS-->>Track: ì¸ì½”ë”©ëœ ìƒ˜í”Œ ë°ì´í„°
                    Track-->>ME: ìƒ˜í”Œ ë°ì´í„°
                    ME-->>App: ìƒ˜í”Œ í¬ê¸° ë°˜í™˜

                    App->>ME: getSampleTime()
                    ME->>Track: íƒ€ì„ìŠ¤íƒ¬í”„ ì¡°íšŒ
                    Track-->>ME: PTS (Âµs)
                    ME-->>App: íƒ€ì„ìŠ¤íƒ¬í”„

                    App->>ME: getSampleFlags()
                    ME->>Track: í”Œë˜ê·¸ ì¡°íšŒ
                    Track-->>ME: SYNC/ENCRYPTED ë“±
                    ME-->>App: í”Œë˜ê·¸

                    App->>ME: advance()
                    ME->>Track: ë‹¤ìŒ ìƒ˜í”Œë¡œ ì´ë™
                    end

                    App->>ME: release()
                    ME->>DS: ë¦¬ì†ŒìŠ¤ í•´ì œ
                    ME->>Parser: ë¦¬ì†ŒìŠ¤ í•´ì œ
                </div>
            </div>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ“ ì£¼ìš” API ë©”ì„œë“œ
            </h3>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”§</span>
                        ì´ˆê¸°í™”
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><code>new MediaExtractor()</code>: ì¸ìŠ¤í„´ìŠ¤ ìƒì„±</li>
                            <li><code>setDataSource(path)</code>: íŒŒì¼ ê²½ë¡œ</li>
                            <li><code>setDataSource(context, uri)</code>: Content URI</li>
                            <li><code>setDataSource(fd)</code>: File Descriptor</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“Š</span>
                        íŠ¸ë™ ì •ë³´
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><code>getTrackCount()</code>: íŠ¸ë™ ê°œìˆ˜</li>
                            <li><code>getTrackFormat(i)</code>: íŠ¸ë™ í¬ë§·</li>
                            <li><code>selectTrack(i)</code>: íŠ¸ë™ ì„ íƒ</li>
                            <li><code>unselectTrack(i)</code>: íŠ¸ë™ ì„ íƒ í•´ì œ</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“¦</span>
                        ìƒ˜í”Œ ì½ê¸°
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><code>readSampleData(buffer, offset)</code>: ìƒ˜í”Œ ë°ì´í„°</li>
                            <li><code>getSampleTime()</code>: PTS (Âµs)</li>
                            <li><code>getSampleFlags()</code>: í”Œë˜ê·¸</li>
                            <li><code>getSampleTrackIndex()</code>: íŠ¸ë™ ì¸ë±ìŠ¤</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">â©</span>
                        íƒìƒ‰ ë° ì œì–´
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><code>advance()</code>: ë‹¤ìŒ ìƒ˜í”Œ</li>
                            <li><code>seekTo(timeUs, mode)</code>: ì‹œê°„ íƒìƒ‰</li>
                            <li><code>getCachedDuration()</code>: ìºì‹œ ìƒíƒœ</li>
                            <li><code>release()</code>: ë¦¬ì†ŒìŠ¤ í•´ì œ</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: Container Parsers -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">4</span>
                ì»¨í…Œì´ë„ˆ Parser ìƒì„¸
            </h2>
            <p class="section-description">
                ì£¼ìš” ì»¨í…Œì´ë„ˆ í¬ë§·ë³„ Parserì˜ êµ¬ì¡°ì™€ ë™ì‘ ë°©ì‹ì„ ì„¤ëª…í•©ë‹ˆë‹¤.
            </p>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-bottom: 20px;">
                ğŸ“¦ MP4 (MPEG4Extractor)
            </h3>

            <div class="mermaid-container">
                <div class="mermaid">
                    flowchart TB
                    START[MP4 íŒŒì¼] --> FTYP[ftyp Box<br />íŒŒì¼ íƒ€ì… ì‹ë³„]
                    FTYP --> MOOV[moov Box<br />ë©”íƒ€ë°ì´í„° ì»¨í…Œì´ë„ˆ]

                    MOOV --> MVHD[mvhd Box<br />Movie Header<br />ì¬ìƒ ì‹œê°„, íƒ€ì„ìŠ¤ì¼€ì¼]
                    MOOV --> TRAK[trak Box<br />íŠ¸ë™ ì •ë³´]

                    TRAK --> TKHD[tkhd Box<br />Track Header<br />íŠ¸ë™ ID, í•´ìƒë„]
                    TRAK --> MDIA[mdia Box<br />Media ì •ë³´]

                    MDIA --> MDHD[mdhd Box<br />Media Header<br />íƒ€ì„ìŠ¤ì¼€ì¼, ì¬ìƒì‹œê°„]
                    MDIA --> HDLR[hdlr Box<br />Handler<br />vide/soun/subt]
                    MDIA --> MINF[minf Box<br />Media Info]

                    MINF --> STBL[stbl Box<br />Sample Table]

                    STBL --> STSD[stsd Box<br />Sample Description<br />ì½”ë± ì •ë³´]
                    STBL --> STTS[stts Box<br />Time-to-Sample<br />ìƒ˜í”Œ ì¬ìƒ ì‹œê°„]
                    STBL --> STSC[stsc Box<br />Sample-to-Chunk<br />ì²­í¬ ë§¤í•‘]
                    STBL --> STSZ[stsz Box<br />Sample Size<br />ìƒ˜í”Œ í¬ê¸°]
                    STBL --> STCO[stco Box<br />Chunk Offset<br />ë°ì´í„° ìœ„ì¹˜]

                    START --> MDAT[mdat Box<br />ì‹¤ì œ ë¯¸ë””ì–´ ë°ì´í„°]

                </div>
            </div>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ“¦ MKV (MatroskaExtractor)
            </h3>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ—ï¸</span>
                        EBML êµ¬ì¡°
                    </h3>
                    <div class="card-description">
                        <p><strong>Extensible Binary Meta Language</strong></p>
                        <ul>
                            <li>EBML Header: ë¬¸ì„œ íƒ€ì… (Matroska)</li>
                            <li>Segment: ìµœìƒìœ„ ì»¨í…Œì´ë„ˆ</li>
                            <li>Element ID + Size + Data êµ¬ì¡°</li>
                            <li>ê°€ë³€ ê¸¸ì´ ì¸ì½”ë”©</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“‹</span>
                        ì£¼ìš” Element
                    </h3>
                    <div class="card-description">
                        <p><strong>Segment ë‚´ë¶€ êµ¬ì¡°</strong></p>
                        <ul>
                            <li><strong>SeekHead</strong>: ë‹¤ë¥¸ Element ìœ„ì¹˜ ì¸ë±ìŠ¤</li>
                            <li><strong>Info</strong>: Segment ì •ë³´ (ì¬ìƒì‹œê°„, íƒ€ì„ì½”ë“œ ìŠ¤ì¼€ì¼)</li>
                            <li><strong>Tracks</strong>: íŠ¸ë™ ì •ë³´ (ì½”ë±, í•´ìƒë„)</li>
                            <li><strong>Cluster</strong>: ì‹¤ì œ ë¯¸ë””ì–´ ë°ì´í„° ë¸”ë¡</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸï¸</span>
                        Cluster êµ¬ì¡°
                    </h3>
                    <div class="card-description">
                        <p><strong>ë¯¸ë””ì–´ ë°ì´í„° ì¡°ì§</strong></p>
                        <ul>
                            <li>Timecode: Cluster ì‹œì‘ íƒ€ì„ìŠ¤íƒ¬í”„</li>
                            <li>SimpleBlock: ë‹¨ì¼ í”„ë ˆì„ ë°ì´í„°</li>
                            <li>BlockGroup: ë³µì¡í•œ í”„ë ˆì„ (B-frame ë“±)</li>
                            <li>Keyframe í”Œë˜ê·¸ í¬í•¨</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âš¡</span>
                        MKV ì¥ì 
                    </h3>
                    <div class="card-description">
                        <p><strong>ìœ ì—°ì„± ë° í™•ì¥ì„±</strong></p>
                        <ul>
                            <li>ë‹¤ì–‘í•œ ì½”ë± ì§€ì›</li>
                            <li>ë‹¤ì¤‘ ì˜¤ë””ì˜¤/ìë§‰ íŠ¸ë™</li>
                            <li>ì±•í„° ë° ë©”ë‰´ ì§€ì›</li>
                            <li>ë©”íƒ€ë°ì´í„° í’ë¶€</li>
                        </ul>
                    </div>
                </div>
            </div>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ“¦ WebM (WebM Parser)
            </h3>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸŒ</span>
                        WebM ê°œìš”
                    </h3>
                    <div class="card-description">
                        <p><strong>ì›¹ ìµœì í™” í¬ë§·</strong></p>
                        <ul>
                            <li>Matroska ê¸°ë°˜ (EBML êµ¬ì¡° ë™ì¼)</li>
                            <li>HTML5 &lt;video&gt; í‘œì¤€ í¬ë§·</li>
                            <li>ë¡œì—´í‹° í”„ë¦¬ ì˜¤í”ˆ í¬ë§·</li>
                            <li>Google ì£¼ë„ ê°œë°œ</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ¬</span>
                        ì§€ì› ì½”ë±
                    </h3>
                    <div class="card-description">
                        <p><strong>ë¹„ë””ì˜¤ & ì˜¤ë””ì˜¤</strong></p>
                        <ul>
                            <li><strong>ë¹„ë””ì˜¤</strong>: VP8, VP9, AV1</li>
                            <li><strong>ì˜¤ë””ì˜¤</strong>: Vorbis, Opus</li>
                            <li>ëª¨ë‘ ë¡œì—´í‹° í”„ë¦¬ ì½”ë±</li>
                            <li>4K/8K UHD ì§€ì› (VP9/AV1)</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âš¡</span>
                        WebM ì¥ì 
                    </h3>
                    <div class="card-description">
                        <p><strong>ì›¹ ìŠ¤íŠ¸ë¦¬ë°ì— ìµœì í™”</strong></p>
                        <ul>
                            <li>ì‘ì€ íŒŒì¼ í¬ê¸°</li>
                            <li>ë¹ ë¥¸ ì‹œì‘ ì‹œê°„</li>
                            <li>ì ì‘í˜• ìŠ¤íŠ¸ë¦¬ë° ì§€ì›</li>
                            <li>ë¸Œë¼ìš°ì € ë„¤ì´í‹°ë¸Œ ì§€ì›</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”„</span>
                        MKV vs WebM
                    </h3>
                    <div class="card-description">
                        <p><strong>ì£¼ìš” ì°¨ì´ì </strong></p>
                        <ul>
                            <li><strong>MKV</strong>: ëª¨ë“  ì½”ë± ì§€ì›, ë¡œì»¬ ì €ì¥</li>
                            <li><strong>WebM</strong>: VP8/VP9/AV1ë§Œ, ì›¹ ìŠ¤íŠ¸ë¦¬ë°</li>
                            <li>WebMì€ MKV ë¶€ë¶„ì§‘í•©</li>
                            <li>ë™ì¼í•œ Parser (MatroskaExtractor)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="highlight-box" style="margin-top: 30px;">
                <strong>ğŸ“Š MKV vs WebM ë¹„êµ:</strong>
                <table style="width: 100%; margin-top: 15px; border-collapse: collapse;">
                    <thead>
                        <tr style="background: var(--bg-secondary); border-bottom: 2px solid var(--accent-primary);">
                            <th style="padding: 12px; text-align: left; color: var(--accent-primary);">í•­ëª©</th>
                            <th style="padding: 12px; text-align: left; color: var(--accent-primary);">MKV (Matroska)</th>
                            <th style="padding: 12px; text-align: left; color: var(--accent-primary);">WebM</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="border-bottom: 1px solid var(--border-color);">
                            <td style="padding: 10px;"><strong>ì»¨í…Œì´ë„ˆ êµ¬ì¡°</strong></td>
                            <td style="padding: 10px;">EBML (Extensible Binary Meta Language)</td>
                            <td style="padding: 10px;">EBML (ë™ì¼)</td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border-color);">
                            <td style="padding: 10px;"><strong>ë¹„ë””ì˜¤ ì½”ë±</strong></td>
                            <td style="padding: 10px;">H.264, H.265, VP8, VP9, AV1 ë“± ëª¨ë“  ì½”ë±</td>
                            <td style="padding: 10px;">VP8, VP9, AV1ë§Œ</td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border-color);">
                            <td style="padding: 10px;"><strong>ì˜¤ë””ì˜¤ ì½”ë±</strong></td>
                            <td style="padding: 10px;">AAC, MP3, Vorbis, Opus, Dolby ë“±</td>
                            <td style="padding: 10px;">Vorbis, Opusë§Œ</td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border-color);">
                            <td style="padding: 10px;"><strong>íŒŒì¼ í™•ì¥ì</strong></td>
                            <td style="padding: 10px;">.mkv, .mka, .mks</td>
                            <td style="padding: 10px;">.webm</td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border-color);">
                            <td style="padding: 10px;"><strong>ë¼ì´ì„ ìŠ¤</strong></td>
                            <td style="padding: 10px;">ì˜¤í”ˆ ìŠ¤í™ (ì½”ë±ë³„ ë¼ì´ì„ ìŠ¤ ë³„ë„)</td>
                            <td style="padding: 10px;">ì™„ì „ ë¡œì—´í‹° í”„ë¦¬</td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border-color);">
                            <td style="padding: 10px;"><strong>ì£¼ìš” ìš©ë„</strong></td>
                            <td style="padding: 10px;">ë¡œì»¬ ë¯¸ë””ì–´ ì €ì¥, ê³ í’ˆì§ˆ ì•„ì¹´ì´ë¸Œ</td>
                            <td style="padding: 10px;">ì›¹ ìŠ¤íŠ¸ë¦¬ë°, HTML5 ë¹„ë””ì˜¤</td>
                        </tr>
                        <tr>
                            <td style="padding: 10px;"><strong>ë¸Œë¼ìš°ì € ì§€ì›</strong></td>
                            <td style="padding: 10px;">í”ŒëŸ¬ê·¸ì¸ í•„ìš”</td>
                            <td style="padding: 10px;">Chrome, Firefox, Edge ë„¤ì´í‹°ë¸Œ</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Section 5: Sample Extraction -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">5</span>
                ìƒ˜í”Œ ì¶”ì¶œ ë©”ì»¤ë‹ˆì¦˜
            </h2>
            <p class="section-description">
                Parserê°€ ì»¨í…Œì´ë„ˆì—ì„œ ì‹¤ì œ ìƒ˜í”Œ ë°ì´í„°ë¥¼ ì¶”ì¶œí•˜ëŠ” ê³¼ì •ì„ ìƒì„¸íˆ ì„¤ëª…í•©ë‹ˆë‹¤.
            </p>

            <div class="mermaid-container">
                <div class="mermaid">
                    flowchart TB
                    START[readSampleData í˜¸ì¶œ] --> TRACK_CHECK{ì„ íƒëœ íŠ¸ë™<br />ì¡´ì¬?}

                    TRACK_CHECK -->|No| ERROR[ì—ëŸ¬ ë°˜í™˜]
                    TRACK_CHECK -->|Yes| GET_SAMPLE[í˜„ì¬ ìƒ˜í”Œ ì •ë³´ ì¡°íšŒ]

                    GET_SAMPLE --> SAMPLE_TABLE[Sample Table ì°¸ì¡°<br />MP4: stbl<br />MKV: Cluster]

                    SAMPLE_TABLE --> CALC_OFFSET[ìƒ˜í”Œ ì˜¤í”„ì…‹ ê³„ì‚°]
                    CALC_OFFSET --> CALC_SIZE[ìƒ˜í”Œ í¬ê¸° ê³„ì‚°]

                    CALC_SIZE --> SEEK[DataSource seek<br />ì˜¤í”„ì…‹ ìœ„ì¹˜ë¡œ ì´ë™]
                    SEEK --> READ[ìƒ˜í”Œ ë°ì´í„° ì½ê¸°]

                    READ --> BUFFER[ByteBufferì— ë³µì‚¬]
                    BUFFER --> METADATA[ë©”íƒ€ë°ì´í„° ì„¤ì •]

                    METADATA --> PTS[Presentation Timestamp<br />ê³„ì‚° ë° ì €ì¥]
                    METADATA --> FLAGS[í”Œë˜ê·¸ ì„¤ì •<br />SYNC/ENCRYPTED]

                    PTS --> RETURN[ìƒ˜í”Œ í¬ê¸° ë°˜í™˜]
                    FLAGS --> RETURN

                    RETURN --> ADVANCE{advance í˜¸ì¶œ?}
                    ADVANCE -->|Yes| NEXT[ë‹¤ìŒ ìƒ˜í”Œë¡œ í¬ì¸í„° ì´ë™]
                    ADVANCE -->|No| WAIT[ëŒ€ê¸°]

                    NEXT --> END[ì™„ë£Œ]
                    WAIT --> END

                </div>
            </div>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ” ìƒ˜í”Œ ë©”íƒ€ë°ì´í„°
            </h3>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">â±ï¸</span>
                        Timestamp
                    </h3>
                    <div class="card-description">
                        <p><strong>Presentation Time Stamp (PTS)</strong></p>
                        <ul>
                            <li>ë§ˆì´í¬ë¡œì´ˆ(Âµs) ë‹¨ìœ„</li>
                            <li>ìƒ˜í”Œ í‘œì‹œ ì‹œê°„</li>
                            <li>ë™ê¸°í™”ì— í•„ìˆ˜</li>
                            <li><code>getSampleTime()</code>ë¡œ ì¡°íšŒ</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸš©</span>
                        Sample Flags
                    </h3>
                    <div class="card-description">
                        <p><strong>ìƒ˜í”Œ ì†ì„± í”Œë˜ê·¸</strong></p>
                        <ul>
                            <li><code>SAMPLE_FLAG_SYNC</code>: í‚¤í”„ë ˆì„ (I-frame)</li>
                            <li><code>SAMPLE_FLAG_ENCRYPTED</code>: ì•”í˜¸í™”ëœ ìƒ˜í”Œ</li>
                            <li><code>SAMPLE_FLAG_PARTIAL_FRAME</code>: ë¶€ë¶„ í”„ë ˆì„</li>
                            <li><code>getSampleFlags()</code>ë¡œ ì¡°íšŒ</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“</span>
                        Sample Size
                    </h3>
                    <div class="card-description">
                        <p><strong>ìƒ˜í”Œ ë°ì´í„° í¬ê¸°</strong></p>
                        <ul>
                            <li>ë°”ì´íŠ¸ ë‹¨ìœ„ í¬ê¸°</li>
                            <li>ë²„í¼ í• ë‹¹ì— ì‚¬ìš©</li>
                            <li><code>readSampleData()</code> ë°˜í™˜ê°’</li>
                            <li>-1: ë” ì´ìƒ ìƒ˜í”Œ ì—†ìŒ</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ¯</span>
                        Track Index
                    </h3>
                    <div class="card-description">
                        <p><strong>ìƒ˜í”Œ ì†Œì† íŠ¸ë™</strong></p>
                        <ul>
                            <li>ë‹¤ì¤‘ íŠ¸ë™ ì„ íƒ ì‹œ ìœ ìš©</li>
                            <li>íŠ¸ë™ë³„ ì²˜ë¦¬ ë¶„ê¸°</li>
                            <li><code>getSampleTrackIndex()</code>ë¡œ ì¡°íšŒ</li>
                            <li>0ë¶€í„° ì‹œì‘í•˜ëŠ” ì¸ë±ìŠ¤</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 6: Seeking -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">6</span>
                Seeking ë©”ì»¤ë‹ˆì¦˜
            </h2>
            <p class="section-description">
                MediaExtractorì˜ ì‹œê°„ ê¸°ë°˜ íƒìƒ‰ ê¸°ëŠ¥ê³¼ ë‹¤ì–‘í•œ Seek ëª¨ë“œë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.
            </p>

            <div class="mermaid-container">
                <div class="mermaid">
                    sequenceDiagram
                    participant App
                    participant ME as MediaExtractor
                    participant Parser
                    participant Index as Sample Index

                    App->>ME: seekTo(timeUs, mode)
                    ME->>Parser: seek ìš”ì²­

                    alt SEEK_TO_PREVIOUS_SYNC
                    Parser->>Index: timeUs ì´ì „ í‚¤í”„ë ˆì„ ê²€ìƒ‰
                    Index-->>Parser: ì´ì „ Sync ìƒ˜í”Œ ìœ„ì¹˜
                    else SEEK_TO_NEXT_SYNC
                    Parser->>Index: timeUs ì´í›„ í‚¤í”„ë ˆì„ ê²€ìƒ‰
                    Index-->>Parser: ë‹¤ìŒ Sync ìƒ˜í”Œ ìœ„ì¹˜
                    else SEEK_TO_CLOSEST_SYNC
                    Parser->>Index: timeUsì— ê°€ì¥ ê°€ê¹Œìš´ í‚¤í”„ë ˆì„
                    Index-->>Parser: ê°€ì¥ ê°€ê¹Œìš´ Sync ìƒ˜í”Œ
                    end

                    Parser->>Parser: ìƒ˜í”Œ í¬ì¸í„° ì´ë™
                    Parser-->>ME: Seek ì™„ë£Œ
                    ME-->>App: ì„±ê³µ ë°˜í™˜

                    App->>ME: getSampleTime()
                    ME-->>App: ì‹¤ì œ Seekëœ ì‹œê°„
                </div>
            </div>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ¯ Seek ëª¨ë“œ
            </h3>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">â®ï¸</span>
                        PREVIOUS_SYNC
                    </h3>
                    <div class="card-description">
                        <p><strong>ì´ì „ í‚¤í”„ë ˆì„ìœ¼ë¡œ ì´ë™</strong></p>
                        <ul>
                            <li>ì§€ì • ì‹œê°„ ì´ì „ì˜ ê°€ì¥ ê°€ê¹Œìš´ í‚¤í”„ë ˆì„</li>
                            <li>ì •í™•í•œ ë””ì½”ë”© ë³´ì¥</li>
                            <li>ì—­ë°©í–¥ ì¬ìƒì— ìœ ìš©</li>
                            <li>ì•½ê°„ ì´ë¥¸ ì‹œê°„ìœ¼ë¡œ ì´ë™</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">â­ï¸</span>
                        NEXT_SYNC
                    </h3>
                    <div class="card-description">
                        <p><strong>ë‹¤ìŒ í‚¤í”„ë ˆì„ìœ¼ë¡œ ì´ë™</strong></p>
                        <ul>
                            <li>ì§€ì • ì‹œê°„ ì´í›„ì˜ ê°€ì¥ ê°€ê¹Œìš´ í‚¤í”„ë ˆì„</li>
                            <li>ë¹ ë¥¸ íƒìƒ‰ ê°€ëŠ¥</li>
                            <li>ì •ë°©í–¥ ìŠ¤í‚µì— ìœ ìš©</li>
                            <li>ì•½ê°„ ëŠ¦ì€ ì‹œê°„ìœ¼ë¡œ ì´ë™</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ¯</span>
                        CLOSEST_SYNC
                    </h3>
                    <div class="card-description">
                        <p><strong>ê°€ì¥ ê°€ê¹Œìš´ í‚¤í”„ë ˆì„</strong></p>
                        <ul>
                            <li>ì§€ì • ì‹œê°„ì— ê°€ì¥ ê°€ê¹Œìš´ í‚¤í”„ë ˆì„</li>
                            <li>ì •í™•ë„ì™€ ì„±ëŠ¥ì˜ ê· í˜•</li>
                            <li>ì¼ë°˜ì ì¸ Seekì— ê¶Œì¥</li>
                            <li>ì‚¬ìš©ì ê²½í—˜ ìµœì í™”</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âš ï¸</span>
                        ì£¼ì˜ì‚¬í•­
                    </h3>
                    <div class="card-description">
                        <p><strong>Seek ì‹œ ê³ ë ¤ì‚¬í•­</strong></p>
                        <ul>
                            <li>í‚¤í”„ë ˆì„ë§Œ Seek ê°€ëŠ¥ (I-frame)</li>
                            <li>B/P-frameì€ ë””ì½”ë”© ì˜ì¡´ì„± ìˆìŒ</li>
                            <li>ì •í™•í•œ ì‹œê°„ ë³´ì¥ ì•ˆ ë¨</li>
                            <li><code>getSampleTime()</code>ìœ¼ë¡œ ì‹¤ì œ ìœ„ì¹˜ í™•ì¸</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 7: Code Examples -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">7</span>
                ì‹¤ì œ ì½”ë“œ ì˜ˆì‹œ
            </h2>
            <p class="section-description">
                MediaExtractorë¥¼ ì‚¬ìš©í•œ ì‹¤ì œ ì½”ë“œ ì˜ˆì‹œë¥¼ í†µí•´ API ì‚¬ìš©ë²•ì„ ìµí™ë‹ˆë‹¤.
            </p>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-bottom: 20px;">
                ğŸ“ ê¸°ë³¸ ì‚¬ìš© ì˜ˆì‹œ
            </h3>

            <pre style="background: var(--bg-secondary); padding: 20px; border-radius: 8px; overflow-x: auto; border-left: 4px solid var(--accent-primary);"><code style="color: var(--text-primary); font-family: 'JetBrains Mono', monospace; font-size: 0.9rem;">// 1. File Pathë¡œ MediaExtractor ì´ˆê¸°í™”
val extractor = MediaExtractor()
extractor.setDataSource("/storage/emulated/0/Movies/video.mp4")

// 2. URIë¡œ ì´ˆê¸°í™” (Content Provider)
val uri = Uri.parse("content://media/external/video/media/123")
extractor.setDataSource(context, uri, null)

// 3. FileDescriptorë¡œ ì´ˆê¸°í™”
val fd = assets.openFd("sample.mp4")
extractor.setDataSource(fd.fileDescriptor, fd.startOffset, fd.length)
fd.close()

// 4. íŠ¸ë™ ì •ë³´ ì¡°íšŒ
val trackCount = extractor.trackCount
for (i in 0 until trackCount) {
    val format = extractor.getTrackFormat(i)
    val mime = format.getString(MediaFormat.KEY_MIME)
    Log.d("Extractor", "Track $i: $mime")

    if (mime?.startsWith("video/") == true) {
        val width = format.getInteger(MediaFormat.KEY_WIDTH)
        val height = format.getInteger(MediaFormat.KEY_HEIGHT)
        Log.d("Extractor", "Resolution: ${width}x${height}")
    }
}

// 5. ë¦¬ì†ŒìŠ¤ í•´ì œ
extractor.release()</code></pre>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ¬ MediaExtractor + MediaCodec íŒŒì´í”„ë¼ì¸
            </h3>

            <pre style="background: var(--bg-secondary); padding: 20px; border-radius: 8px; overflow-x: auto; border-left: 4px solid var(--accent-primary);"><code style="color: var(--text-primary); font-family: 'JetBrains Mono', monospace; font-size: 0.9rem;">// ë¹„ë””ì˜¤ íŠ¸ë™ ì¶”ì¶œ ë° ë””ì½”ë”©
val extractor = MediaExtractor()
extractor.setDataSource(videoPath)

// ë¹„ë””ì˜¤ íŠ¸ë™ ì°¾ê¸° ë° ì„ íƒ
var videoTrackIndex = -1
for (i in 0 until extractor.trackCount) {
    val format = extractor.getTrackFormat(i)
    val mime = format.getString(MediaFormat.KEY_MIME)
    if (mime?.startsWith("video/") == true) {
        videoTrackIndex = i
        extractor.selectTrack(i)
        break
    }
}

if (videoTrackIndex == -1) {
    throw IllegalStateException("No video track found")
}

// MediaCodec ë””ì½”ë” ìƒì„± ë° ì„¤ì •
val format = extractor.getTrackFormat(videoTrackIndex)
val mime = format.getString(MediaFormat.KEY_MIME)!!
val decoder = MediaCodec.createDecoderByType(mime)
decoder.configure(format, surface, null, 0)
decoder.start()

// ë””ì½”ë”© ë£¨í”„
val bufferInfo = MediaCodec.BufferInfo()
val inputBuffer = ByteBuffer.allocate(1024 * 1024) // 1MB
var isEOS = false

while (!isEOS) {
    // 1. ì…ë ¥: Extractor â†’ Decoder
    val inputIndex = decoder.dequeueInputBuffer(10000)
    if (inputIndex >= 0) {
        val buffer = decoder.getInputBuffer(inputIndex)!!
        val sampleSize = extractor.readSampleData(buffer, 0)

        if (sampleSize < 0) {
            // EOS
            decoder.queueInputBuffer(inputIndex, 0, 0, 0,
                MediaCodec.BUFFER_FLAG_END_OF_STREAM)
            isEOS = true
        } else {
            val presentationTimeUs = extractor.sampleTime
            decoder.queueInputBuffer(inputIndex, 0, sampleSize,
                presentationTimeUs, 0)
            extractor.advance()
        }
    }

    // 2. ì¶œë ¥: Decoder â†’ Surface/Buffer
    val outputIndex = decoder.dequeueOutputBuffer(bufferInfo, 10000)
    when {
        outputIndex >= 0 -> {
            // ë””ì½”ë”©ëœ í”„ë ˆì„ ë Œë”ë§ (Surface ì‚¬ìš© ì‹œ)
            decoder.releaseOutputBuffer(outputIndex, true)

            if ((bufferInfo.flags and MediaCodec.BUFFER_FLAG_END_OF_STREAM) != 0) {
                break
            }
        }
        outputIndex == MediaCodec.INFO_OUTPUT_FORMAT_CHANGED -> {
            val newFormat = decoder.outputFormat
            Log.d("Decoder", "Output format changed: $newFormat")
        }
    }
}

// ë¦¬ì†ŒìŠ¤ í•´ì œ
decoder.stop()
decoder.release()
extractor.release()</code></pre>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ” DRM ì½˜í…ì¸  ì²˜ë¦¬ (MediaDrm + MediaCrypto)
            </h3>

            <pre style="background: var(--bg-secondary); padding: 20px; border-radius: 8px; overflow-x: auto; border-left: 4px solid var(--accent-primary);"><code style="color: var(--text-primary); font-family: 'JetBrains Mono', monospace; font-size: 0.9rem;">// Widevine DRM ì½˜í…ì¸  ì²˜ë¦¬
val WIDEVINE_UUID = UUID(0xEDEF8BA979D64ACEL, 0xA3C827DCD51D21EDL)

// 1. MediaDrm ì´ˆê¸°í™”
val mediaDrm = MediaDrm(WIDEVINE_UUID)

// 2. ì„¸ì…˜ ìƒì„±
val sessionId = mediaDrm.openSession()

// 3. ë¼ì´ì„ ìŠ¤ ìš”ì²­ (ìƒëµ - ì„œë²„ì™€ í†µì‹ )
// ... provisioning, key request/response ...

// 4. MediaCrypto ìƒì„±
val mediaCrypto = MediaCrypto(WIDEVINE_UUID, sessionId)

// 5. MediaExtractor ì„¤ì •
val extractor = MediaExtractor()
extractor.setDataSource(drmVideoPath)

// ë¹„ë””ì˜¤ íŠ¸ë™ ì„ íƒ
var videoTrackIndex = -1
for (i in 0 until extractor.trackCount) {
    val format = extractor.getTrackFormat(i)
    val mime = format.getString(MediaFormat.KEY_MIME)
    if (mime?.startsWith("video/") == true) {
        videoTrackIndex = i
        extractor.selectTrack(i)
        break
    }
}

// 6. MediaCodecì— MediaCrypto ì „ë‹¬
val format = extractor.getTrackFormat(videoTrackIndex)
val mime = format.getString(MediaFormat.KEY_MIME)!!
val decoder = MediaCodec.createDecoderByType(mime)
decoder.configure(format, surface, mediaCrypto, 0)  // MediaCrypto ì „ë‹¬
decoder.start()

// 7. ì•”í˜¸í™”ëœ ìƒ˜í”Œ ì²˜ë¦¬
val bufferInfo = MediaCodec.BufferInfo()
val cryptoInfo = MediaCodec.CryptoInfo()

while (true) {
    val inputIndex = decoder.dequeueInputBuffer(10000)
    if (inputIndex >= 0) {
        val buffer = decoder.getInputBuffer(inputIndex)!!
        val sampleSize = extractor.readSampleData(buffer, 0)

        if (sampleSize < 0) {
            decoder.queueInputBuffer(inputIndex, 0, 0, 0,
                MediaCodec.BUFFER_FLAG_END_OF_STREAM)
            break
        }

        val presentationTimeUs = extractor.sampleTime
        val flags = extractor.sampleFlags

        // ENCRYPTED í”Œë˜ê·¸ í™•ì¸
        if ((flags and MediaExtractor.SAMPLE_FLAG_ENCRYPTED) != 0) {
            // CryptoInfo ì„¤ì • (IV, Key ID ë“±)
            extractor.getSampleCryptoInfo(cryptoInfo)
            decoder.queueSecureInputBuffer(inputIndex, 0, cryptoInfo,
                presentationTimeUs, 0)
        } else {
            decoder.queueInputBuffer(inputIndex, 0, sampleSize,
                presentationTimeUs, 0)
        }

        extractor.advance()
    }

    // ì¶œë ¥ ì²˜ë¦¬ (ì¼ë°˜ íŒŒì´í”„ë¼ì¸ê³¼ ë™ì¼)
    val outputIndex = decoder.dequeueOutputBuffer(bufferInfo, 10000)
    if (outputIndex >= 0) {
        decoder.releaseOutputBuffer(outputIndex, true)
        if ((bufferInfo.flags and MediaCodec.BUFFER_FLAG_END_OF_STREAM) != 0) {
            break
        }
    }
}

// ë¦¬ì†ŒìŠ¤ í•´ì œ
decoder.stop()
decoder.release()
extractor.release()
mediaCrypto.release()
mediaDrm.closeSession(sessionId)
mediaDrm.release()</code></pre>

            <div class="highlight-box" style="margin-top: 30px;">
                <strong>ğŸ’¡ ì½”ë“œ ì˜ˆì‹œ í•µì‹¬ í¬ì¸íŠ¸:</strong>
                <ul style="margin-top: 10px; padding-left: 20px;">
                    <li><strong>ê¸°ë³¸ ì‚¬ìš©</strong>: setDataSource() 3ê°€ì§€ ë°©ë²• (Path, URI, FD), íŠ¸ë™ ì •ë³´ ì¡°íšŒ, ë¦¬ì†ŒìŠ¤ í•´ì œ</li>
                    <li><strong>MediaCodec ì—°ë™</strong>: selectTrack() â†’ readSampleData() â†’ queueInputBuffer() â†’ dequeueOutputBuffer() ë£¨í”„</li>
                    <li><strong>DRM ì²˜ë¦¬</strong>: MediaDrm + MediaCrypto ìƒì„±, SAMPLE_FLAG_ENCRYPTED í™•ì¸, queueSecureInputBuffer() ì‚¬ìš©</li>
                    <li><strong>ì£¼ì˜ì‚¬í•­</strong>: ë°˜ë“œì‹œ Worker Threadì—ì„œ ì‹¤í–‰, ByteBuffer ì¬ì‚¬ìš©, release() í˜¸ì¶œ í•„ìˆ˜</li>
                </ul>
            </div>
        </section>

        <!-- Section 8: Custom Extractor Development -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">8</span>
                ì»¤ìŠ¤í…€ Extractor ê°œë°œ
            </h2>
            <p class="section-description">
                Android 10 ì´ìƒì—ì„œ ì»¤ìŠ¤í…€ ì»¨í…Œì´ë„ˆ í¬ë§·ì„ ì§€ì›í•˜ê¸° ìœ„í•œ Extractor í”ŒëŸ¬ê·¸ì¸ ê°œë°œ ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.
            </p>

            <div class="mermaid-container">
                <div class="mermaid">
                    flowchart TB
                    START[ì»¤ìŠ¤í…€ í¬ë§· ì§€ì› í•„ìš”] --> NATIVE[Native Extractor êµ¬í˜„<br />C/C++]

                    NATIVE --> INTERFACE[MediaExtractorPluginHelper<br />ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„]

                    INTERFACE --> METHODS[í•„ìˆ˜ ë©”ì„œë“œ êµ¬í˜„]
                    METHODS --> SNIFF[sniff: í¬ë§· íƒì§€]
                    METHODS --> CREATE[create: Extractor ìƒì„±]
                    METHODS --> TRACK[getTrackCount, getTrackFormat]
                    METHODS --> READ[readSampleData, advance]

                    READ --> BUILD[Android.bp ë¹Œë“œ ì„¤ì •]
                    BUILD --> SO[libcustomextractor.so ìƒì„±]

                    SO --> REGISTER[Extractor ë“±ë¡]
                    REGISTER --> MANIFEST[media_codecs_performance.xml]
                    REGISTER --> PLUGIN[MediaExtractorFactory í”ŒëŸ¬ê·¸ì¸]

                    PLUGIN --> TEST[í…ŒìŠ¤íŠ¸ ë° ê²€ì¦]
                    TEST --> DEPLOY[ì‹œìŠ¤í…œì— ë°°í¬]
                </div>
            </div>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ”§ Native ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„
            </h3>

            <pre style="background: var(--bg-secondary); padding: 20px; border-radius: 8px; overflow-x: auto; border-left: 4px solid var(--accent-primary);"><code style="color: var(--text-primary); font-family: 'JetBrains Mono', monospace; font-size: 0.9rem;">// CustomExtractor.h
#include &lt;media/stagefright/MediaExtractorPluginApi.h&gt;
#include &lt;media/stagefright/MediaExtractorPluginHelper.h&gt;

namespace android {

class CustomExtractor : public MediaExtractorPluginHelper {
public:
    explicit CustomExtractor(DataSourceHelper *source);
    virtual ~CustomExtractor();

    // í•„ìˆ˜ ë©”ì„œë“œ êµ¬í˜„
    virtual size_t countTracks() override;
    virtual MediaTrackHelper *getTrack(size_t index) override;
    virtual media_status_t getTrackMetaData(AMediaFormat *meta, size_t index) override;
    virtual media_status_t getMetaData(AMediaFormat *meta) override;
    virtual uint32_t flags() const override;

private:
    DataSourceHelper *mDataSource;
    // íŠ¸ë™ ì •ë³´, íŒŒì„œ ìƒíƒœ ë“±
};

// sniff í•¨ìˆ˜: í¬ë§· íƒì§€
extern "C" {
    CreatorFunc sniff(
        DataSourceHelper *source,
        float *confidence,
        void **,
        FreeMetaFunc *) {

        // ë§¤ì§ ë„˜ë²„ ë˜ëŠ” í—¤ë” ê²€ì‚¬
        uint8_t header[16];
        if (source->readAt(0, header, 16) != 16) {
            return nullptr;
        }

        // ì»¤ìŠ¤í…€ í¬ë§· ì‹ë³„ (ì˜ˆ: "CSTM" ë§¤ì§ ë„˜ë²„)
        if (memcmp(header, "CSTM", 4) == 0) {
            *confidence = 0.8f;  // ë†’ì€ ì‹ ë¢°ë„
            return [](DataSourceHelper *src, void *) -> CMediaExtractor* {
                return wrap(new CustomExtractor(src));
            };
        }

        return nullptr;
    }
}</code></pre>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ“¦ Android.bp ë¹Œë“œ ì„¤ì •
            </h3>

            <pre style="background: var(--bg-secondary); padding: 20px; border-radius: 8px; overflow-x: auto; border-left: 4px solid var(--accent-primary);"><code style="color: var(--text-primary); font-family: 'JetBrains Mono', monospace; font-size: 0.9rem;">// Android.bp
cc_library_shared {
    name: "libcustomextractor",

    srcs: [
        "CustomExtractor.cpp",
    ],

    shared_libs: [
        "liblog",
        "libmediandk",
    ],

    static_libs: [
        "libstagefright_foundation",
        "libstagefright_metadatautils",
    ],

    include_dirs: [
        "frameworks/av/media/libstagefright/include",
        "frameworks/av/media/ndk/include",
    ],

    cflags: [
        "-Werror",
        "-Wall",
    ],

    relative_install_path: "extractors",  // /system/lib64/extractors/

    compile_multilib: "both",

    vendor: true,  // ë²¤ë” íŒŒí‹°ì…˜ì— ì„¤ì¹˜
}</code></pre>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ”Œ Extractor ë“±ë¡
            </h3>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“</span>
                        ìë™ ë¡œë”©
                    </h3>
                    <div class="card-description">
                        <p><strong>MediaExtractorFactory ìŠ¤ìº”</strong></p>
                        <ul>
                            <li>/system/lib64/extractors/ ë””ë ‰í† ë¦¬ ìŠ¤ìº”</li>
                            <li>.so íŒŒì¼ ìë™ ë¡œë“œ</li>
                            <li>sniff() í•¨ìˆ˜ í˜¸ì¶œ</li>
                            <li>ì‹ ë¢°ë„ ë†’ì€ Extractor ì„ íƒ</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âš™ï¸</span>
                        ìˆ˜ë™ ë“±ë¡
                    </h3>
                    <div class="card-description">
                        <p><strong>media_codecs.xml</strong></p>
                        <pre style="background: var(--bg-primary); padding: 10px; border-radius: 4px; font-size: 0.8rem; margin-top: 10px;"><code>&lt;MediaExtractors&gt;
  &lt;MediaExtractor name="custom"
    library="libcustomextractor.so" /&gt;
&lt;/MediaExtractors&gt;</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ§ª</span>
                        í…ŒìŠ¤íŠ¸
                    </h3>
                    <div class="card-description">
                        <p><strong>ê²€ì¦ ë°©ë²•</strong></p>
                        <ul>
                            <li><code>adb shell dumpsys media.extractor</code>: ë“±ë¡ í™•ì¸</li>
                            <li>MediaExtractor APIë¡œ íŒŒì¼ ì—´ê¸°</li>
                            <li>CTS Extractor í…ŒìŠ¤íŠ¸ ì‹¤í–‰</li>
                            <li>ë‹¤ì–‘í•œ ìƒ˜í”Œ íŒŒì¼ ê²€ì¦</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âš ï¸</span>
                        ì£¼ì˜ì‚¬í•­
                    </h3>
                    <div class="card-description">
                        <p><strong>ê°œë°œ ì‹œ ê³ ë ¤ì‚¬í•­</strong></p>
                        <ul>
                            <li>Thread-safe êµ¬í˜„ í•„ìˆ˜</li>
                            <li>ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€</li>
                            <li>sniff() ì„±ëŠ¥ ìµœì í™” (ë¹ ë¥¸ íŒë‹¨)</li>
                            <li>ì—ëŸ¬ ì²˜ë¦¬ ì² ì €íˆ</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="warning-box" style="margin-top: 30px;">
                <strong>âš ï¸ ì»¤ìŠ¤í…€ Extractor ê°œë°œ ì œì•½ì‚¬í•­:</strong>
                <ul style="margin-top: 10px; padding-left: 20px;">
                    <li>Android 10 (API 29) ì´ìƒì—ì„œë§Œ í”ŒëŸ¬ê·¸ì¸ ì•„í‚¤í…ì²˜ ì§€ì›</li>
                    <li>System ë˜ëŠ” Vendor íŒŒí‹°ì…˜ ê¶Œí•œ í•„ìš” (ì¼ë°˜ ì•±ì—ì„œ ë¶ˆê°€)</li>
                    <li>C/C++ Native ê°œë°œ í•„ìˆ˜, Java/Kotlinìœ¼ë¡œ êµ¬í˜„ ë¶ˆê°€</li>
                    <li>CTS/VTS í…ŒìŠ¤íŠ¸ í†µê³¼ í•„ìš” (OEM/ODM ë°°í¬ ì‹œ)</li>
                    <li>ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ExoPlayer ì»¤ìŠ¤í…€ Extractorê°€ ë” ì‹¤ìš©ì </li>
                </ul>
            </div>
        </section>

        <!-- Section 9: Streaming Processing -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">9</span>
                ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬ ê°€ì´ë“œ
            </h2>
            <p class="section-description">
                ë„¤íŠ¸ì›Œí¬ ìŠ¤íŠ¸ë¦¼ì—ì„œ MediaExtractorë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ê³¼ ë²„í¼ë§ ì „ëµì„ ì„¤ëª…í•©ë‹ˆë‹¤.
            </p>

            <div class="mermaid-container">
                <div class="mermaid">
                    sequenceDiagram
                    participant App
                    participant ME as MediaExtractor
                    participant DS as HTTPDataSource
                    participant Server as HTTP Server
                    participant Buffer as Buffer Manager

                    App->>ME: setDataSource(url)
                    ME->>DS: HTTPDataSource ìƒì„±
                    DS->>Server: HTTP GET ìš”ì²­
                    Server-->>DS: HTTP 200 + í—¤ë”
                    DS->>DS: Content-Length í™•ì¸
                    DS-->>ME: DataSource ì¤€ë¹„ ì™„ë£Œ

                    ME->>DS: í—¤ë” ì½ê¸° (ì´ˆê¸° íƒìƒ‰)
                    DS->>Server: Range: bytes=0-8191
                    Server-->>DS: ì´ˆê¸° 8KB ë°ì´í„°
                    DS->>Buffer: ë²„í¼ì— ì €ì¥
                    Buffer-->>DS: ë²„í¼ ë°ì´í„°
                    DS-->>ME: í—¤ë” ë°ì´í„°

                    ME->>ME: ì»¨í…Œì´ë„ˆ í¬ë§· íŒŒì‹±
                    ME->>ME: íŠ¸ë™ ì •ë³´ ì¶”ì¶œ

                    loop ìƒ˜í”Œ ì½ê¸°
                    App->>ME: readSampleData()
                    ME->>DS: ìƒ˜í”Œ ì˜¤í”„ì…‹ ìœ„ì¹˜ ìš”ì²­

                    alt ë²„í¼ì— ìˆìŒ
                    DS->>Buffer: ìºì‹œ íˆíŠ¸
                    Buffer-->>DS: ë²„í¼ ë°ì´í„°
                    else ë²„í¼ì— ì—†ìŒ
                    DS->>Server: Range: bytes=X-Y
                    Server-->>DS: ìš”ì²­ ë²”ìœ„ ë°ì´í„°
                    DS->>Buffer: ìƒˆ ë°ì´í„° ë²„í¼ë§
                    Buffer-->>DS: ë²„í¼ ë°ì´í„°
                    end

                    DS-->>ME: ìƒ˜í”Œ ë°ì´í„°
                    ME-->>App: ìƒ˜í”Œ í¬ê¸° ë°˜í™˜

                    App->>ME: getCachedDuration()
                    ME->>DS: ë²„í¼ëœ ì‹œê°„ ì¡°íšŒ
                    DS->>Buffer: ë²„í¼ ìƒíƒœ í™•ì¸
                    Buffer-->>DS: ìºì‹œëœ ë²”ìœ„
                    DS-->>ME: ìºì‹œëœ ì‹œê°„ (Âµs)
                    ME-->>App: ì¬ìƒ ê°€ëŠ¥í•œ ì‹œê°„
                    end
                </div>
            </div>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸŒ ë„¤íŠ¸ì›Œí¬ DataSource ì‚¬ìš©
            </h3>

            <pre style="background: var(--bg-secondary); padding: 20px; border-radius: 8px; overflow-x: auto; border-left: 4px solid var(--accent-primary);"><code style="color: var(--text-primary); font-family: 'JetBrains Mono', monospace; font-size: 0.9rem;">// HTTP URLë¡œ ìŠ¤íŠ¸ë¦¬ë°
val extractor = MediaExtractor()
val url = "https://example.com/video.mp4"

try {
    // HTTP(S) URL ì§€ì›
    extractor.setDataSource(url)

    // ë˜ëŠ” í—¤ë”ì™€ í•¨ê»˜
    val headers = mapOf(
        "User-Agent" to "MyApp/1.0",
        "Authorization" to "Bearer token123"
    )
    extractor.setDataSource(url, headers)

    // ë²„í¼ ìƒíƒœ í™•ì¸
    val cachedDurationUs = extractor.cachedDuration
    val cachedDurationMs = cachedDurationUs / 1000
    Log.d("Streaming", "Buffered: ${cachedDurationMs}ms")

    // íŠ¸ë™ ì„ íƒ ë° ì¬ìƒ
    for (i in 0 until extractor.trackCount) {
        val format = extractor.getTrackFormat(i)
        val mime = format.getString(MediaFormat.KEY_MIME)
        if (mime?.startsWith("video/") == true) {
            extractor.selectTrack(i)
            break
        }
    }

    // ìƒ˜í”Œ ì½ê¸° (ë¡œì»¬ íŒŒì¼ê³¼ ë™ì¼)
    val buffer = ByteBuffer.allocate(1024 * 1024)
    while (true) {
        val sampleSize = extractor.readSampleData(buffer, 0)
        if (sampleSize < 0) break

        // ë²„í¼ ìƒíƒœ ì¬í™•ì¸
        val remainingCached = extractor.cachedDuration
        if (remainingCached < 2_000_000) {  // 2ì´ˆ ë¯¸ë§Œ
            Log.w("Streaming", "Low buffer: ${remainingCached / 1000}ms")
            // ë²„í¼ë§ ëŒ€ê¸° ë˜ëŠ” ì¬ìƒ ì¼ì‹œì •ì§€
        }

        // ë””ì½”ë”ì— ì „ë‹¬...
        extractor.advance()
    }

} catch (e: IOException) {
    Log.e("Streaming", "Network error", e)
} finally {
    extractor.release()
}</code></pre>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ“Š ë²„í¼ë§ ì „ëµ
            </h3>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">â¸ï¸</span>
                        Threshold-based Buffering
                    </h3>
                    <div class="card-description">
                        <p><strong>ì„ê³„ê°’ ê¸°ë°˜ ë²„í¼ë§</strong></p>
                        <ul>
                            <li><strong>Low Threshold</strong>: 2ì´ˆ ë¯¸ë§Œ ì‹œ ì¼ì‹œì •ì§€</li>
                            <li><strong>High Threshold</strong>: 10ì´ˆ ì´ìƒ ì‹œ ì¬ìƒ ì¬ê°œ</li>
                            <li><code>getCachedDuration()</code>ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§</li>
                            <li>ì‚¬ìš©ìì—ê²Œ ë²„í¼ë§ UI í‘œì‹œ</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”„</span>
                        Prefetch Strategy
                    </h3>
                    <div class="card-description">
                        <p><strong>ë¯¸ë¦¬ ì½ê¸° ì „ëµ</strong></p>
                        <ul>
                            <li>ì¬ìƒ ìœ„ì¹˜ë³´ë‹¤ ì•ì„œì„œ ìƒ˜í”Œ ì½ê¸°</li>
                            <li>ë³„ë„ Worker Threadì—ì„œ Prefetch</li>
                            <li>Queueì— ìƒ˜í”Œ ì €ì¥</li>
                            <li>Seek ì‹œ Prefetch ì·¨ì†Œ ë° ì¬ì‹œì‘</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“¡</span>
                        Network Monitoring
                    </h3>
                    <div class="card-description">
                        <p><strong>ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ê°ì§€</strong></p>
                        <ul>
                            <li>ConnectivityManagerë¡œ ì—°ê²° ìƒíƒœ í™•ì¸</li>
                            <li>WiFi â†” Cellular ì „í™˜ ê°ì§€</li>
                            <li>ë„¤íŠ¸ì›Œí¬ ëŠê¹€ ì‹œ ì—ëŸ¬ ì²˜ë¦¬</li>
                            <li>ìë™ ì¬ì—°ê²° ë¡œì§</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âš¡</span>
                        Adaptive Buffering
                    </h3>
                    <div class="card-description">
                        <p><strong>ì ì‘í˜• ë²„í¼ë§</strong></p>
                        <ul>
                            <li>ë„¤íŠ¸ì›Œí¬ ì†ë„ì— ë”°ë¼ ì„ê³„ê°’ ì¡°ì •</li>
                            <li>ë¹ ë¥¸ ë„¤íŠ¸ì›Œí¬: ì‘ì€ ë²„í¼</li>
                            <li>ëŠë¦° ë„¤íŠ¸ì›Œí¬: í° ë²„í¼</li>
                            <li>ë°°í„°ë¦¬ ë° ë°ì´í„° ì‚¬ìš©ëŸ‰ ê³ ë ¤</li>
                        </ul>
                    </div>
                </div>
            </div>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ¬ HLS/DASH í”„ë˜ê·¸ë¨¼íŠ¸ ì²˜ë¦¬
            </h3>

            <div class="highlight-box">
                <strong>âš ï¸ MediaExtractorì˜ HLS/DASH ì œì•½ì‚¬í•­:</strong>
                <ul style="margin-top: 10px; padding-left: 20px;">
                    <li>MediaExtractorëŠ” <strong>ë‹¨ì¼ íŒŒì¼ ê¸°ë°˜</strong>ìœ¼ë¡œ ì„¤ê³„ë¨ - ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì‹± ë¯¸ì§€ì›</li>
                    <li>HLS(.m3u8), DASH(.mpd)ëŠ” ì—¬ëŸ¬ í”„ë˜ê·¸ë¨¼íŠ¸ë¡œ êµ¬ì„± â†’ MediaExtractor ì§ì ‘ ì‚¬ìš© ë¶ˆê°€</li>
                    <li><strong>ê¶Œì¥ ë°©ë²•</strong>: ExoPlayer ì‚¬ìš© (HlsMediaSource, DashMediaSource ë‚´ì¥)</li>
                    <li><strong>ëŒ€ì•ˆ</strong>: ê°œë³„ .ts/.m4s í”„ë˜ê·¸ë¨¼íŠ¸ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œ í›„ ìˆœì°¨ ì²˜ë¦¬</li>
                </ul>
            </div>

            <pre style="background: var(--bg-secondary); padding: 20px; border-radius: 8px; overflow-x: auto; border-left: 4px solid var(--accent-primary); margin-top: 20px;"><code style="color: var(--text-primary); font-family: 'JetBrains Mono', monospace; font-size: 0.9rem;">// HLS í”„ë˜ê·¸ë¨¼íŠ¸ ìˆ˜ë™ ì²˜ë¦¬ (ê¶Œì¥í•˜ì§€ ì•ŠìŒ)
// ì‹¤ë¬´ì—ì„œëŠ” ExoPlayer ì‚¬ìš© ê¶Œì¥

// 1. .m3u8 ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì‹± (ìˆ˜ë™ êµ¬í˜„ í•„ìš”)
val m3u8Url = "https://example.com/playlist.m3u8"
val fragmentUrls = parseM3U8(m3u8Url)  // ì§ì ‘ êµ¬í˜„ í•„ìš”

// 2. ê° í”„ë˜ê·¸ë¨¼íŠ¸ë¥¼ ìˆœì°¨ ì²˜ë¦¬
for (fragmentUrl in fragmentUrls) {
    val extractor = MediaExtractor()
    extractor.setDataSource(fragmentUrl)

    // íŠ¸ë™ ì„ íƒ
    extractor.selectTrack(0)

    // ìƒ˜í”Œ ì½ê¸°
    val buffer = ByteBuffer.allocate(1024 * 1024)
    while (true) {
        val size = extractor.readSampleData(buffer, 0)
        if (size < 0) break

        // ë””ì½”ë”ì— ì „ë‹¬...
        extractor.advance()
    }

    extractor.release()
}

// âš ï¸ ìœ„ ë°©ë²•ì˜ ë¬¸ì œì :
// - í”„ë˜ê·¸ë¨¼íŠ¸ ì „í™˜ ì‹œ ëŠê¹€ ë°œìƒ
// - ABR (Adaptive Bitrate) ë¯¸ì§€ì›
// - ë³µì¡í•œ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì‹± ì§ì ‘ êµ¬í˜„ í•„ìš”
// - DRM ì²˜ë¦¬ ë³µì¡

// âœ… ê¶Œì¥ ë°©ë²•: ExoPlayer ì‚¬ìš©
val player = ExoPlayer.Builder(context).build()
val mediaItem = MediaItem.fromUri("https://example.com/playlist.m3u8")
player.setMediaItem(mediaItem)
player.prepare()
player.play()</code></pre>
        </section>

        <!-- Section 10: Decoder Selection -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">10</span>
                ë””ì½”ë” ì„ ì • ê³¼ì •
            </h2>
            <p class="section-description">
                MediaExtractorë¡œ ì¶”ì¶œí•œ ìƒ˜í”Œ ë°ì´í„°ë¥¼ ë””ì½”ë”©í•˜ê¸° ìœ„í•´ ì ì ˆí•œ MediaCodec ë””ì½”ë”ë¥¼ ì„ ì •í•˜ëŠ” ê³¼ì •ì„ ì„¤ëª…í•©ë‹ˆë‹¤.
            </p>

            <div class="mermaid-container">
                <div class="mermaid">
                    sequenceDiagram
                    participant App
                    participant ME as MediaExtractor
                    participant MCL as MediaCodecList
                    participant MCI as MediaCodecInfo
                    participant MC as MediaCodec

                    App->>ME: getTrackFormat(i)
                    ME-->>App: MediaFormat<br />MIME, í•´ìƒë„, í”„ë¡œíŒŒì¼ ë“±

                    App->>MCL: new MediaCodecList<br />(REGULAR_CODECS)
                    MCL-->>App: CodecList ì¸ìŠ¤í„´ìŠ¤

                    App->>MCL: findDecoderForFormat(format)

                    loop ëª¨ë“  ì½”ë± ìˆœíšŒ
                    MCL->>MCI: getCodecInfos()
                    MCI-->>MCL: CodecInfo ë°°ì—´

                    MCL->>MCI: isEncoder()?
                    MCI-->>MCL: false (ë””ì½”ë”ë§Œ)

                    MCL->>MCI: getSupportedTypes()
                    MCI-->>MCL: MIME íƒ€ì… ë°°ì—´

                    alt MIME íƒ€ì… ì¼ì¹˜
                    MCL->>MCI: getCapabilitiesForType(mime)
                    MCI-->>MCL: CodecCapabilities

                    MCL->>MCI: isFormatSupported(format)?

                    alt í¬ë§· ì§€ì›
                    MCI-->>MCL: true
                    MCL-->>App: ì½”ë± ì´ë¦„ ë°˜í™˜
                    else í¬ë§· ë¯¸ì§€ì›
                    MCI-->>MCL: false
                    end
                    end
                    end

                    App->>MC: createByCodecName(name)
                    MC-->>App: MediaCodec ì¸ìŠ¤í„´ìŠ¤

                    App->>MC: configure(format)
                    App->>MC: start()
                </div>
            </div>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ” ë””ì½”ë” ì„ ì • ê¸°ì¤€
            </h3>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ¯</span>
                        MIME íƒ€ì… ë§¤ì¹­
                    </h3>
                    <div class="card-description">
                        <p><strong>ê¸°ë³¸ í•„í„°ë§</strong></p>
                        <ul>
                            <li>video/avc (H.264)</li>
                            <li>video/hevc (H.265)</li>
                            <li>video/vp9, video/av1</li>
                            <li>audio/mp4a-latm (AAC)</li>
                            <li>audio/opus, audio/vorbis</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“</span>
                        í•´ìƒë„ ë° í”„ë¡œíŒŒì¼
                    </h3>
                    <div class="card-description">
                        <p><strong>CodecCapabilities í™•ì¸</strong></p>
                        <ul>
                            <li><code>getVideoCapabilities()</code>: í•´ìƒë„ ë²”ìœ„</li>
                            <li><code>profileLevels</code>: ì§€ì› í”„ë¡œíŒŒì¼/ë ˆë²¨</li>
                            <li><code>colorFormats</code>: ìƒ‰ìƒ í¬ë§·</li>
                            <li><code>isFormatSupported()</code>: ì „ì²´ ê²€ì¦</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âš¡</span>
                        í•˜ë“œì›¨ì–´ vs ì†Œí”„íŠ¸ì›¨ì–´
                    </h3>
                    <div class="card-description">
                        <p><strong>ìš°ì„ ìˆœìœ„</strong></p>
                        <ul>
                            <li><strong>í•˜ë“œì›¨ì–´ ì½”ë±</strong>: ë¹ ë¥´ê³  ì „ë ¥ íš¨ìœ¨ì </li>
                            <li>ë²¤ë” ì ‘ë‘ì‚¬ (OMX.Exynos, OMX.qcom ë“±)</li>
                            <li><strong>ì†Œí”„íŠ¸ì›¨ì–´ ì½”ë±</strong>: í˜¸í™˜ì„± ìš°ìˆ˜</li>
                            <li>OMX.google.* ì ‘ë‘ì‚¬</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”§</span>
                        ìƒì„± ë°©ë²•
                    </h3>
                    <div class="card-description">
                        <p><strong>MediaCodec ì¸ìŠ¤í„´ìŠ¤í™”</strong></p>
                        <ul>
                            <li><code>createDecoderByType(mime)</code>: ìë™ ì„ íƒ</li>
                            <li><code>createByCodecName(name)</code>: ëª…ì‹œì  ì„ íƒ</li>
                            <li><code>createEncoderByType(mime)</code>: ì¸ì½”ë”</li>
                            <li>í•˜ë“œì›¨ì–´ ì½”ë± ìš°ì„  ì„ íƒ</li>
                        </ul>
                    </div>
                </div>
            </div>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ“Š MediaCodecList ì‚¬ìš© ì˜ˆì‹œ
            </h3>

            <div class="mermaid-container">
                <div class="mermaid">
                    flowchart TB
                    START[MediaFormat íšë“] --> CREATE_LIST[MediaCodecList ìƒì„±<br />REGULAR_CODECS]

                    CREATE_LIST --> METHOD{ì„ íƒ ë°©ë²•}

                    METHOD -->|ìë™| AUTO[createDecoderByType<br />mime]
                    METHOD -->|ìˆ˜ë™| MANUAL[findDecoderForFormat<br />format]

                    AUTO --> HW_FIRST{í•˜ë“œì›¨ì–´ ì½”ë±<br />ì‚¬ìš© ê°€ëŠ¥?}
                    HW_FIRST -->|Yes| HW_CODEC[í•˜ë“œì›¨ì–´ ë””ì½”ë” ì„ íƒ]
                    HW_FIRST -->|No| SW_CODEC[ì†Œí”„íŠ¸ì›¨ì–´ ë””ì½”ë” ì„ íƒ]

                    MANUAL --> ITERATE[ì½”ë± ëª©ë¡ ìˆœíšŒ]
                    ITERATE --> CHECK_TYPE{MIME íƒ€ì…<br />ì¼ì¹˜?}

                    CHECK_TYPE -->|No| NEXT[ë‹¤ìŒ ì½”ë±]
                    NEXT --> ITERATE

                    CHECK_TYPE -->|Yes| GET_CAP[CodecCapabilities ì¡°íšŒ]
                    GET_CAP --> CHECK_FORMAT{í¬ë§· ì§€ì›?<br />í•´ìƒë„, í”„ë¡œíŒŒì¼}

                    CHECK_FORMAT -->|No| NEXT
                    CHECK_FORMAT -->|Yes| FOUND[ì½”ë± ì´ë¦„ ì €ì¥]

                    HW_CODEC --> CREATE[createByCodecName]
                    SW_CODEC --> CREATE
                    FOUND --> CREATE

                    CREATE --> CONFIGURE[configure ë° start]
                    CONFIGURE --> END[ë””ì½”ë”© ì¤€ë¹„ ì™„ë£Œ]

                </div>
            </div>

            <div class="highlight-box">
                <strong>ğŸ’¡ ë””ì½”ë” ì„ ì • Best Practices:</strong>
                <ul style="margin-top: 10px; padding-left: 20px;">
                    <li><code>createDecoderByType()</code>ì„ ì‚¬ìš©í•˜ë©´ ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ ìµœì ì˜ ì½”ë± ì„ íƒ</li>
                    <li>íŠ¹ì • ì½”ë±ì´ í•„ìš”í•œ ê²½ìš°ì—ë§Œ <code>MediaCodecList</code>ë¡œ ìˆ˜ë™ ì„ íƒ</li>
                    <li>í•˜ë“œì›¨ì–´ ì½”ë±ì€ ì„±ëŠ¥ì´ ì¢‹ì§€ë§Œ ë””ë°”ì´ìŠ¤ë§ˆë‹¤ ì§€ì› ë²”ìœ„ê°€ ë‹¤ë¦„</li>
                    <li><code>isFormatSupported()</code>ë¡œ ì‚¬ì „ ê²€ì¦í•˜ì—¬ ëŸ°íƒ€ì„ ì—ëŸ¬ ë°©ì§€</li>
                    <li>ì†Œí”„íŠ¸ì›¨ì–´ ì½”ë±ì€ í´ë°±(fallback) ì˜µì…˜ìœ¼ë¡œ ìœ ìš©</li>
                </ul>
            </div>
        </section>

        <!-- Section 11: Performance Profiling & Debugging -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">11</span>
                ì„±ëŠ¥ í”„ë¡œíŒŒì¼ë§ ë° ë””ë²„ê¹…
            </h2>
            <p class="section-description">
                MediaExtractorì˜ ì„±ëŠ¥ ë¶„ì„ ë° ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ ë„êµ¬ì™€ ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.
            </p>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-bottom: 20px;">
                ğŸ“Š adb logcat í•„í„°ë§
            </h3>

            <pre style="background: var(--bg-secondary); padding: 20px; border-radius: 8px; overflow-x: auto; border-left: 4px solid var(--accent-primary);"><code style="color: var(--text-primary); font-family: 'JetBrains Mono', monospace; font-size: 0.9rem;"># MediaExtractor ê´€ë ¨ ë¡œê·¸ë§Œ ë³´ê¸°
adb logcat -s MediaExtractor MediaExtractorFactory

# Parser ë¡œê·¸ (MP4, MKV ë“±)
adb logcat -s MPEG4Extractor MatroskaExtractor

# DataSource ë¡œê·¸ (ë„¤íŠ¸ì›Œí¬, íŒŒì¼)
adb logcat -s NuCachedSource2 HTTPDataSource

# ìƒ˜í”Œ ì½ê¸° ê´€ë ¨ ë¡œê·¸
adb logcat | grep -iE "sample|track|seek"

# ì—ëŸ¬ë§Œ í•„í„°ë§
adb logcat *:E | grep -i extractor

# ì„±ëŠ¥ ê´€ë ¨ ë¡œê·¸ (ì‹œê°„ ì¸¡ì •)
adb logcat | grep -iE "took|duration|latency"</code></pre>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ”§ dumpsys ëª…ë ¹ì–´
            </h3>

            <pre style="background: var(--bg-secondary); padding: 20px; border-radius: 8px; overflow-x: auto; border-left: 4px solid var(--accent-primary);"><code style="color: var(--text-primary); font-family: 'JetBrains Mono', monospace; font-size: 0.9rem;"># MediaExtractor ì„œë¹„ìŠ¤ ì •ë³´
adb shell dumpsys media.extractor

# ë“±ë¡ëœ Extractor í”ŒëŸ¬ê·¸ì¸ ëª©ë¡
adb shell dumpsys media.extractor plugins

# í™œì„±í™”ëœ Extractor ì„¸ì…˜
adb shell dumpsys media.extractor sessions

# MediaCodecList (ë””ì½”ë” ì •ë³´)
adb shell dumpsys media.codec_list

# ì „ì²´ ë¯¸ë””ì–´ ì„œë¹„ìŠ¤ ìƒíƒœ
adb shell dumpsys media.player</code></pre>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ“ˆ Systrace í”„ë¡œíŒŒì¼ë§
            </h3>

            <pre style="background: var(--bg-secondary); padding: 20px; border-radius: 8px; overflow-x: auto; border-left: 4px solid var(--accent-primary);"><code style="color: var(--text-primary); font-family: 'JetBrains Mono', monospace; font-size: 0.9rem;"># Systrace ìº¡ì²˜ (10ì´ˆ, media ì¹´í…Œê³ ë¦¬)
adb shell atrace -z -t 10 gfx audio video media -o /data/local/tmp/trace.html
adb pull /data/local/tmp/trace.html

# Chromeì—ì„œ trace.html ì—´ì–´ì„œ ë¶„ì„
# - MediaExtractor::readSampleData í˜¸ì¶œ ì‹œê°„
# - DataSource::readAt I/O ë ˆì´í„´ì‹œ
# - Parser íŒŒì‹± ì˜¤ë²„í—¤ë“œ
# - Seek ì—°ì‚° ì‹œê°„

# Perfetto ì‚¬ìš© (Android 10+)
adb shell perfetto \
  -c - --txt \
  -o /data/misc/perfetto-traces/trace \
  <<EOF
duration_ms: 10000
buffers {
  size_kb: 32768
}
data_sources {
  config {
    name: "linux.ftrace"
    ftrace_config {
      ftrace_events: "sched/sched_switch"
      ftrace_events: "power/suspend_resume"
      atrace_categories: "media"
    }
  }
}
EOF

adb pull /data/misc/perfetto-traces/trace
# https://ui.perfetto.dev/ ì—ì„œ ë¶„ì„</code></pre>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ› íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ
            </h3>

            <div class="highlight-box">
                <table style="width: 100%; margin-top: 15px; border-collapse: collapse;">
                    <thead>
                        <tr style="background: var(--bg-secondary); border-bottom: 2px solid var(--accent-primary);">
                            <th style="padding: 12px; text-align: left; color: var(--accent-primary);">ì¦ìƒ</th>
                            <th style="padding: 12px; text-align: left; color: var(--accent-primary);">ì›ì¸</th>
                            <th style="padding: 12px; text-align: left; color: var(--accent-primary);">í•´ê²° ë°©ë²•</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="border-bottom: 1px solid var(--border-color);">
                            <td style="padding: 10px;"><strong>setDataSource() ì‹¤íŒ¨</strong></td>
                            <td style="padding: 10px;">ì§€ì›í•˜ì§€ ì•ŠëŠ” ì»¨í…Œì´ë„ˆ í¬ë§·</td>
                            <td style="padding: 10px;">1. íŒŒì¼ ë§¤ì§ ë„˜ë²„ í™•ì¸ (hexdump)<br>2. MediaExtractor ì§€ì› í¬ë§· í™•ì¸<br>3. ExoPlayerë¡œ ëŒ€ì²´</td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border-color);">
                            <td style="padding: 10px;"><strong>getTrackCount() = 0</strong></td>
                            <td style="padding: 10px;">ì†ìƒëœ íŒŒì¼ ë˜ëŠ” ë©”íƒ€ë°ì´í„° ì—†ìŒ</td>
                            <td style="padding: 10px;">1. íŒŒì¼ ë¬´ê²°ì„± ê²€ì‚¬<br>2. FFprobeë¡œ íŒŒì¼ ë¶„ì„<br>3. ë‹¤ë¥¸ ì¸ì½”ë”ë¡œ ì¬ìƒì„±</td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border-color);">
                            <td style="padding: 10px;"><strong>readSampleData() = -1</strong></td>
                            <td style="padding: 10px;">selectTrack() ë¯¸í˜¸ì¶œ ë˜ëŠ” EOS</td>
                            <td style="padding: 10px;">1. selectTrack() í˜¸ì¶œ í™•ì¸<br>2. getSampleTime()ìœ¼ë¡œ EOS í™•ì¸<br>3. seekTo(0)ë¡œ ì²˜ìŒë¶€í„° ì¬ìƒ</td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border-color);">
                            <td style="padding: 10px;"><strong>ë²„í¼ ì˜¤ë²„í”Œë¡œìš°</strong></td>
                            <td style="padding: 10px;">ByteBuffer í¬ê¸° ë¶€ì¡±</td>
                            <td style="padding: 10px;">1. MediaFormatì—ì„œ KEY_MAX_INPUT_SIZE í™•ì¸<br>2. ì¶©ë¶„í•œ ë²„í¼ í• ë‹¹ (ê¶Œì¥: 1~2MB)<br>3. readSampleData() ë°˜í™˜ê°’ í™•ì¸</td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border-color);">
                            <td style="padding: 10px;"><strong>Seekê°€ ì •í™•í•˜ì§€ ì•ŠìŒ</strong></td>
                            <td style="padding: 10px;">í‚¤í”„ë ˆì„ ê°„ê²©ì´ í¼ (GOP í¬ê¸°)</td>
                            <td style="padding: 10px;">1. CLOSEST_SYNC ëª¨ë“œ ì‚¬ìš©<br>2. getSampleTime()ìœ¼ë¡œ ì‹¤ì œ ìœ„ì¹˜ í™•ì¸<br>3. í•„ìš” ì‹œ ì¸ì½”ë”© GOP í¬ê¸° ì¡°ì •</td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border-color);">
                            <td style="padding: 10px;"><strong>ë„¤íŠ¸ì›Œí¬ ìŠ¤íŠ¸ë¦¼ ë²„í¼ë§</strong></td>
                            <td style="padding: 10px;">ëŠë¦° ë„¤íŠ¸ì›Œí¬ ë˜ëŠ” ì„œë²„ ì‘ë‹µ</td>
                            <td style="padding: 10px;">1. getCachedDuration() ëª¨ë‹ˆí„°ë§<br>2. Prefetch ì „ëµ êµ¬í˜„<br>3. ì €í•´ìƒë„ë¡œ í´ë°±</td>
                        </tr>
                        <tr style="border-bottom: 1px solid var(--border-color);">
                            <td style="padding: 10px;"><strong>DRM ì½˜í…ì¸  ì¬ìƒ ì‹¤íŒ¨</strong></td>
                            <td style="padding: 10px;">MediaCrypto ë¯¸ì„¤ì • ë˜ëŠ” ë¼ì´ì„ ìŠ¤ ì˜¤ë¥˜</td>
                            <td style="padding: 10px;">1. SAMPLE_FLAG_ENCRYPTED í™•ì¸<br>2. MediaDrm ì„¸ì…˜ ìƒíƒœ ê²€ì¦<br>3. ë¼ì´ì„ ìŠ¤ ì„œë²„ ì‘ë‹µ ë¡œê·¸ í™•ì¸</td>
                        </tr>
                        <tr>
                            <td style="padding: 10px;"><strong>ë©”ëª¨ë¦¬ ëˆ„ìˆ˜</strong></td>
                            <td style="padding: 10px;">release() ë¯¸í˜¸ì¶œ</td>
                            <td style="padding: 10px;">1. try-finally ë¸”ë¡ì—ì„œ release()<br>2. LeakCanaryë¡œ ëˆ„ìˆ˜ íƒì§€<br>3. Profilerì—ì„œ Native ë©”ëª¨ë¦¬ í™•ì¸</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ“ ì„±ëŠ¥ ë©”íŠ¸ë¦­
            </h3>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">â±ï¸</span>
                        Sample Read Latency
                    </h3>
                    <div class="card-description">
                        <p><strong>ìƒ˜í”Œ ì½ê¸° ì‹œê°„</strong></p>
                        <ul>
                            <li><strong>ë¡œì»¬ íŒŒì¼</strong>: &lt;1ms (SSD)</li>
                            <li><strong>ë„¤íŠ¸ì›Œí¬</strong>: 10~100ms</li>
                            <li>Systraceì—ì„œ readSampleData êµ¬ê°„ í™•ì¸</li>
                            <li>I/O ë³‘ëª© ì§€ì  íŒŒì•…</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”</span>
                        Seek Performance
                    </h3>
                    <div class="card-description">
                        <p><strong>íƒìƒ‰ ì„±ëŠ¥</strong></p>
                        <ul>
                            <li><strong>MP4</strong>: &lt;10ms (ì¸ë±ìŠ¤ ê¸°ë°˜)</li>
                            <li><strong>MKV</strong>: ~50ms (Cluster íƒìƒ‰)</li>
                            <li>seekTo() í˜¸ì¶œ í›„ getSampleTime() í™•ì¸</li>
                            <li>í‚¤í”„ë ˆì„ ì¸ë±ìŠ¤ ìµœì í™” ì—¬ë¶€</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ’¾</span>
                        Memory Usage
                    </h3>
                    <div class="card-description">
                        <p><strong>ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰</strong></p>
                        <ul>
                            <li><strong>MediaExtractor</strong>: ~1MB</li>
                            <li><strong>Parser</strong>: ~2~5MB (ë©”íƒ€ë°ì´í„°)</li>
                            <li><strong>Buffer</strong>: ì‚¬ìš©ì í• ë‹¹ í¬ê¸°</li>
                            <li>Profilerì—ì„œ Native Heap ëª¨ë‹ˆí„°ë§</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“Š</span>
                        Throughput
                    </h3>
                    <div class="card-description">
                        <p><strong>ì²˜ë¦¬ëŸ‰</strong></p>
                        <ul>
                            <li><strong>ë¡œì»¬</strong>: 100+ MB/s (SSD)</li>
                            <li><strong>ë„¤íŠ¸ì›Œí¬</strong>: ëŒ€ì—­í­ ì˜ì¡´</li>
                            <li>readSampleData() í˜¸ì¶œ ë¹ˆë„ ì¸¡ì •</li>
                            <li>Batch ì²˜ë¦¬ë¡œ ìµœì í™”</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="warning-box" style="margin-top: 30px;">
                <strong>ğŸ’¡ ë””ë²„ê¹… Best Practices:</strong>
                <ul style="margin-top: 10px; padding-left: 20px;">
                    <li>ë¬¸ì œ ì¬í˜„ ì‹œ logcatê³¼ Systraceë¥¼ ë™ì‹œì— ìº¡ì²˜í•˜ì—¬ ì „ì²´ ê·¸ë¦¼ íŒŒì•…</li>
                    <li>FFprobe/MediaInfoë¡œ ì…ë ¥ íŒŒì¼ ë¶„ì„ í›„ MediaExtractor ë™ì‘ê³¼ ë¹„êµ</li>
                    <li>ì„±ëŠ¥ ì´ìŠˆ ì‹œ I/O (DataSource), íŒŒì‹± (Parser), ë²„í¼ ë³µì‚¬ ì¤‘ ì–´ëŠ ë‹¨ê³„ê°€ ëŠë¦°ì§€ ë¶„ë¦¬ ì¸¡ì •</li>
                    <li>ExoPlayer ì†ŒìŠ¤ ì½”ë“œëŠ” MediaExtractor ê³ ê¸‰ ì‚¬ìš© ì˜ˆì‹œì˜ ë³´ê³ </li>
                </ul>
            </div>
        </section>

        <!-- Section 12: AOSP Source Code Reference -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">12</span>
                AOSP ì†ŒìŠ¤ ì½”ë“œ ì°¸ì¡°
            </h2>
            <p class="section-description">
                MediaExtractor êµ¬í˜„ì„ ì´í•´í•˜ê¸° ìœ„í•œ AOSP ì†ŒìŠ¤ ì½”ë“œ ìœ„ì¹˜ì™€ í•µì‹¬ ë¡œì§ì„ ì†Œê°œí•©ë‹ˆë‹¤.
            </p>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-bottom: 20px;">
                ğŸ“‚ ì£¼ìš” ì†ŒìŠ¤ íŒŒì¼ ìœ„ì¹˜
            </h3>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“±</span>
                        Framework (Java/Kotlin)
                    </h3>
                    <div class="card-description">
                        <p><strong>Public API</strong></p>
                        <pre style="background: var(--bg-primary); padding: 10px; border-radius: 4px; font-size: 0.75rem; margin-top: 10px;"><code>frameworks/base/media/java/android/media/
â”œâ”€â”€ MediaExtractor.java
â”œâ”€â”€ MediaFormat.java
â”œâ”€â”€ MediaCodec.java
â””â”€â”€ MediaDrm.java</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âš™ï¸</span>
                        Native Core
                    </h3>
                    <div class="card-description">
                        <p><strong>libstagefright</strong></p>
                        <pre style="background: var(--bg-primary); padding: 10px; border-radius: 4px; font-size: 0.75rem; margin-top: 10px;"><code>frameworks/av/media/libstagefright/
â”œâ”€â”€ MediaExtractor.cpp
â”œâ”€â”€ MediaExtractorFactory.cpp
â”œâ”€â”€ DataSource.cpp
â””â”€â”€ foundation/</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“¦</span>
                        Container Parsers
                    </h3>
                    <div class="card-description">
                        <p><strong>Extractor êµ¬í˜„</strong></p>
                        <pre style="background: var(--bg-primary); padding: 10px; border-radius: 4px; font-size: 0.75rem; margin-top: 10px;"><code>frameworks/av/media/extractors/
â”œâ”€â”€ mp4/MPEG4Extractor.cpp
â”œâ”€â”€ mkv/MatroskaExtractor.cpp
â”œâ”€â”€ wav/WAVExtractor.cpp
â””â”€â”€ mpeg2/MPEG2PSExtractor.cpp</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”Œ</span>
                        Plugin Interface
                    </h3>
                    <div class="card-description">
                        <p><strong>Android 10+ Plugin</strong></p>
                        <pre style="background: var(--bg-primary); padding: 10px; border-radius: 4px; font-size: 0.75rem; margin-top: 10px;"><code>frameworks/av/media/libstagefright/include/
â”œâ”€â”€ MediaExtractorPluginApi.h
â””â”€â”€ MediaExtractorPluginHelper.h</code></pre>
                    </div>
                </div>
            </div>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ’» í•µì‹¬ ì½”ë“œ ìŠ¤ë‹ˆí«
            </h3>

            <h4 style="color: var(--text-primary); font-size: 1.2rem; margin-top: 30px; margin-bottom: 15px;">
                1. MediaExtractor.cpp (Framework Native)
            </h4>

            <pre style="background: var(--bg-secondary); padding: 20px; border-radius: 8px; overflow-x: auto; border-left: 4px solid var(--accent-primary);"><code style="color: var(--text-primary); font-family: 'JetBrains Mono', monospace; font-size: 0.9rem;">// frameworks/av/media/libstagefright/MediaExtractor.cpp

sp&lt;MediaExtractor&gt; MediaExtractor::Create(
        const sp&lt;DataSource&gt; &source,
        const char *mime) {

    // MediaExtractorFactoryë¡œ ì ì ˆí•œ Extractor ì„ íƒ
    sp&lt;MediaExtractorFactory&gt; factory = new MediaExtractorFactory();
    return factory-&gt;CreateFromDataSource(source, mime);
}

status_t MediaExtractor::getTrackMetaData(
        sp&lt;MetaData&gt; &meta,
        size_t index,
        uint32_t flags) {

    // íŠ¸ë™ë³„ ë©”íƒ€ë°ì´í„° ë°˜í™˜
    meta = mImpl-&gt;getTrackMetaData(index, flags);
    return meta != NULL ? OK : UNKNOWN_ERROR;
}

status_t MediaExtractor::readSampleData(
        const sp&lt;ABuffer&gt; &buffer,
        size_t trackIndex,
        int64_t *sampleTimeUs) {

    // ì‹¤ì œ êµ¬í˜„ì€ ê° Parserì— ìœ„ì„
    return mTracks[trackIndex]-&gt;read(buffer, sampleTimeUs);
}</code></pre>

            <h4 style="color: var(--text-primary); font-size: 1.2rem; margin-top: 30px; margin-bottom: 15px;">
                2. MPEG4Extractor.cpp (MP4 Parser)
            </h4>

            <pre style="background: var(--bg-secondary); padding: 20px; border-radius: 8px; overflow-x: auto; border-left: 4px solid var(--accent-primary);"><code style="color: var(--text-primary); font-family: 'JetBrains Mono', monospace; font-size: 0.9rem;">// frameworks/av/media/extractors/mp4/MPEG4Extractor.cpp

status_t MPEG4Extractor::parseChunk(off64_t *offset) {
    uint32_t hdr[2];
    if (mDataSource-&gt;readAt(*offset, hdr, 8) &lt; 8) {
        return ERROR_IO;
    }

    uint64_t chunk_size = ntohl(hdr[0]);
    uint32_t chunk_type = ntohl(hdr[1]);

    // Box íƒ€ì…ë³„ ì²˜ë¦¬
    switch (chunk_type) {
        case FOURCC('m', 'o', 'o', 'v'):
            return parseMoov(*offset);  // Movie Box
        case FOURCC('m', 'd', 'a', 't'):
            return parseMdat(*offset);  // Media Data
        case FOURCC('t', 'r', 'a', 'k'):
            return parseTrak(*offset);  // Track
        // ...
    }

    *offset += chunk_size;
    return OK;
}

// Sample Table íŒŒì‹±
status_t MPEG4Extractor::Track::getSample(
        off64_t *offset,
        size_t *size,
        int64_t *timeUs) {

    // stts (Time-to-Sample)ì—ì„œ PTS ê³„ì‚°
    *timeUs = mSampleIterator-&gt;getSampleTime();

    // stsz (Sample Size)ì—ì„œ í¬ê¸° ê°€ì ¸ì˜¤ê¸°
    *size = mSampleIterator-&gt;getSampleSize();

    // stco (Chunk Offset)ì—ì„œ ìœ„ì¹˜ ê³„ì‚°
    *offset = mSampleIterator-&gt;getSampleOffset();

    return OK;
}</code></pre>

            <h4 style="color: var(--text-primary); font-size: 1.2rem; margin-top: 30px; margin-bottom: 15px;">
                3. MatroskaExtractor.cpp (MKV Parser)
            </h4>

            <pre style="background: var(--bg-secondary); padding: 20px; border-radius: 8px; overflow-x: auto; border-left: 4px solid var(--accent-primary);"><code style="color: var(--text-primary); font-family: 'JetBrains Mono', monospace; font-size: 0.9rem;">// frameworks/av/media/extractors/mkv/MatroskaExtractor.cpp

status_t MatroskaExtractor::readMetaData() {
    // libwebmìœ¼ë¡œ EBML íŒŒì‹±
    mkvparser::Segment *segment;
    long long pos = 0;

    long long ret = mkvparser::Segment::CreateInstance(
        mReader, pos, segment);

    if (ret) {
        return ERROR_MALFORMED;
    }

    // Tracks Element íŒŒì‹±
    const mkvparser::Tracks *tracks = segment-&gt;GetTracks();
    for (size_t i = 0; i &lt; tracks-&gt;GetTracksCount(); ++i) {
        const mkvparser::Track *track = tracks-&gt;GetTrackByIndex(i);
        addTrack(track);
    }

    return OK;
}

status_t MatroskaExtractor::MatroskaSource::readBlock() {
    const mkvparser::Block *block;
    int64_t timeUs;

    // Clusterì—ì„œ Block ì½ê¸°
    status_t err = mExtractor-&gt;advance();
    if (err != OK) return err;

    block = mExtractor-&gt;block();
    timeUs = mExtractor-&gt;blockTimeUs();

    // SimpleBlock ë˜ëŠ” BlockGroup ì²˜ë¦¬
    const mkvparser::Block::Frame &frame = block-&gt;GetFrame(0);
    *buffer = new ABuffer(frame.len);
    frame.Read(mExtractor-&gt;mReader, buffer-&gt;data());

    return OK;
}</code></pre>

            <div class="highlight-box" style="margin-top: 30px;">
                <strong>ğŸ”— AOSP ì†ŒìŠ¤ ì½”ë“œ íƒìƒ‰ ë§í¬:</strong>
                <ul style="margin-top: 10px; padding-left: 20px;">
                    <li><a href="https://cs.android.com/android/platform/superproject/+/master:frameworks/av/media/libstagefright/" target="_blank" style="color: var(--accent-primary);">libstagefright (Core)</a></li>
                    <li><a href="https://cs.android.com/android/platform/superproject/+/master:frameworks/av/media/extractors/" target="_blank" style="color: var(--accent-primary);">Extractor Plugins</a></li>
                    <li><a href="https://cs.android.com/android/platform/superproject/+/master:frameworks/base/media/java/android/media/MediaExtractor.java" target="_blank" style="color: var(--accent-primary);">MediaExtractor.java (Framework)</a></li>
                    <li><a href="https://cs.android.com/android/platform/superproject/+/master:frameworks/av/media/ndk/" target="_blank" style="color: var(--accent-primary);">Media NDK</a></li>
                </ul>
            </div>
        </section>

        <!-- Section 13: Best Practices -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">13</span>
                Best Practices
            </h2>
            <p class="section-description">
                MediaExtractorë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ê¶Œì¥ì‚¬í•­ê³¼ ì£¼ì˜ì‚¬í•­ì…ë‹ˆë‹¤.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âœ…</span>
                        ê¶Œì¥ ì‚¬í•­
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>íŠ¸ë™ ì„ íƒ</strong>: í•„ìš”í•œ íŠ¸ë™ë§Œ ì„ íƒí•˜ì—¬ ì„±ëŠ¥ í–¥ìƒ</li>
                            <li><strong>ë²„í¼ ì¬ì‚¬ìš©</strong>: ByteBufferë¥¼ ì¬ì‚¬ìš©í•˜ì—¬ GC ë¶€ë‹´ ê°ì†Œ</li>
                            <li><strong>ë¹„ë™ê¸° ì²˜ë¦¬</strong>: Worker Threadì—ì„œ ìƒ˜í”Œ ì½ê¸°</li>
                            <li><strong>ë¦¬ì†ŒìŠ¤ í•´ì œ</strong>: ì‚¬ìš© í›„ ë°˜ë“œì‹œ <code>release()</code> í˜¸ì¶œ</li>
                            <li><strong>ì—ëŸ¬ ì²˜ë¦¬</strong>: <code>readSampleData()</code> ë°˜í™˜ê°’ í™•ì¸</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âŒ</span>
                        í”¼í•´ì•¼ í•  ì‚¬í•­
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>UI Thread ë¸”ë¡œí‚¹</strong>: ë©”ì¸ ìŠ¤ë ˆë“œì—ì„œ ìƒ˜í”Œ ì½ê¸° ê¸ˆì§€</li>
                            <li><strong>ê³¼ë„í•œ Seek</strong>: ë¹ˆë²ˆí•œ SeekëŠ” ì„±ëŠ¥ ì €í•˜</li>
                            <li><strong>ë²„í¼ í¬ê¸° ë¶€ì¡±</strong>: ìƒ˜í”Œ í¬ê¸°ë³´ë‹¤ ì‘ì€ ë²„í¼ ì‚¬ìš©</li>
                            <li><strong>íŠ¸ë™ ë¯¸ì„ íƒ</strong>: selectTrack() í˜¸ì¶œ ì—†ì´ ì½ê¸° ì‹œë„</li>
                            <li><strong>ë¦¬ì†ŒìŠ¤ ëˆ„ìˆ˜</strong>: release() ë¯¸í˜¸ì¶œ</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ¯</span>
                        ì„±ëŠ¥ ìµœì í™”
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>Direct ByteBuffer</strong>: allocateDirect() ì‚¬ìš©</li>
                            <li><strong>Batch Processing</strong>: ì—¬ëŸ¬ ìƒ˜í”Œ í•œ ë²ˆì— ì²˜ë¦¬</li>
                            <li><strong>ìºì‹±</strong>: MediaFormat ì •ë³´ ìºì‹±</li>
                            <li><strong>Prefetch</strong>: ë‹¤ìŒ ìƒ˜í”Œ ë¯¸ë¦¬ ì½ê¸°</li>
                            <li><strong>Pool</strong>: ByteBuffer Pool ì‚¬ìš©</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”</span>
                        ë””ë²„ê¹… íŒ
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>MediaFormat í™•ì¸</strong>: MIME íƒ€ì… ë° ì½”ë± ì •ë³´</li>
                            <li><strong>Timestamp ê²€ì¦</strong>: PTS ìˆœì„œ ë° ê°„ê²© í™•ì¸</li>
                            <li><strong>í”Œë˜ê·¸ í™•ì¸</strong>: Keyframe ìœ„ì¹˜ íŒŒì•…</li>
                            <li><strong>ë¡œê¹…</strong>: ìƒ˜í”Œ í¬ê¸° ë° ì½ê¸° ì†ë„ ëª¨ë‹ˆí„°ë§</li>
                            <li><strong>ExoPlayer</strong>: ë³µì¡í•œ ê²½ìš° ExoPlayer ì‚¬ìš© ê³ ë ¤</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="warning-box">
                <strong>âš ï¸ ì¤‘ìš” ì°¸ê³ ì‚¬í•­:</strong>
                <ul style="margin-top: 10px; padding-left: 20px;">
                    <li>MediaExtractorëŠ” ì¸ì½”ë”©ëœ ë°ì´í„°ë§Œ ì œê³µ - ë””ì½”ë”©ì€ MediaCodec í•„ìš”</li>
                    <li>ëª¨ë“  ì»¨í…Œì´ë„ˆ í¬ë§·ì´ ì§€ì›ë˜ëŠ” ê²ƒì€ ì•„ë‹˜ - ì‚¬ì „ í™•ì¸ í•„ìš”</li>
                    <li>DRM ì½˜í…ì¸ ëŠ” MediaDrmê³¼ í•¨ê»˜ ì‚¬ìš©í•´ì•¼ í•¨</li>
                    <li>ë„¤íŠ¸ì›Œí¬ ìŠ¤íŠ¸ë¦¼ì€ ë²„í¼ë§ ê³ ë ¤ í•„ìš”</li>
                </ul>
            </div>
        </section>

        <!-- Section 14: Related Documentation -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">14</span>
                ê´€ë ¨ ìƒì„¸ ë¬¸ì„œ
            </h2>
            <p class="section-description">
                MediaExtractorì™€ ê´€ë ¨ëœ ë‹¤ë¥¸ ìƒì„¸ ë¬¸ì„œ í˜ì´ì§€ë¡œ ì´ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ—ï¸</span>
                        Media Framework Core
                    </h3>
                    <div class="card-description">
                        <p>Android ë¯¸ë””ì–´ í”„ë ˆì„ì›Œí¬ì˜ ì „ì²´ ì•„í‚¤í…ì²˜ì™€ ê³„ì¸µ êµ¬ì¡°ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.</p>
                        <ul style="margin-top: 10px;">
                            <li>Framework â†’ Native ê³„ì¸µ ìƒí˜¸ì‘ìš©</li>
                            <li>MediaPlayer, MediaRecorder API</li>
                            <li>Binder IPC í†µì‹ </li>
                        </ul>
                        <a href="media-framework-core.html" style="display: inline-block; margin-top: 15px; padding: 8px 16px; background: var(--accent-primary); color: white; text-decoration: none; border-radius: 6px; font-size: 0.9rem;">
                            ìƒì„¸ ë³´ê¸° â†’
                        </a>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ¬</span>
                        Codec 2.0 & HAL
                    </h3>
                    <div class="card-description">
                        <p>MediaCodecê³¼ Codec 2.0 ì•„í‚¤í…ì²˜, HAL ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì„¸íˆ ë‹¤ë£¹ë‹ˆë‹¤.</p>
                        <ul style="margin-top: 10px;">
                            <li>MediaCodec API ì‚¬ìš©ë²•</li>
                            <li>C2Component êµ¬ì¡°</li>
                            <li>Vendor Codec êµ¬í˜„</li>
                        </ul>
                        <a href="codec2.html" style="display: inline-block; margin-top: 15px; padding: 8px 16px; background: var(--accent-primary); color: white; text-decoration: none; border-radius: 6px; font-size: 0.9rem;">
                            ìƒì„¸ ë³´ê¸° â†’
                        </a>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ¥</span>
                        Media Playback Pipeline
                    </h3>
                    <div class="card-description">
                        <p>ë¯¸ë””ì–´ ì¬ìƒ íŒŒì´í”„ë¼ì¸, NuPlayer, ë²„í¼ ê´€ë¦¬, A/V ë™ê¸°í™”ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.</p>
                        <ul style="margin-top: 10px;">
                            <li>NuPlayer ì•„í‚¤í…ì²˜</li>
                            <li>ë²„í¼ ê´€ë¦¬ ë° Zero-Copy</li>
                            <li>PTS ê¸°ë°˜ A/V Sync</li>
                        </ul>
                        <a href="media-playback.html" style="display: inline-block; margin-top: 15px; padding: 8px 16px; background: var(--accent-primary); color: white; text-decoration: none; border-radius: 6px; font-size: 0.9rem;">
                            ìƒì„¸ ë³´ê¸° â†’
                        </a>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”Š</span>
                        Audio Framework
                    </h3>
                    <div class="card-description">
                        <p>AudioFlinger, AudioPolicyService, HALì„ í¬í•¨í•œ ì˜¤ë””ì˜¤ ìŠ¤íƒì„ ë‹¤ë£¹ë‹ˆë‹¤.</p>
                        <ul style="margin-top: 10px;">
                            <li>AudioTrack/AudioRecord API</li>
                            <li>AudioFlinger ë¯¹ì‹± íŒŒì´í”„ë¼ì¸</li>
                            <li>ì˜¤ë””ì˜¤ ë¼ìš°íŒ… ì •ì±…</li>
                        </ul>
                        <a href="audio-framework.html" style="display: inline-block; margin-top: 15px; padding: 8px 16px; background: var(--accent-primary); color: white; text-decoration: none; border-radius: 6px; font-size: 0.9rem;">
                            ìƒì„¸ ë³´ê¸° â†’
                        </a>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“</span>
                        MediaProvider
                    </h3>
                    <div class="card-description">
                        <p>ë¯¸ë””ì–´ ìŠ¤í† ë¦¬ì§€ ì ‘ê·¼, Scoped Storage, FUSEë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.</p>
                        <ul style="margin-top: 10px;">
                            <li>MediaStore API</li>
                            <li>Scoped Storage ë©”ì»¤ë‹ˆì¦˜</li>
                            <li>FUSE Passthrough</li>
                        </ul>
                        <a href="mediaprovider.html" style="display: inline-block; margin-top: 15px; padding: 8px 16px; background: var(--accent-primary); color: white; text-decoration: none; border-radius: 6px; font-size: 0.9rem;">
                            ìƒì„¸ ë³´ê¸° â†’
                        </a>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”</span>
                        Widevine DRM
                    </h3>
                    <div class="card-description">
                        <p>Widevine DRM ì•„í‚¤í…ì²˜, ë³´ì•ˆ ë ˆë²¨, ë¼ì´ì„ ìŠ¤ ê´€ë¦¬ë¥¼ ë‹¤ë£¹ë‹ˆë‹¤.</p>
                        <ul style="margin-top: 10px;">
                            <li>L1/L2/L3 ë³´ì•ˆ ë ˆë²¨</li>
                            <li>MediaDrm API ì‚¬ìš©</li>
                            <li>Provisioning & ë¼ì´ì„ ìŠ¤</li>
                        </ul>
                        <a href="widevine.html" style="display: inline-block; margin-top: 15px; padding: 8px 16px; background: var(--accent-primary); color: white; text-decoration: none; border-radius: 6px; font-size: 0.9rem;">
                            ìƒì„¸ ë³´ê¸° â†’
                        </a>
                    </div>
                </div>
            </div>

            <div class="highlight-box" style="margin-top: 40px;">
                <h3 style="color: var(--accent-primary); font-size: 1.2rem; margin-bottom: 15px;">
                    ğŸ“š ì¶”ê°€ í•™ìŠµ ë¦¬ì†ŒìŠ¤
                </h3>
                <ul style="padding-left: 20px;">
                    <li><strong>AOSP ê³µì‹ ë¬¸ì„œ</strong>: <a href="https://source.android.com/docs/core/media" target="_blank" style="color: var(--accent-primary);">source.android.com/docs/core/media</a></li>
                    <li><strong>Android Developer ê°€ì´ë“œ</strong>: <a href="https://developer.android.com/guide/topics/media" target="_blank" style="color: var(--accent-primary);">developer.android.com/guide/topics/media</a></li>
                    <li><strong>ExoPlayer ë¬¸ì„œ</strong>: <a href="https://exoplayer.dev/" target="_blank" style="color: var(--accent-primary);">exoplayer.dev</a></li>
                    <li><strong>Media3 ë¼ì´ë¸ŒëŸ¬ë¦¬</strong>: <a href="https://developer.android.com/jetpack/androidx/releases/media3" target="_blank" style="color: var(--accent-primary);">androidx.media3</a></li>
                </ul>
            </div>
        </section>

        <!-- Footer -->
        <footer
            style="text-align: center; padding: 40px 20px; color: var(--text-muted); border-top: 1px solid var(--border-color); margin-top: 60px;">
            <p>MediaExtractor & Parser Architecture</p>
            <p style="margin-top: 10px; font-size: 0.9rem;">
                Container Parsing & Demuxing Framework
            </p>
            <p style="margin-top: 20px;">
                <a href="index.html" style="color: var(--accent-primary); text-decoration: none;">
                    â† AOSP Media Frameworkë¡œ ëŒì•„ê°€ê¸°
                </a>
            </p>
        </footer>
    </div>

    <script src="scripts/mermaid-theme.js"></script>
    <script>
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        document.querySelectorAll('.section').forEach(section => {
            section.style.opacity = '0';
            section.style.transform = 'translateY(30px)';
            section.style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
            observer.observe(section);
        });
    </script>
    <!-- Navigation & Copy Features -->
    <script src="scripts/copy-code.js"></script>
    <script src="scripts/toc-generator.js"></script>
    <script src="scripts/page-navigation.js"></script>
    <!-- Interactive Diagram Features -->
    <script src="scripts/diagram-data.js"></script>
    <script src="scripts/diagram-interactive.js"></script>

    <script src="scripts/theme-toggle.js?v=2"></script>
    <script src="scripts/lang-switch.js"></script>
</body>

</html>