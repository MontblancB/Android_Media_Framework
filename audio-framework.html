<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Android Audio Framework</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@300;400;600;700;900&family=IBM+Plex+Mono:wght@400;500;600&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/design-system.css">

        <style>
        /* Page-specific styles loaded from design-system.css */
    </style>
</head>

<body>
    <nav class="nav">
        <a href="index.html" class="nav-button">
            â† AOSP Media Framework
        </a>
    </nav>

    <div class="container">
        <header>
            <h1 class="page-title">ğŸµ Audio Framework</h1>
            <p class="page-subtitle">Android ì˜¤ë””ì˜¤ ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸ ë° í•µì‹¬ ì»´í¬ë„ŒíŠ¸</p>
        </header>

        <!-- Section 1: Audio Framework Overview -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">1</span>
                Audio Framework ê°œìš”
            </h2>
            <p class="section-description">
                Android Audio FrameworkëŠ” ëª¨ë“  ì˜¤ë””ì˜¤ ê¸°ëŠ¥ì„ ê´€ë¦¬í•˜ëŠ” í•µì‹¬ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.
            </p>

            <div class="highlight-box">
                <strong>Audio Frameworkë€?</strong> ì• í”Œë¦¬ì¼€ì´ì…˜ë¶€í„° í•˜ë“œì›¨ì–´ê¹Œì§€ ì˜¤ë””ì˜¤ ì¬ìƒ, ë…¹ìŒ, ë¯¹ì‹±, ë¼ìš°íŒ…ì„ ë‹´ë‹¹í•˜ëŠ”
                ì™„ì „í•œ ì˜¤ë””ì˜¤ ì²˜ë¦¬ ìŠ¤íƒì…ë‹ˆë‹¤.
            </div>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ¯</span>
                        ì£¼ìš” ê¸°ëŠ¥
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li>ì˜¤ë””ì˜¤ ì¬ìƒ ë° ë…¹ìŒ</li>
                            <li>ë‹¤ì¤‘ ìŠ¤íŠ¸ë¦¼ ë¯¹ì‹±</li>
                            <li>ì˜¤ë””ì˜¤ ë¼ìš°íŒ… ë° í¬ì»¤ìŠ¤ ê´€ë¦¬</li>
                            <li>ë³¼ë¥¨ ì œì–´ ë° ìŒí–¥ íš¨ê³¼</li>
                            <li>ì €ì§€ì—° ì˜¤ë””ì˜¤ ì²˜ë¦¬</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ—ï¸</span>
                        í•µì‹¬ ì»´í¬ë„ŒíŠ¸
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><code>AudioFlinger</code>: ì˜¤ë””ì˜¤ ë¯¹ì‹± ì—”ì§„</li>
                            <li><code>AudioPolicyService</code>: ë¼ìš°íŒ… ì •ì±…</li>
                            <li><code>Audio HAL</code>: í•˜ë“œì›¨ì–´ ì¶”ìƒí™”</li>
                            <li><code>AudioTrack/AudioRecord</code>: API</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âš¡</span>
                        ì²˜ë¦¬ íŠ¹ì„±
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li>ì‹¤ì‹œê°„ ì €ì§€ì—° ì²˜ë¦¬</li>
                            <li>32-bit ë¶€ë™ì†Œìˆ˜ì  ë¯¹ì‹±</li>
                            <li>ë©€í‹°ìŠ¤ë ˆë“œ ì•„í‚¤í…ì²˜</li>
                            <li>IPC ê¸°ë°˜ í†µì‹  (Binder)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 2: Core Audio Architecture -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">2</span>
                Audio Framework ì „ì²´ ì•„í‚¤í…ì²˜
            </h2>
            <p class="section-description">
                ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆì´ì–´ë¶€í„° í•˜ë“œì›¨ì–´ê¹Œì§€ 5ê°œì˜ ì£¼ìš” ë ˆì´ì–´ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.
            </p>

            <div class="mermaid-container">
                <div class="mermaid">
                    graph TB
                    APP["ğŸ“± Application Layer<br /><br />AudioTrack, AudioRecord<br />MediaPlayer, AAudio API"]

                    FW["ğŸ”§ Framework Layer<br /><br />AudioManager<br />AudioService"]

                    NATIVE["âš¡ Native Layer<br /><br />AudioFlinger (Mixing Engine)<br />AudioPolicyService (Routing &
                    Policy)"]

                    HAL["ğŸ”Œ Audio HAL<br /><br />IDeviceFactory, IDevice<br />IStreamOut, IStreamIn<br />(HIDL/AIDL
                    Interface)"]

                    KERNEL["ğŸ§ Linux Kernel<br /><br />ALSA Drivers<br />Audio Hardware Drivers"]

                    APP --> FW
                    FW --> NATIVE
                    NATIVE --> HAL
                    HAL --> KERNEL

                    style APP fill:#1a1f35,stroke:#ec4899,stroke-width:3px,color:#e5e7eb
                    style FW fill:#1a1f35,stroke:#f472b6,stroke-width:3px,color:#e5e7eb
                    style NATIVE fill:#1a1f35,stroke:#c084fc,stroke-width:3px,color:#e5e7eb
                    style HAL fill:#1a1f35,stroke:#7c3aed,stroke-width:2px,color:#e5e7eb
                    style KERNEL fill:#1a1f35,stroke:#6b7280,stroke-width:2px,color:#e5e7eb
                </div>
            </div>
        </section>

        <!-- Section 3: AudioFlinger -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">3</span>
                AudioFlinger - ì˜¤ë””ì˜¤ ë¯¹ì‹± ì—”ì§„
            </h2>
            <p class="section-description">
                AudioFlingerëŠ” Android ì˜¤ë””ì˜¤ ì‹œìŠ¤í…œì˜ í•µì‹¬ìœ¼ë¡œ, ëª¨ë“  ì˜¤ë””ì˜¤ ìŠ¤íŠ¸ë¦¼ì„ ë¯¹ì‹±í•˜ê³  ì²˜ë¦¬í•©ë‹ˆë‹¤.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ›ï¸</span>
                        ì£¼ìš” ì—­í• 
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>ì˜¤ë””ì˜¤ ë¯¹ì‹±</strong>: ë‹¤ì¤‘ ìŠ¤íŠ¸ë¦¼ì„ í•˜ë‚˜ë¡œ í•©ì„±</li>
                            <li><strong>ìŠ¤ë ˆë“œ ê´€ë¦¬</strong>: PlaybackThread, RecordThread</li>
                            <li><strong>íš¨ê³¼ ì²˜ë¦¬</strong>: ì´í€„ë¼ì´ì €, ë¦¬ë²„ë¸Œ ë“±</li>
                            <li><strong>HAL í†µì‹ </strong>: í•˜ë“œì›¨ì–´ ì œì–´</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”„</span>
                        ìŠ¤ë ˆë“œ ì•„í‚¤í…ì²˜
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><code>PlaybackThread</code>: ì¬ìƒ ì²˜ë¦¬</li>
                            <li><code>MixerThread</code>: ë¯¹ì‹± ìˆ˜í–‰</li>
                            <li><code>RecordThread</code>: ë…¹ìŒ ì²˜ë¦¬</li>
                            <li><code>OffloadThread</code>: í•˜ë“œì›¨ì–´ ì˜¤í”„ë¡œë“œ</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸšï¸</span>
                        ë¯¹ì‹± íŠ¹ì„±
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li>32-bit float ë¯¹ì‹± (Android 9+)</li>
                            <li>ìƒ˜í”Œë ˆì´íŠ¸ ë¦¬ìƒ˜í”Œë§</li>
                            <li>ì±„ë„ ë¯¹ì‹± (ëª¨ë…¸/ìŠ¤í…Œë ˆì˜¤)</li>
                            <li>ë³¼ë¥¨ ì œì–´ ë° í˜ì´ë“œ</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="mermaid-container">
                <div class="mermaid">
                    graph LR
                    subgraph AudioFlinger
                    AT1[AudioTrack 1]
                    AT2[AudioTrack 2]
                    AT3[AudioTrack 3]

                    MIXER[MixerThread<br />32-bit Float Mixing]

                    EFFECTS[Audio Effects<br />EQ, Reverb, etc.]

                    AT1 --> MIXER
                    AT2 --> MIXER
                    AT3 --> MIXER
                    MIXER --> EFFECTS
                    end

                    EFFECTS --> HAL_OUT[Audio HAL<br />IStreamOut]
                    HAL_OUT --> HW[Hardware<br />Speaker/DAC]

                    style AT1 fill:#1a1f35,stroke:#ec4899,stroke-width:2px,color:#e5e7eb
                    style AT2 fill:#1a1f35,stroke:#ec4899,stroke-width:2px,color:#e5e7eb
                    style AT3 fill:#1a1f35,stroke:#ec4899,stroke-width:2px,color:#e5e7eb
                    style MIXER fill:#1a1f35,stroke:#c084fc,stroke-width:3px,color:#e5e7eb
                    style EFFECTS fill:#1a1f35,stroke:#7c3aed,stroke-width:2px,color:#e5e7eb
                    style HAL_OUT fill:#1a1f35,stroke:#f472b6,stroke-width:2px,color:#e5e7eb
                    style HW fill:#1a1f35,stroke:#6b7280,stroke-width:2px,color:#e5e7eb
                </div>
            </div>
        </section>

        <!-- Section 4: AudioPolicyService -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">4</span>
                AudioPolicyService - ë¼ìš°íŒ… ë° ì •ì±…
            </h2>
            <p class="section-description">
                AudioPolicyServiceëŠ” ì˜¤ë””ì˜¤ ë¼ìš°íŒ…, ë³¼ë¥¨, ë””ë°”ì´ìŠ¤ ê´€ë¦¬ë¥¼ ê²°ì •í•˜ëŠ” ì •ì±… ê´€ë¦¬ìì…ë‹ˆë‹¤.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ¯</span>
                        ì •ì±… ê²°ì •
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>ë¼ìš°íŒ…</strong>: ì–´ëŠ ë””ë°”ì´ìŠ¤ë¡œ ì¶œë ¥í• ì§€</li>
                            <li><strong>ë³¼ë¥¨</strong>: ìŠ¤íŠ¸ë¦¼ë³„ ë³¼ë¥¨ ìˆ˜ì¤€</li>
                            <li><strong>ìŠ¤íŠ¸ë¦¼ íƒ€ì…</strong>: MUSIC, VOICE_CALL ë“±</li>
                            <li><strong>ìš°ì„ ìˆœìœ„</strong>: í¬ì»¤ìŠ¤ ê¸°ë°˜ ìš°ì„ ìˆœìœ„</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”Œ</span>
                        ë””ë°”ì´ìŠ¤ ê´€ë¦¬
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li>ì—°ê²°ëœ ì˜¤ë””ì˜¤ ë””ë°”ì´ìŠ¤ ì¶”ì </li>
                            <li>í—¤ë“œí°/ë¸”ë£¨íˆ¬ìŠ¤ ê°ì§€</li>
                            <li>ìë™ ë¼ìš°íŒ… ì „í™˜</li>
                            <li>ë©€í‹° ë””ë°”ì´ìŠ¤ ì¶œë ¥ (Android 12+)</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ¤</span>
                        AudioFlinger í˜‘ì—…
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>ì •ì±… ê²°ì •ì</strong>: AudioPolicyService</li>
                            <li><strong>ì •ì±… ì‹¤í–‰ì</strong>: AudioFlinger</li>
                            <li>ëŠìŠ¨í•œ ê²°í•©ìœ¼ë¡œ ë…ë¦½ì  í™•ì¥</li>
                            <li>Binder IPCë¡œ í†µì‹ </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="mermaid-container">
                <div class="mermaid">
                    graph TB
                    APP[Application<br />AudioManager]

                    APS[AudioPolicyService<br />Policy Maker]

                    AF[AudioFlinger<br />Policy Executor]

                    subgraph Decision["Policy Decisions"]
                    ROUTE[Routing<br />Speaker vs Headphone]
                    VOL[Volume Control<br />Per Stream Type]
                    DEV[Device Selection<br />Bluetooth, USB, etc.]
                    end

                    HAL[Audio HAL]

                    APP --> APS
                    APS --> ROUTE
                    APS --> VOL
                    APS --> DEV
                    ROUTE --> AF
                    VOL --> AF
                    DEV --> AF
                    AF --> HAL

                    style APP fill:#1a1f35,stroke:#ec4899,stroke-width:2px,color:#e5e7eb
                    style APS fill:#1a1f35,stroke:#c084fc,stroke-width:3px,color:#e5e7eb
                    style AF fill:#1a1f35,stroke:#7c3aed,stroke-width:3px,color:#e5e7eb
                    style Decision fill:#0a0e1a,stroke:#f472b6,stroke-width:2px
                    style HAL fill:#1a1f35,stroke:#6b7280,stroke-width:2px,color:#e5e7eb
                </div>
            </div>
        </section>

        <!-- Section 5: Audio Pipeline Flows -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">5</span>
                ì˜¤ë””ì˜¤ íŒŒì´í”„ë¼ì¸ í”Œë¡œìš°
            </h2>
            <p class="section-description">
                ì¬ìƒê³¼ ë…¹ìŒ ì‹œ ë°ì´í„°ê°€ íë¥´ëŠ” ì „ì²´ ê²½ë¡œë¥¼ ì‹œê°í™”í•©ë‹ˆë‹¤.
            </p>

            <h3 style="color: var(--accent-primary); margin: 30px 0 20px 0; font-size: 1.5rem;">ğŸ“¤ ì¬ìƒ íŒŒì´í”„ë¼ì¸ (Playback)
            </h3>
            <div class="mermaid-container">
                <div class="mermaid">
                    graph LR
                    APP[Application<br />MediaPlayer/AAudio]
                    AT[AudioTrack API]
                    BINDER1[Binder IPC]
                    AF[AudioFlinger<br />Mixer Thread]
                    HAL[Audio HAL<br />IStreamOut]
                    ALSA[ALSA Driver]
                    HW[Speaker/DAC]

                    APP --> AT
                    AT --> BINDER1
                    BINDER1 --> AF
                    AF --> HAL
                    HAL --> ALSA
                    ALSA --> HW

                    style APP fill:#1a1f35,stroke:#ec4899,stroke-width:3px,color:#e5e7eb
                    style AT fill:#1a1f35,stroke:#f472b6,stroke-width:2px,color:#e5e7eb
                    style BINDER1 fill:#1a1f35,stroke:#c084fc,stroke-width:2px,color:#e5e7eb
                    style AF fill:#1a1f35,stroke:#7c3aed,stroke-width:3px,color:#e5e7eb
                    style HAL fill:#1a1f35,stroke:#6b7280,stroke-width:2px,color:#e5e7eb
                    style ALSA fill:#1a1f35,stroke:#6b7280,stroke-width:2px,color:#e5e7eb
                    style HW fill:#1a1f35,stroke:#10b981,stroke-width:2px,color:#e5e7eb
                </div>
            </div>

            <h3 style="color: var(--accent-primary); margin: 30px 0 20px 0; font-size: 1.5rem;">ğŸ“¥ ë…¹ìŒ íŒŒì´í”„ë¼ì¸ (Capture)
            </h3>
            <div class="mermaid-container">
                <div class="mermaid">
                    graph RL
                    HW[Microphone]
                    ALSA[ALSA Driver]
                    HAL[Audio HAL<br />IStreamIn]
                    AF[AudioFlinger<br />Record Thread]
                    BINDER2[Binder IPC]
                    AR[AudioRecord API]
                    APP[Application<br />MediaRecorder]

                    HW --> ALSA
                    ALSA --> HAL
                    HAL --> AF
                    AF --> BINDER2
                    BINDER2 --> AR
                    AR --> APP

                    style HW fill:#1a1f35,stroke:#10b981,stroke-width:2px,color:#e5e7eb
                    style ALSA fill:#1a1f35,stroke:#6b7280,stroke-width:2px,color:#e5e7eb
                    style HAL fill:#1a1f35,stroke:#6b7280,stroke-width:2px,color:#e5e7eb
                    style AF fill:#1a1f35,stroke:#7c3aed,stroke-width:3px,color:#e5e7eb
                    style BINDER2 fill:#1a1f35,stroke:#c084fc,stroke-width:2px,color:#e5e7eb
                    style AR fill:#1a1f35,stroke:#f472b6,stroke-width:2px,color:#e5e7eb
                    style APP fill:#1a1f35,stroke:#ec4899,stroke-width:3px,color:#e5e7eb
                </div>
            </div>
        </section>

        <!-- Section 6: Audio HAL Interface -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">6</span>
                Audio HAL ì¸í„°í˜ì´ìŠ¤
            </h2>
            <p class="section-description">
                Audio Hardware Abstraction LayerëŠ” í”„ë ˆì„ì›Œí¬ì™€ í•˜ë“œì›¨ì–´ ë“œë¼ì´ë²„ ì‚¬ì´ì˜ í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ì…ë‹ˆë‹¤.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”Œ</span>
                        HAL ë²„ì „
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>HIDL</strong>: Android 13 ì´ì „</li>
                            <li><strong>AIDL</strong>: Android 14+ (ìµœì‹ )</li>
                            <li>.hal íŒŒì¼ ë° XSD ìŠ¤í‚¤ë§ˆ</li>
                            <li>Binder RPC ê¸°ë°˜ í†µì‹ </li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“</span>
                        í•µì‹¬ ì¸í„°í˜ì´ìŠ¤
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><code>IDeviceFactory</code>: HAL ì§„ì…ì </li>
                            <li><code>IDevice / IPrimaryDevice</code>: ë””ë°”ì´ìŠ¤ ì œì–´</li>
                            <li><code>IStreamOut</code>: ì¬ìƒ ìŠ¤íŠ¸ë¦¼</li>
                            <li><code>IStreamIn</code>: ë…¹ìŒ ìŠ¤íŠ¸ë¦¼</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âš™ï¸</span>
                        HAL êµ¬ì„±
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>Core HAL</strong>: ì¬ìƒ ë° ë¼ìš°íŒ…</li>
                            <li><strong>Effects HAL</strong>: ì˜¤ë””ì˜¤ íš¨ê³¼</li>
                            <li><strong>Common HAL</strong>: ê³µìœ  ë°ì´í„° íƒ€ì…</li>
                            <li>XML ì„¤ì • íŒŒì¼ (audio_policy.conf)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 7: Audio Focus Management -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">7</span>
                Audio Focus ê´€ë¦¬
            </h2>
            <p class="section-description">
                ì—¬ëŸ¬ ì•±ì´ ë™ì‹œì— ì˜¤ë””ì˜¤ë¥¼ ì¬ìƒí•  ë•Œ ì¶©ëŒì„ ë°©ì§€í•˜ëŠ” í˜‘ì—… ë©”ì»¤ë‹ˆì¦˜ì…ë‹ˆë‹¤.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ¯</span>
                        Focus ìƒíƒœ
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><code>AUDIOFOCUS_GAIN</code>: í¬ì»¤ìŠ¤ íšë“, ì¬ìƒ ì‹œì‘/ì¬ê°œ</li>
                            <li><code>AUDIOFOCUS_LOSS</code>: í¬ì»¤ìŠ¤ ì˜êµ¬ ì†ì‹¤, ì •ì§€</li>
                            <li><code>AUDIOFOCUS_LOSS_TRANSIENT</code>: ì¼ì‹œ ì†ì‹¤, ì¼ì‹œì •ì§€</li>
                            <li><code>AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK</code>: ë³¼ë¥¨ ê°ì†Œ</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”„</span>
                        Focus í”Œë¡œìš°
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li>ì•±ì´ <code>requestAudioFocus()</code> í˜¸ì¶œ</li>
                            <li>AudioManagerê°€ ìš”ì²­ í‰ê°€</li>
                            <li>ê¸°ì¡´ í¬ì»¤ìŠ¤ ì†Œìœ ìì—ê²Œ í†µì§€</li>
                            <li>ìƒˆ ì•±ì—ê²Œ í¬ì»¤ìŠ¤ ë¶€ì—¬</li>
                            <li><code>abandonAudioFocus()</code>ë¡œ í•´ì œ</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âš¡</span>
                        ìë™ Fade (Android 12+)
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li>ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ í˜ì´ë“œ ì•„ì›ƒ</li>
                            <li>ë¶€ë“œëŸ¬ìš´ ì˜¤ë””ì˜¤ ì „í™˜</li>
                            <li>ì‚¬ìš©ì ê²½í—˜ ê°œì„ </li>
                            <li>ì•± ê°œë°œì ë¶€ë‹´ ê°ì†Œ</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="mermaid-container">
                <div class="mermaid">
                    sequenceDiagram
                    participant App1 as Music App
                    participant AM as AudioManager
                    participant App2 as Navigation App

                    App1->>AM: requestAudioFocus(GAIN)
                    AM-->>App1: AUDIOFOCUS_GAIN
                    Note over App1: ìŒì•… ì¬ìƒ ì¤‘

                    App2->>AM: requestAudioFocus(GAIN_TRANSIENT)
                    AM->>App1: onAudioFocusChange(LOSS_TRANSIENT)
                    Note over App1: ìŒì•… ì¼ì‹œì •ì§€
                    AM-->>App2: AUDIOFOCUS_GAIN
                    Note over App2: ë‚´ë¹„ê²Œì´ì…˜ ì•ˆë‚´

                    App2->>AM: abandonAudioFocus()
                    AM->>App1: onAudioFocusChange(GAIN)
                    Note over App1: ìŒì•… ì¬ê°œ
                </div>
            </div>
        </section>

        <!-- Section 8: Audio Routing -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">8</span>
                Audio Routing
            </h2>
            <p class="section-description">
                ì˜¤ë””ì˜¤ ìŠ¤íŠ¸ë¦¼ì„ ì ì ˆí•œ ì¶œë ¥ ë””ë°”ì´ìŠ¤ë¡œ ìë™ìœ¼ë¡œ ë¼ìš°íŒ…í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”€</span>
                        ë¼ìš°íŒ… ê²°ì • ìš”ì†Œ
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>ì—°ê²°ëœ ë””ë°”ì´ìŠ¤</strong>: í—¤ë“œí°, ë¸”ë£¨íˆ¬ìŠ¤, USB</li>
                            <li><strong>ìŠ¤íŠ¸ë¦¼ íƒ€ì…</strong>: MUSIC, VOICE_CALL, ALARM</li>
                            <li><strong>ì˜¤ë””ì˜¤ ëª¨ë“œ</strong>: NORMAL, RINGTONE, IN_CALL</li>
                            <li><strong>ì‚¬ìš©ì ì„¤ì •</strong>: ê¸°ë³¸ ì¶œë ¥ ì„ íƒ</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ§</span>
                        ì¶œë ¥ ë””ë°”ì´ìŠ¤
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>Earpiece</strong>: í†µí™”ìš© ìŠ¤í”¼ì»¤</li>
                            <li><strong>Speaker</strong>: ì¼ë°˜ ìŠ¤í”¼ì»¤</li>
                            <li><strong>Wired Headset</strong>: ìœ ì„  í—¤ë“œí°</li>
                            <li><strong>Bluetooth</strong>: ë¸”ë£¨íˆ¬ìŠ¤ ë””ë°”ì´ìŠ¤</li>
                            <li><strong>USB</strong>: USB DAC/í—¤ë“œí°</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸš—</span>
                        íŠ¹ìˆ˜ ë¼ìš°íŒ…
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>ë©€í‹° ë””ë°”ì´ìŠ¤</strong>: ë™ì‹œ ì¶œë ¥ (Android 12+)</li>
                            <li><strong>ì°¨ëŸ‰ ë©€í‹°ì¡´</strong>: êµ¬ì—­ë³„ ì˜¤ë””ì˜¤ (AAOS)</li>
                            <li><strong>ì˜¤ë””ì˜¤ ìº¡ì²˜</strong>: ì•±ê°„ ì˜¤ë””ì˜¤ ê³µìœ </li>
                            <li><strong>Bit-perfect</strong>: USB DAC ì§ì ‘ ì¶œë ¥</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="mermaid-container">
                <div class="mermaid">
                    graph TD
                    APP[Application]
                    AM[AudioManager<br />setAudioMode]
                    APS[AudioPolicyService]

                    subgraph Routing["Routing Decision"]
                    DEV_CHECK{Connected<br />Devices?}
                    STREAM_CHECK{Stream<br />Type?}
                    end

                    subgraph Devices["Output Devices"]
                    SPK[Speaker]
                    HP[Headphone]
                    BT[Bluetooth]
                    USB_DAC[USB DAC]
                    end

                    AF[AudioFlinger]

                    APP --> AM
                    AM --> APS
                    APS --> DEV_CHECK
                    DEV_CHECK --> STREAM_CHECK

                    STREAM_CHECK -->|Music| HP
                    STREAM_CHECK -->|Music| BT
                    STREAM_CHECK -->|Call| SPK
                    STREAM_CHECK -->|HiFi| USB_DAC

                    HP --> AF
                    BT --> AF
                    SPK --> AF
                    USB_DAC --> AF

                    style APP fill:#1a1f35,stroke:#ec4899,stroke-width:2px,color:#e5e7eb
                    style AM fill:#1a1f35,stroke:#f472b6,stroke-width:2px,color:#e5e7eb
                    style APS fill:#1a1f35,stroke:#c084fc,stroke-width:3px,color:#e5e7eb
                    style Routing fill:#0a0e1a,stroke:#7c3aed,stroke-width:2px
                    style Devices fill:#0a0e1a,stroke:#10b981,stroke-width:2px
                    style AF fill:#1a1f35,stroke:#6b7280,stroke-width:2px,color:#e5e7eb
                </div>
            </div>
        </section>

    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'dark',
            themeVariables: {
                primaryColor: '#1a1f35',
                primaryTextColor: '#e5e7eb',
                primaryBorderColor: '#ec4899',
                lineColor: '#f472b6',
                secondaryColor: '#111827',
                tertiaryColor: '#0a0e1a',
                background: '#1a1f35',
                mainBkg: '#1a1f35',
                secondBkg: '#111827',
                tertiaryBkg: '#0a0e1a',
                nodeBorder: '#ec4899',
                clusterBkg: '#0a0e1a',
                clusterBorder: '#ec4899',
                titleColor: '#e5e7eb',
                edgeLabelBackground: '#1a1f35',
                actorBorder: '#ec4899',
                actorBkg: '#1a1f35',
                actorTextColor: '#e5e7eb',
                actorLineColor: '#f472b6',
                signalColor: '#e5e7eb',
                signalTextColor: '#e5e7eb',
                labelBoxBkgColor: '#1a1f35',
                labelBoxBorderColor: '#ec4899',
                labelTextColor: '#e5e7eb',
                loopTextColor: '#e5e7eb',
                noteBorderColor: '#ec4899',
                noteBkgColor: '#111827',
                noteTextColor: '#e5e7eb',
                activationBorderColor: '#f472b6',
                activationBkgColor: '#1a1f35',
                sequenceNumberColor: '#e5e7eb'
            }
        });
    </script>
</body>

</html>