<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Android MediaProvider Architecture</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@300;400;600;700;900&family=IBM+Plex+Mono:wght@400;500;600&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/design-system.css">

        <style>
        /* Page-specific styles loaded from design-system.css */
    </style>
</head>

<body>
    <nav class="nav">
        <a href="index.html" class="nav-button">
            â† AOSP Media Framework
        </a>
    </nav>

    <div class="container">
        <header>
            <h1 class="page-title">ğŸ—„ï¸ MediaProvider</h1>
            <p class="page-subtitle">Android ë¯¸ë””ì–´ ë°ì´í„° ê´€ë¦¬ ë° Scoped Storage ì•„í‚¤í…ì²˜</p>
            <div style="margin-top: 30px;">
                <a href="media-playback.html"
                    style="display: inline-flex; align-items: center; gap: 10px; padding: 14px 28px; background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(167, 139, 250, 0.2)); border: 2px solid #8b5cf6; border-radius: 12px; color: #a78bfa; text-decoration: none; font-weight: 600; font-size: 1.1rem; transition: all 0.3s ease; position: relative; z-index: 2;">
                    ğŸ¬ ë¯¸ë””ì–´ ì¬ìƒ í”Œë¡œìš° â†’
                </a>
            </div>
        </header>

        <!-- Section 1: Overview -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">1</span>
                Overview: MediaProviderì˜ ì—­í• 
            </h2>
            <p class="section-description">
                MediaProviderëŠ” Android ì‹œìŠ¤í…œì—ì„œ ë¯¸ë””ì–´ íŒŒì¼ì˜ ë©”íƒ€ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ê³ , ì•±ì˜ íŒŒì¼ ì ‘ê·¼ì„ ì œì–´í•˜ëŠ” í•µì‹¬ ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“Š</span>
                        MediaStore ê´€ë¦¬
                    </h3>
                    <div class="card-description">
                        <p><strong>ë¯¸ë””ì–´ ë©”íƒ€ë°ì´í„° ì¸ë±ì‹±</strong></p>
                        <ul>
                            <li>Audio, Video, Images íŒŒì¼ì˜ ë©”íƒ€ë°ì´í„° ìµœì í™” ë° ì¸ë±ì‹±</li>
                            <li>ë‚´ë¶€/ì™¸ë¶€ ì €ì¥ì†Œ(SDì¹´ë“œ, USB) ìŠ¤ìº” ë° ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¶•</li>
                            <li><code>MediaStore</code> APIë¥¼ í†µí•œ ì•± ì ‘ê·¼ ì œê³µ</li>
                            <li>MIME íƒ€ì… ìë™ ê°ì§€ ë° ë¶„ë¥˜</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”’</span>
                        Scoped Storage ë³´ì•ˆ
                    </h3>
                    <div class="card-description">
                        <p><strong>ì•±ë³„ ê²©ë¦¬ëœ ì €ì¥ì†Œ</strong></p>
                        <ul>
                            <li>Android 10+ í•„ìˆ˜ ì ìš© (Scoped Storage)</li>
                            <li>ì•±ì€ ìì‹ ì˜ ë°ì´í„°ì—ë§Œ ì§ì ‘ ì ‘ê·¼ ê°€ëŠ¥</li>
                            <li>ë‹¤ë¥¸ ì•±ì˜ ë¯¸ë””ì–´ëŠ” <code>MediaStore</code>ë¥¼ í†µí•´ì„œë§Œ ì ‘ê·¼</li>
                            <li>ìœ„ì¹˜ ì •ë³´ ë“± ë¯¼ê° ë©”íƒ€ë°ì´í„° ìë™ ì‚­ì œ(Redaction)</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âš¡</span>
                        FUSE íŒŒì¼ ì‹œìŠ¤í…œ
                    </h3>
                    <div class="card-description">
                        <p><strong>User-space íŒŒì¼ í•¸ë“¤ë§</strong></p>
                        <ul>
                            <li>Android 11+ì—ì„œ FUSE Daemonìœ¼ë¡œ ë™ì‘</li>
                            <li>ì»¤ë„ íŒŒì¼ ì‘ì—…ì„ User-spaceì—ì„œ ê°€ë¡œì±„ê¸°</li>
                            <li>íŒŒì¼ ì ‘ê·¼ ì‹œ ì‹¤ì‹œê°„ ê¶Œí•œ ê²€ì‚¬ ë° í•„í„°ë§</li>
                            <li>FUSE Passthroughë¡œ ì„±ëŠ¥ ìµœì í™” (Android 12+)</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”„</span>
                        Mainline ëª¨ë“ˆ
                    </h3>
                    <div class="card-description">
                        <p><strong>ë…ë¦½ ì—…ë°ì´íŠ¸ ê°€ëŠ¥</strong></p>
                        <ul>
                            <li>APK-in-APEX í˜•íƒœë¡œ ë°°í¬ (Android 11+)</li>
                            <li>OS ì—…ë°ì´íŠ¸ ì—†ì´ ë³´ì•ˆ íŒ¨ì¹˜ ë° ê¸°ëŠ¥ ì¶”ê°€</li>
                            <li>ìƒˆë¡œìš´ ë¯¸ë””ì–´ í¬ë§· ì§€ì› ì‹ ì† ëŒ€ì‘</li>
                            <li>Google Playë¥¼ í†µí•œ ìë™ ì—…ë°ì´íŠ¸</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 2: Architecture -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">2</span>
                MediaProvider Architecture
            </h2>
            <p class="section-description">
                Applicationë¶€í„° File Systemê¹Œì§€ MediaProviderê°€ ê´€ì—¬í•˜ëŠ” ì „ì²´ ì•„í‚¤í…ì²˜ì…ë‹ˆë‹¤.
            </p>

            <div class="mermaid-container">
                <div class="mermaid">
                    graph TB
                    subgraph APP ["Application Layer"]
                    GALLERY["Gallery App"]
                    MUSIC["Music Player"]
                    CAMERA["Camera App"]
                    end

                    subgraph FRAMEWORK ["Android Framework"]
                    CR["ContentResolver"]
                    MS_API["MediaStore API<br />(Contract)"]
                    end

                    subgraph PROVIDER ["MediaProvider Module"]
                    MP["MediaProvider<br />(ContentProvider)"]
                    DB["SQLite Database<br />(Metadata)"]
                    SCANNER["Media Scanner"]
                    end

                    subgraph FUSE_LAYER ["FUSE Layer (Android 11+)"]
                    FD["FuseDaemon<br />(User-space Handler)"]
                    KERNEL_FUSE["FUSE Driver<br />(Kernel)"]
                    end

                    subgraph STORAGE ["File System"]
                    INT_STORAGE["Internal Storage"]
                    EXT_STORAGE["External Storage<br />(SD Card, USB)"]
                    end

                    APP --> CR
                    CR --> MS_API
                    MS_API --> MP
                    MP --> DB
                    MP --> SCANNER
                    MP <--> FD
                        FD <--> KERNEL_FUSE
                            KERNEL_FUSE <--> INT_STORAGE
                                KERNEL_FUSE <--> EXT_STORAGE
                                    SCANNER -.->|Scan Files| INT_STORAGE
                                    SCANNER -.->|Scan Files| EXT_STORAGE

                                    style MP fill:#1a1f35,stroke:#7c3aed,stroke-width:3px
                                    style FD fill:#1a1f35,stroke:#a78bfa,stroke-width:3px
                                    style DB fill:#111827,stroke:#7c3aed,stroke-width:2px
                                    style APP fill:#0a0e1a,stroke:#10b981,stroke-width:2px
                                    style STORAGE fill:#0a0e1a,stroke:#6b7280,stroke-width:2px
                </div>
            </div>

            <div class="highlight-box">
                <strong>í•µì‹¬ í¬ì¸íŠ¸:</strong>
                <ul>
                    <li><strong>ContentResolver</strong>: ì•±ì´ MediaProviderì™€ í†µì‹ í•˜ëŠ” ìœ ì¼í•œ ì¸í„°í˜ì´ìŠ¤</li>
                    <li><strong>MediaProvider</strong>: ContentProviderë¥¼ êµ¬í˜„í•˜ì—¬ CRUD ì‘ì—… ì²˜ë¦¬</li>
                    <li><strong>FuseDaemon</strong>: íŒŒì¼ ì‹œìŠ¤í…œ ì‘ì—…ì„ ê°€ë¡œì±„ ê¶Œí•œ ê²€ì‚¬ ìˆ˜í–‰</li>
                    <li><strong>SQLite DB</strong>: ë¯¸ë””ì–´ ë©”íƒ€ë°ì´í„°ë¥¼ ì €ì¥í•˜ì—¬ ë¹ ë¥¸ ì¿¼ë¦¬ ì§€ì›</li>
                </ul>
            </div>
        </section>

        <!-- Section 3: Data Flow -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">3</span>
                MediaStore Data Flow
            </h2>
            <p class="section-description">
                ì•±ì´ MediaStore APIë¥¼ í†µí•´ ë¯¸ë””ì–´ ë°ì´í„°ë¥¼ ì¿¼ë¦¬í•˜ê³  ì¡°ì‘í•˜ëŠ” ì „ì²´ íë¦„ì…ë‹ˆë‹¤.
            </p>

            <div class="mermaid-container">
                <div class="mermaid">
                    sequenceDiagram
                    participant App as Application
                    participant CR as ContentResolver
                    participant MP as MediaProvider
                    participant DB as SQLite DB
                    participant FS as File System

                    Note over App,FS: Query ì‘ì—… (ë¯¸ë””ì–´ ê²€ìƒ‰)
                    App->>CR: query(MediaStore.Images.EXTERNAL_CONTENT_URI)
                    CR->>MP: query() í˜¸ì¶œ
                    MP->>DB: SELECT * FROM images WHERE...
                    DB-->>MP: Cursor (ê²°ê³¼ì…‹)
                    MP-->>CR: Cursor ë°˜í™˜
                    CR-->>App: Cursor ë°˜í™˜
                    App->>App: Cursor ìˆœíšŒ ë° ë°ì´í„° ì¶”ì¶œ

                    Note over App,FS: Insert ì‘ì—… (ìƒˆ ë¯¸ë””ì–´ ì¶”ê°€)
                    App->>CR: insert(uri, ContentValues)
                    CR->>MP: insert() í˜¸ì¶œ
                    MP->>DB: INSERT INTO images VALUES(...)
                    DB-->>MP: Row ID
                    MP->>FS: íŒŒì¼ ìƒì„± ì¤€ë¹„
                    MP-->>CR: ìƒˆ ë¯¸ë””ì–´ URI ë°˜í™˜
                    CR-->>App: URI ë°˜í™˜
                    App->>FS: OutputStreamìœ¼ë¡œ íŒŒì¼ ì“°ê¸°

                    Note over App,FS: Delete ì‘ì—… (ë¯¸ë””ì–´ ì‚­ì œ)
                    App->>CR: delete(uri)
                    CR->>MP: delete() í˜¸ì¶œ
                    MP->>DB: DELETE FROM images WHERE _id=...
                    MP->>FS: ì‹¤ì œ íŒŒì¼ ì‚­ì œ
                    FS-->>MP: ì‚­ì œ ì™„ë£Œ
                    MP-->>CR: ì‚­ì œëœ í–‰ ìˆ˜ ë°˜í™˜
                    CR-->>App: ê²°ê³¼ ë°˜í™˜
                </div>
            </div>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”</span>
                        Query (ì¡°íšŒ)
                    </h3>
                    <div class="card-description">
                        <p><strong>ë¯¸ë””ì–´ ê²€ìƒ‰ ë° í•„í„°ë§</strong></p>
                        <ul>
                            <li><code>contentResolver.query()</code> í˜¸ì¶œ</li>
                            <li>MediaProviderê°€ SQLite DBì—ì„œ ë©”íƒ€ë°ì´í„° ê²€ìƒ‰</li>
                            <li>Cursor ê°ì²´ë¡œ ê²°ê³¼ ë°˜í™˜ (Worker Thread ê¶Œì¥)</li>
                            <li>Projection, Selection, Sort Order ì§€ì›</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">â•</span>
                        Insert (ì¶”ê°€)
                    </h3>
                    <div class="card-description">
                        <p><strong>ìƒˆ ë¯¸ë””ì–´ íŒŒì¼ ë“±ë¡</strong></p>
                        <ul>
                            <li><code>contentResolver.insert()</code>ë¡œ ë©”íƒ€ë°ì´í„° ë“±ë¡</li>
                            <li>MediaProviderê°€ DBì— ë ˆì½”ë“œ ìƒì„±</li>
                            <li>ìƒˆ ë¯¸ë””ì–´ URI ë°˜í™˜ (íŒŒì¼ ê²½ë¡œ í¬í•¨)</li>
                            <li>OutputStreamìœ¼ë¡œ ì‹¤ì œ íŒŒì¼ ë°ì´í„° ì“°ê¸°</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âœï¸</span>
                        Update (ìˆ˜ì •)
                    </h3>
                    <div class="card-description">
                        <p><strong>ë©”íƒ€ë°ì´í„° ì—…ë°ì´íŠ¸</strong></p>
                        <ul>
                            <li><code>contentResolver.update()</code>ë¡œ ìˆ˜ì •</li>
                            <li>ìì‹ ì˜ ë¯¸ë””ì–´ëŠ” ììœ ë¡­ê²Œ ìˆ˜ì • ê°€ëŠ¥</li>
                            <li>ë‹¤ë¥¸ ì•±ì˜ ë¯¸ë””ì–´ëŠ” ì‚¬ìš©ì ë™ì˜ í•„ìš”</li>
                            <li><code>is_favorite</code>, <code>is_trashed</code> ë“± í”Œë˜ê·¸ ë³€ê²½</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ—‘ï¸</span>
                        Delete (ì‚­ì œ)
                    </h3>
                    <div class="card-description">
                        <p><strong>ë¯¸ë””ì–´ íŒŒì¼ ì œê±°</strong></p>
                        <ul>
                            <li><code>contentResolver.delete()</code>ë¡œ ì‚­ì œ</li>
                            <li>DB ë ˆì½”ë“œ ë° ì‹¤ì œ íŒŒì¼ ëª¨ë‘ ì œê±°</li>
                            <li>ë‹¤ë¥¸ ì•±ì˜ ë¯¸ë””ì–´ ì‚­ì œ ì‹œ ì‚¬ìš©ì í™•ì¸ í•„ìš”</li>
                            <li>íœ´ì§€í†µ(<code>is_trashed</code>) ê¸°ëŠ¥ ì§€ì› (Android 11+)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: Scoped Storage -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">4</span>
                Scoped Storage Model
            </h2>
            <p class="section-description">
                Android 10ë¶€í„° ë„ì…ëœ Scoped StorageëŠ” ì•±ì˜ íŒŒì¼ ì ‘ê·¼ì„ ì œí•œí•˜ì—¬ ì‚¬ìš©ì í”„ë¼ì´ë²„ì‹œë¥¼ ê°•í™”í•©ë‹ˆë‹¤.
            </p>

            <div class="mermaid-container">
                <div class="mermaid">
                    flowchart TB
                    subgraph LEGACY ["Legacy Storage (Android 9 ì´í•˜)"]
                    L_APP["App"]
                    L_PERM["READ/WRITE_EXTERNAL_STORAGE"]
                    L_FS["ì „ì²´ íŒŒì¼ ì‹œìŠ¤í…œ ì ‘ê·¼"]

                    L_APP --> L_PERM
                    L_PERM --> L_FS
                    end

                    subgraph SCOPED ["Scoped Storage (Android 10+)"]
                    S_APP["App"]
                    S_OWN["ìì‹ ì˜ ì•± ì „ìš© ë””ë ‰í† ë¦¬<br />(ê¶Œí•œ ë¶ˆí•„ìš”)"]
                    S_MEDIA["MediaStoreë¥¼ í†µí•œ<br />ë¯¸ë””ì–´ ì ‘ê·¼"]
                    S_SAF["Storage Access Framework<br />(ì‚¬ìš©ì ì„ íƒ)"]

                    S_APP --> S_OWN
                    S_APP --> S_MEDIA
                    S_APP --> S_SAF
                    end

                    LEGACY -.->|Android 10+| SCOPED

                    style LEGACY fill:#1a1f35,stroke:#6b7280,stroke-width:2px,stroke-dasharray: 5 5
                    style SCOPED fill:#1a1f35,stroke:#7c3aed,stroke-width:3px
                    style S_OWN fill:#111827,stroke:#10b981,stroke-width:2px
                    style S_MEDIA fill:#111827,stroke:#7c3aed,stroke-width:2px
                    style S_SAF fill:#111827,stroke:#a78bfa,stroke-width:2px
                </div>
            </div>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ </span>
                        App-specific Directory
                    </h3>
                    <div class="card-description">
                        <p><strong>ì•± ì „ìš© ì €ì¥ì†Œ</strong></p>
                        <ul>
                            <li><code>getExternalFilesDir()</code>ë¡œ ì ‘ê·¼</li>
                            <li>ê¶Œí•œ ì—†ì´ ì½ê¸°/ì“°ê¸° ê°€ëŠ¥</li>
                            <li>ì•± ì‚­ì œ ì‹œ ìë™ìœ¼ë¡œ ë°ì´í„° ì œê±°</li>
                            <li>ë‹¤ë¥¸ ì•±ì€ ì ‘ê·¼ ë¶ˆê°€ (ê²©ë¦¬)</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“¸</span>
                        MediaStore Collections
                    </h3>
                    <div class="card-description">
                        <p><strong>ê³µìœ  ë¯¸ë””ì–´ ì ‘ê·¼</strong></p>
                        <ul>
                            <li>ìì‹ ì˜ ë¯¸ë””ì–´: ê¶Œí•œ ë¶ˆí•„ìš”</li>
                            <li>ë‹¤ë¥¸ ì•±ì˜ ë¯¸ë””ì–´ ì½ê¸°: <code>READ_MEDIA_*</code> ê¶Œí•œ</li>
                            <li>ë‹¤ë¥¸ ì•±ì˜ ë¯¸ë””ì–´ ìˆ˜ì •: ì‚¬ìš©ì ë™ì˜ í•„ìš”</li>
                            <li><code>Images</code>, <code>Video</code>, <code>Audio</code> ì»¬ë ‰ì…˜</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”</span>
                        Privacy Protection
                    </h3>
                    <div class="card-description">
                        <p><strong>ë¯¼ê° ì •ë³´ ë³´í˜¸</strong></p>
                        <ul>
                            <li>ìœ„ì¹˜ ë©”íƒ€ë°ì´í„° ìë™ ì‚­ì œ (Redaction)</li>
                            <li>ì•± í´ëŸ¬í„° ë°©ì§€ (ì•± ì‚­ì œ ì‹œ ë°ì´í„° ì •ë¦¬)</li>
                            <li>íŒŒì¼ ì ‘ê·¼ ì´ë ¥ ì¶”ì  ê°€ëŠ¥</li>
                            <li>ì‚¬ìš©ì ì¤‘ì‹¬ì˜ ê¶Œí•œ ëª¨ë¸</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âš™ï¸</span>
                        Special Permissions
                    </h3>
                    <div class="card-description">
                        <p><strong>íŠ¹ìˆ˜ ê¶Œí•œ</strong></p>
                        <ul>
                            <li><code>MANAGE_EXTERNAL_STORAGE</code>: ì „ì²´ íŒŒì¼ ì ‘ê·¼</li>
                            <li>íŒŒì¼ ê´€ë¦¬ì, ë°±ì—… ì•± ë“±ì—ë§Œ í—ˆìš©</li>
                            <li>Play Store ì •ì±…ìœ¼ë¡œ ì—„ê²©íˆ ì œí•œ</li>
                            <li>ì¼ë°˜ ì•±ì€ MediaStore/SAF ì‚¬ìš© ê¶Œì¥</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 5: FUSE Daemon -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">5</span>
                FUSE Daemon Architecture
            </h2>
            <p class="section-description">
                Android 11ë¶€í„° MediaProviderëŠ” FUSE(Filesystem in Userspace) ë°ëª¬ìœ¼ë¡œ ë™ì‘í•˜ì—¬ íŒŒì¼ ì ‘ê·¼ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ì œì–´í•©ë‹ˆë‹¤.
            </p>

            <div class="mermaid-container">
                <div class="mermaid">
                    sequenceDiagram
                    participant App as Application
                    participant Kernel as FUSE Driver (Kernel)
                    participant FD as FuseDaemon (MediaProvider)
                    participant FS as Underlying File System

                    Note over App,FS: íŒŒì¼ ì—´ê¸° (open)
                    App->>Kernel: open("/storage/emulated/0/DCIM/photo.jpg")
                    Kernel->>FD: FUSE_OPEN ìš”ì²­
                    FD->>FD: ê¶Œí•œ ê²€ì‚¬ (ì•± UID, íŒŒì¼ ì†Œìœ ì)
                    alt ê¶Œí•œ ìˆìŒ
                    FD->>FS: ì‹¤ì œ íŒŒì¼ ì—´ê¸°
                    FS-->>FD: File Descriptor
                    FD->>Kernel: FUSE Passthrough ì„¤ì • (Android 12+)
                    FD-->>Kernel: í—ˆìš© ì‘ë‹µ
                    Kernel-->>App: File Descriptor ë°˜í™˜
                    else ê¶Œí•œ ì—†ìŒ
                    FD-->>Kernel: ê±°ë¶€ ì‘ë‹µ (EACCES)
                    Kernel-->>App: ì—ëŸ¬ ë°˜í™˜
                    end

                    Note over App,FS: íŒŒì¼ ì½ê¸° (read) - Passthrough í™œì„±í™” ì‹œ
                    App->>Kernel: read(fd, buffer, size)
                    Kernel->>FS: ì§ì ‘ ì½ê¸° (FuseDaemon ìš°íšŒ)
                    FS-->>Kernel: ë°ì´í„°
                    Kernel-->>App: ë°ì´í„° ë°˜í™˜
                </div>
            </div>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ›¡ï¸</span>
                        Access Control
                    </h3>
                    <div class="card-description">
                        <p><strong>ì‹¤ì‹œê°„ ê¶Œí•œ ê²€ì‚¬</strong></p>
                        <ul>
                            <li>ëª¨ë“  íŒŒì¼ ì‘ì—…ì„ User-spaceì—ì„œ ê°€ë¡œì±„ê¸°</li>
                            <li>ì•± UIDì™€ íŒŒì¼ ì†Œìœ ì ë¹„êµ</li>
                            <li>Scoped Storage ì •ì±… ì ìš©</li>
                            <li>í—ˆìš©/ê±°ë¶€/Redaction ê²°ì •</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âš¡</span>
                        FUSE Passthrough
                    </h3>
                    <div class="card-description">
                        <p><strong>ì„±ëŠ¥ ìµœì í™” (Android 12+)</strong></p>
                        <ul>
                            <li>ê¶Œí•œ í™•ì¸ í›„ ì§ì ‘ íŒŒì¼ ì‹œìŠ¤í…œ ì ‘ê·¼ í—ˆìš©</li>
                            <li>Read/Write ì‘ì—… ì‹œ FuseDaemon ìš°íšŒ</li>
                            <li>User-space â†” Kernel-space ì „í™˜ ì˜¤ë²„í—¤ë“œ ì œê±°</li>
                            <li>I/O ì„±ëŠ¥ ëŒ€í­ í–¥ìƒ</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”„</span>
                        JNI Integration
                    </h3>
                    <div class="card-description">
                        <p><strong>Java â†” Native í†µì‹ </strong></p>
                        <ul>
                            <li>FuseDaemonì€ C++ Native ì½”ë“œë¡œ êµ¬í˜„</li>
                            <li>MediaProviderWrapperë¡œ Java ë ˆì´ì–´ì™€ í†µì‹ </li>
                            <li>ê¶Œí•œ ê²€ì‚¬ ë¡œì§ì€ Javaì—ì„œ ì²˜ë¦¬</li>
                            <li><code>/dev/fuse</code> ë…¸ë“œë¥¼ í†µí•œ ì»¤ë„ í†µì‹ </li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸš€</span>
                        Per-User Instance
                    </h3>
                    <div class="card-description">
                        <p><strong>ì‚¬ìš©ìë³„ ë°ëª¬</strong></p>
                        <ul>
                            <li>ê° ì‚¬ìš©ì(u0, u10 ë“±)ë§ˆë‹¤ FuseDaemon ì¸ìŠ¤í„´ìŠ¤ ìƒì„±</li>
                            <li>ë¶€íŒ… ì‹œ ì‹œì‘, ì¢…ë£Œ ì‹œê¹Œì§€ ì§€ì† ì‹¤í–‰</li>
                            <li><code>fuse_session_loop_mt</code>ë¡œ ë©€í‹°ìŠ¤ë ˆë“œ ì²˜ë¦¬</li>
                            <li>ì‚¬ìš©ìë³„ ë…ë¦½ì ì¸ íŒŒì¼ ì ‘ê·¼ ì œì–´</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer
            style="text-align: center; padding: 40px 20px; color: var(--text-muted); border-top: 1px solid var(--border-color); margin-top: 60px;">
            <p>Android MediaProvider Architecture</p>
            <p style="margin-top: 10px; font-size: 0.9rem;">
                MediaStore, Scoped Storage & FUSE Daemon Deep Dive
            </p>
            <p style="margin-top: 20px;">
                <a href="index.html" style="color: var(--accent-primary); text-decoration: none;">
                    â† AOSP Media Frameworkë¡œ ëŒì•„ê°€ê¸°
                </a>
            </p>
        </footer>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'dark',
            themeVariables: {
                primaryColor: '#1a1f35',
                primaryTextColor: '#e5e7eb',
                primaryBorderColor: '#7c3aed',
                lineColor: '#a78bfa',
                secondaryColor: '#111827',
                tertiaryColor: '#0a0e1a',
                background: '#0a0e1a',
                mainBkg: '#1a1f35',
                secondBkg: '#111827',
                border1: '#7c3aed',
                border2: '#a78bfa',
                note: '#c4b5fd',
                noteBkgColor: 'rgba(124, 58, 237, 0.1)',
                noteBorderColor: '#7c3aed',
                fontFamily: 'Noto Sans KR'
            },
            flowchart: {
                curve: 'basis',
                padding: 20,
                nodeSpacing: 50,
                rankSpacing: 50
            },
            sequence: {
                actorMargin: 50,
                width: 150,
                height: 65,
                boxMargin: 10,
                boxTextMargin: 5,
                noteMargin: 10,
                messageMargin: 35
            }
        });

        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        document.querySelectorAll('.section').forEach(section => {
            section.style.opacity = '0';
            section.style.transform = 'translateY(30px)';
            section.style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
            observer.observe(section);
        });
    </script>
    <script src="scripts/theme-toggle.js"></script>
</body>

</html>