<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Power Policy & Suspend | Android Media Framework</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;500;700&display=swap"
        rel="stylesheet">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0a0e1a;
            --bg-secondary: #111827;
            --bg-card: #1a1f35;
            --bg-card-hover: #222844;

            /* Palette */
            --accent-blue: #3b82f6;
            --accent-indigo: #6366f1;
            --accent-teal: #14b8a6;
            --accent-green: #10b981;
            --accent-rose: #f43f5e;
            --accent-amber: #f59e0b;
            --accent-purple: #8b5cf6;

            --text-primary: #e5e7eb;
            --text-secondary: #9ca3af;
            --text-muted: #6b7280;
            --border-color: rgba(255, 255, 255, 0.1);
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, #0f1419 50%, #0f172a 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .nav {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
        }

        .nav-button {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 12px 24px;
            background: rgba(26, 31, 53, 0.9);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-primary);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .nav-button:hover {
            background: rgba(59, 130, 246, 0.1);
            border-color: var(--accent-blue);
            transform: translateX(-5px);
        }

        header {
            text-align: center;
            margin-bottom: 60px;
            margin-top: 40px;
            padding: 80px 20px;
            background: radial-gradient(circle at top right, rgba(139, 92, 246, 0.15), transparent 40%),
                radial-gradient(circle at bottom left, rgba(59, 130, 246, 0.15), transparent 40%),
                linear-gradient(135deg, rgba(17, 24, 39, 0.8) 0%, rgba(17, 24, 39, 0.95) 100%);
            border-radius: 32px;
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
            box-shadow: 0 20px 50px -10px rgba(0, 0, 0, 0.5);
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        }

        h1 {
            font-size: 3.5rem;
            font-weight: 900;
            background: linear-gradient(to right, var(--accent-purple), var(--accent-indigo), var(--accent-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
            letter-spacing: -1px;
        }

        .subtitle {
            font-size: 1.3rem;
            color: var(--text-secondary);
            font-weight: 300;
        }

        /* Section Styles */
        .section {
            margin-bottom: 80px;
            padding: 40px;
            background: var(--bg-card);
            border-radius: 24px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .section:hover {
            border-color: rgba(139, 92, 246, 0.3);
            box-shadow: 0 10px 40px rgba(139, 92, 246, 0.1);
            transform: translateY(-2px);
        }

        .section-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .section-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            border-radius: 14px;
            font-size: 1.3rem;
            font-weight: 900;
            color: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        /* Section Specific Colors */
        .sec-concept .section-title {
            color: var(--accent-purple);
        }

        .sec-concept .section-number {
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-indigo));
        }

        .sec-arch .section-title {
            color: var(--accent-blue);
        }

        .sec-arch .section-number {
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-teal));
        }

        .sec-flow .section-title {
            color: var(--accent-green);
        }

        .sec-flow .section-number {
            background: linear-gradient(135deg, var(--accent-green), var(--accent-teal));
        }

        .sec-context .section-title {
            color: var(--accent-rose);
        }

        .sec-context .section-number {
            background: linear-gradient(135deg, var(--accent-rose), var(--accent-amber));
        }

        .section-description {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            padding-left: 65px;
            max-width: 900px;
        }

        /* Diagram Container */
        .diagram-container {
            background: var(--bg-secondary);
            border-radius: 16px;
            padding: 30px;
            margin: 30px 0;
            border: 1px solid var(--border-color);
            overflow-x: auto;
        }

        .mermaid {
            display: flex;
            justify-content: center;
            min-height: 300px;
        }

        /* Content Grid */
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .card {
            background: var(--bg-secondary);
            padding: 30px;
            border-radius: 20px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
            position: relative;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .sec-concept .card:hover {
            border-color: var(--accent-purple);
        }

        .sec-arch .card:hover {
            border-color: var(--accent-blue);
        }

        .sec-flow .card:hover {
            border-color: var(--accent-green);
        }

        .sec-context .card:hover {
            border-color: var(--accent-rose);
        }

        .card-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .sec-concept .card-title {
            color: var(--accent-purple);
        }

        .sec-arch .card-title {
            color: var(--accent-blue);
        }

        .sec-flow .card-title {
            color: var(--accent-green);
        }

        .sec-context .card-title {
            color: var(--accent-rose);
        }

        .card-icon {
            font-size: 1.5rem;
        }

        .card-description {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.7;
        }

        .card-description ul {
            margin-top: 10px;
            padding-left: 20px;
            list-style-type: disc;
        }

        .card-description li {
            margin-bottom: 5px;
        }

        code {
            font-family: 'JetBrains Mono', monospace;
            background: rgba(255, 255, 255, 0.05);
            padding: 2px 6px;
            border-radius: 4px;
            color: var(--accent-blue);
            font-size: 0.9em;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 20px 15px;
            }

            h1 {
                font-size: 2.5rem;
            }

            .section {
                padding: 25px;
                margin-bottom: 40px;
            }

            .section-title {
                font-size: 1.5rem;
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .section-description {
                padding-left: 0;
            }

            .diagram-container {
                padding: 15px;
                margin: 20px -10px;
                /* Slight negative margin to maximize width */
                border-radius: 12px;
            }

            .content-grid {
                grid-template-columns: 1fr;
                /* Force single column on mobile */
            }
        }

        .diagram-caption {
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 15px;
            font-style: italic;
        }
    </style>
</head>

<body>
    <nav class="nav">
        <a href="index.html" class="nav-button">
            â† Android Media
        </a>
    </nav>

    <div class="container">
        <header>
            <h1>Power Policy & Suspend</h1>
            <p class="subtitle">Deep Sleep, Suspend-to-RAM, and Audio Context Preservation in AAOS</p>
        </header>

        <!-- Section 1: Concept -->
        <section class="section sec-concept">
            <h2 class="section-title">
                <span class="section-number">1</span>
                ê°œë… ì •ë¦¬: Deep Sleep & Suspend-to-RAM
            </h2>
            <p class="section-description">
                AAOSì—ì„œ ì‹œë™ì„ ë„ë©´(Ignition Off), AP(Application Processor)ëŠ” ì™„ì „ ì¢…ë£Œ(Shutdown)ê°€ ì•„ë‹ˆë¼
                <strong>Deep Sleep (Suspend-to-RAM, STR)</strong> ëª¨ë“œë¡œ ì§„ì…í•©ë‹ˆë‹¤.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ’¤</span> Suspend-to-RAM (STR)</h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>ì „ì› ì°¨ë‹¨:</strong> ë””ìŠ¤í”Œë ˆì´, CPU, ëŒ€ë¶€ë¶„ì˜ ì£¼ë³€ ì¥ì¹˜ OFF.</li>
                            <li><strong>ë©”ëª¨ë¦¬ ìœ ì§€:</strong> DRAMë§Œ Self-Refresh ìƒíƒœë¡œ ìœ ì§€í•˜ì—¬ ì»¤ë„ ë° í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ë³´ì¡´.</li>
                            <li><strong>ì‹¤í–‰ ì¤‘ì§€:</strong> ì½”ë“œ ì‹¤í–‰ì€ ì™„ì „íˆ ë©ˆì¶¤ (íƒ€ì´ë¨¸/ìŠ¤ë ˆë“œ ë™ì‘ ì—†ìŒ).</li>
                        </ul>
                    </div>
                </div>
                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ›‘</span> Shutdown Prepare</h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>UI Off:</strong> ìš´ì „ìëŠ” í™”ë©´ì´ êº¼ì§„ ê²ƒì„ ë³´ê³  ì¢…ë£Œë˜ì—ˆë‹¤ê³  ìƒê°í•¨.</li>
                            <li><strong>OS Alive:</strong> ì•ˆë“œë¡œì´ë“œëŠ” ì•„ì§ ì‹¤í–‰ ì¤‘ì´ë©°, ì •ë¦¬ ì‘ì—…(DB ì €ì¥ ë“±) ìˆ˜í–‰ ê°€ëŠ¥.</li>
                            <li><strong>Context Save:</strong> ì˜¤ë””ì˜¤/ë¯¸ë””ì–´ ì»¨í…ìŠ¤íŠ¸ ì €ì¥ì€ ì´ ì‹œì ì— ì´ë£¨ì–´ì§.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 2: Architecture -->
        <section class="section sec-arch">
            <h2 class="section-title">
                <span class="section-number">2</span>
                AAOS ì „ì› ê´€ë¦¬ ì•„í‚¤í…ì²˜
            </h2>
            <p class="section-description">
                ì°¨ëŸ‰ì˜ ì „ì› ìƒíƒœëŠ” VMCUì—ì„œ ì‹œì‘ë˜ì–´ VHALì„ ê±°ì³ ì•ˆë“œë¡œì´ë“œ í”„ë ˆì„ì›Œí¬(CPMS)ë¡œ ì „ë‹¬ë©ë‹ˆë‹¤.
            </p>

            <div class="diagram-container">
                <div class="mermaid">
                    graph LR
                    VMCU[VMCU<br />Microcontroller] -->|IGN/ACC Signal| VHAL[Vehicle HAL]
                    VHAL -->|Power State Property| CPMS[CarPowerManagementService]
                    CPMS -->|Apply Policy| Policy[CarPowerPolicyService]
                    Policy -->|Enable/Disable| Components[Components<br />Audio, Media, Display, etc.]

                    style VMCU fill:#1a1f35,stroke:#9ca3af
                    style VHAL fill:#10b981,stroke:#fff
                    style CPMS fill:#3b82f6,stroke:#fff
                    style Policy fill:#8b5cf6,stroke:#fff
                    style Components fill:#ec4899,stroke:#fff
                </div>
                <p class="diagram-caption">í•˜ë“œì›¨ì–´(VMCU) ì‹ í˜¸ê°€ VHALì„ í†µí•´ ì•ˆë“œë¡œì´ë“œ í”„ë ˆì„ì›Œí¬(CPMS)ë¡œ ì „ë‹¬ë˜ê³ , ì •ì±… ì„œë¹„ìŠ¤ê°€ ê° ì»´í¬ë„ŒíŠ¸ë¥¼ ì œì–´í•˜ëŠ” íë¦„ì…ë‹ˆë‹¤.
                </p>
            </div>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title"><span class="card-icon">âš™ï¸</span> CarPowerManagementService (CPMS)</h3>
                    <div class="card-description">
                        ì•ˆë“œë¡œì´ë“œ ì „ì› ìƒíƒœ ë¨¸ì‹ (State Machine)ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. VHAL ì´ë²¤íŠ¸ë¥¼ ë°›ì•„ ê° ì„œë¹„ìŠ¤ì— Sleep/Shutdown ì•Œë¦¼ì„ ë³´ë‚´ê³ , Deep Sleep ì§„ì…ê³¼
                        ë³µê·€ë¥¼ ì¡°ìœ¨í•©ë‹ˆë‹¤.
                    </div>
                </div>
                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ“œ</span> CarPowerPolicy</h3>
                    <div class="card-description">
                        "ì–´ë–¤ ì»´í¬ë„ŒíŠ¸ë¥¼ ì¼¤ì§€/ëŒì§€"ë¥¼ ì •ì˜í•œ ì •ì±…ì…ë‹ˆë‹¤.
                        <br>ì˜ˆ: <code>ShutdownPrepare</code> ìƒíƒœì—ì„œëŠ” <strong>AUDIO=OFF, MEDIA=OFF, DISPLAY=OFF</strong> ì •ì±…ì´
                        ì ìš©ë©ë‹ˆë‹¤.
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: CPMS Integration -->
        <section class="section sec-arch">
            <h2 class="section-title">
                <span class="section-number">3</span>
                CPMSì™€ Media Framework ì—°ê²°
            </h2>
            <p class="section-description">
                <code>CarAudioService</code>ì™€ <code>CarMediaService</code>ëŠ” CPMSì— ë¦¬ìŠ¤ë„ˆë¥¼ ë“±ë¡í•˜ì—¬ ì „ì› ìƒíƒœ ë³€í™”ë¥¼ ê°ì§€í•©ë‹ˆë‹¤.
            </p>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-rose); font-size: 1.1rem;">
                CarAudioService Integration</h3>
            <div class="diagram-container">
                <div class="mermaid">
                    sequenceDiagram
                    participant CAS as CarAudioService
                    participant CPMS as CarPowerManagementService
                    participant Policy as CarPowerPolicy

                    Note over CAS, CPMS: 1. Listener Registration (Boot Phase)
                    CAS->>CAS: Create Filter (Component: AUDIO)
                    CAS->>CPMS: addPowerPolicyListener(filter, listener)
                    CPMS-->>CAS: Success

                    Note over CPMS, Policy: 2. Policy Change Event
                    CPMS->>CPMS: Detect Power State Change
                    CPMS->>Policy: Get Current Policy
                    CPMS->>CAS: onPolicyChanged(policy)

                    activate CAS
                    CAS->>Policy: isComponentEnabled(AUDIO)
                    alt AUDIO Enabled
                    CAS->>CAS: setAudioEnabled(true)
                    CAS->>CAS: Unmute / Restore Focus
                    else AUDIO Disabled
                    CAS->>CAS: setAudioEnabled(false)
                    CAS->>CAS: Mute / Reject Focus
                    end
                    deactivate CAS
                </div>
                <p class="diagram-caption">CarAudioServiceëŠ” ë¦¬ìŠ¤ë„ˆ ë“±ë¡ í›„, ì •ì±… ë³€ê²½ ì‹œ AUDIO ì»´í¬ë„ŒíŠ¸ í™œì„±í™” ì—¬ë¶€ì— ë”°ë¼ Mute ë˜ëŠ” Focus ì²˜ë¦¬ë¥¼
                    ìˆ˜í–‰í•©ë‹ˆë‹¤.</p>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-green); font-size: 1.1rem;">
                CarMediaService Integration</h3>
            <div class="diagram-container">
                <div class="mermaid">
                    sequenceDiagram
                    participant CMS as CarMediaService
                    participant CPMS as CarPowerManagementService
                    participant Policy as CarPowerPolicy
                    participant App as Media App

                    Note over CMS, CPMS: 1. Listener Registration
                    CMS->>CMS: Create Filter (Component: MEDIA)
                    CMS->>CPMS: addPowerPolicyListener(filter, listener)

                    Note over CPMS, Policy: 2. Policy Change Event
                    CPMS->>CAS: onPolicyChanged(policy)

                    activate CMS
                    CMS->>Policy: isComponentEnabled(MEDIA)
                    alt MEDIA Disabled (Suspend)
                    CMS->>App: Pause Playback
                    CMS->>CMS: Save Last Media Source
                    else MEDIA Enabled (Resume)
                    CMS->>CMS: Load Last Media Source
                    opt Auto Resume
                    CMS->>App: Play (Restore Context)
                    end
                    end
                    deactivate CMS
                </div>
                <p class="diagram-caption">CarMediaServiceëŠ” MEDIA ì»´í¬ë„ŒíŠ¸ê°€ ë¹„í™œì„±í™”ë˜ë©´ ì¬ìƒì„ ë©ˆì¶”ê³  ì†ŒìŠ¤ë¥¼ ì €ì¥í•˜ë©°, í™œì„±í™”ë˜ë©´ ë‹¤ì‹œ ë¶ˆëŸ¬ì™€ ìë™ ì¬ìƒì„
                    ì‹œë„í•©ë‹ˆë‹¤.</p>
            </div>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ§</span> CarAudioService</h3>
                    <div class="card-description">
                        <strong>AUDIO OFF ê°ì§€ ì‹œ:</strong>
                        <ul>
                            <li>ìƒˆë¡œìš´ ì˜¤ë””ì˜¤ í¬ì»¤ìŠ¤ ìš”ì²­ ê±°ì ˆ (Reject).</li>
                            <li>ê¸°ì¡´ ë¹„ì¹˜ëª…ì (Non-critical) í¬ì»¤ìŠ¤ í•´ì œ (Abandon).</li>
                            <li>ë³¼ë¥¨ ê·¸ë£¹ Mute (ê²½ê³ ìŒ ì œì™¸).</li>
                        </ul>
                    </div>
                </div>
                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ¬</span> CarMediaService</h3>
                    <div class="card-description">
                        <strong>MEDIA OFF ê°ì§€ ì‹œ:</strong>
                        <ul>
                            <li>í˜„ì¬ í™œì„± MediaSession ì°¾ê¸°.</li>
                            <li>ì¬ìƒ ì¤‘ì´ë©´ <code>pause()</code> í˜¸ì¶œ.</li>
                            <li>ë§ˆì§€ë§‰ ì¬ìƒ ì•±(Source) ì •ë³´ ì €ì¥.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: Sequence Flows -->
        <section class="section sec-flow">
            <h2 class="section-title">
                <span class="section-number">4</span>
                ì§„ì… ë° ë³µê·€ ì‹œí€€ìŠ¤ (Deep Dive)
            </h2>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-green); font-size: 1.3rem;">4-1. ì§„ì…
                ì‹œí€€ìŠ¤ (Ignition OFF)</h3>
            <div class="diagram-container">
                <div class="mermaid">
                    sequenceDiagram
                    participant Driver
                    participant VMCU
                    participant CPMS
                    participant Policy as PowerPolicy
                    participant Audio as CarAudioService
                    participant Media as CarMediaService
                    participant App
                    participant Kernel

                    Driver->>VMCU: Ignition OFF
                    VMCU->>CPMS: SHUTDOWN_PREPARE Req
                    CPMS->>Policy: Apply "No User Interaction" Policy

                    par Notify Components
                    Policy->>Audio: AUDIO = Disabled
                    Audio->>Audio: Mute / Reject Focus

                    Policy->>Media: MEDIA = Disabled
                    Media->>App: Pause Playback
                    Media->>Media: Save Last Source
                    App->>App: Save Position to DB
                    end

                    CPMS->>CPMS: onSleepEntry() (Cleanup)
                    CPMS->>VMCU: Ready for Suspend
                    VMCU->>Kernel: Trigger Deep Sleep
                    Note over Kernel: CPU OFF / DRAM Self-Refresh
                </div>
                <p class="diagram-caption">Ignition OFF ì‹œ VMCUê°€ CPMSì— ì•Œë¦¬ê³ , CPMSëŠ” ì •ì±…ì„ ì ìš©í•˜ì—¬ ì˜¤ë””ì˜¤/ë¯¸ë””ì–´ë¥¼ ëˆ í›„ ì»¤ë„ì„ Deep Sleepìœ¼ë¡œ
                    ì „í™˜í•©ë‹ˆë‹¤.</p>
            </div>

            <h3 style="margin-top: 40px; margin-bottom: 16px; color: var(--accent-green); font-size: 1.3rem;">4-2. ë³µê·€
                ì‹œí€€ìŠ¤ (Ignition ON)</h3>
            <div class="diagram-container">
                <div class="mermaid">
                    sequenceDiagram
                    participant VMCU
                    participant Kernel
                    participant CPMS
                    participant Policy as PowerPolicy
                    participant Audio as CarAudioService
                    participant Media as CarMediaService
                    participant App

                    VMCU->>Kernel: Wake Up
                    Kernel->>CPMS: Resume
                    CPMS->>CPMS: onSleepExit()
                    CPMS->>Policy: Apply "System On" Policy

                    par Notify Components
                    Policy->>Audio: AUDIO = Enabled
                    Audio->>Audio: Unmute / Allow Focus

                    Policy->>Media: MEDIA = Enabled
                    Media->>Media: Load Last Source
                    opt Auto Resume
                    Media->>App: Connect & Play
                    App->>App: Restore Position & Play
                    end
                    end
                </div>
                <p class="diagram-caption">VMCUê°€ ê¹¨ì–´ë‚˜ë©´ ì»¤ë„ì´ Resumeë˜ê³ , CPMSëŠ” ì‹œìŠ¤í…œ ì •ì±…ì„ ì ìš©í•˜ì—¬ ì˜¤ë””ì˜¤/ë¯¸ë””ì–´ë¥¼ ë‹¤ì‹œ í™œì„±í™”í•©ë‹ˆë‹¤.</p>
            </div>
        </section>

        <!-- Section 5: Context Preservation -->
        <section class="section sec-context">
            <h2 class="section-title">
                <span class="section-number">5</span>
                ì˜¤ë””ì˜¤ ì»¨í…ìŠ¤íŠ¸ ì €ì¥ ë° ë³µêµ¬
            </h2>
            <p class="section-description">
                "ì˜¤ë””ì˜¤ ì»¨í…ìŠ¤íŠ¸"ëŠ” ì‹œìŠ¤í…œ ë ˆë²¨ê³¼ ì•± ë ˆë²¨ë¡œ ë‚˜ë‰˜ì–´ ê´€ë¦¬ë©ë‹ˆë‹¤.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ›ï¸</span> ì‹œìŠ¤í…œ ë ˆë²¨ (CarAudioContext)</h3>
                    <div class="card-description">
                        <strong>CarAudioService ê´€ë¦¬</strong>
                        <ul>
                            <li><strong>Volume Group:</strong> ê° ê·¸ë£¹(Music, Navi, Voice)ì˜ ë³¼ë¥¨ ë ˆë²¨.</li>
                            <li><strong>Routing:</strong> ì˜¤ë””ì˜¤ê°€ ì¶œë ¥ë  Zone ë° Device.</li>
                            <li><strong>Focus State:</strong> í˜„ì¬ í¬ì»¤ìŠ¤ë¥¼ ê°€ì§„ ì•± (Resume ì‹œ ë³µêµ¬ ì—¬ë¶€ ê²°ì •).</li>
                        </ul>
                    </div>
                </div>
                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ“±</span> ì•± ë ˆë²¨ (Playback Context)</h3>
                    <div class="card-description">
                        <strong>ì•±(MediaSession) ê´€ë¦¬</strong>
                        <ul>
                            <li><strong>Media ID:</strong> ì¬ìƒ ì¤‘ì´ë˜ ê³¡/ì½˜í…ì¸  ì‹ë³„ì.</li>
                            <li><strong>Position:</strong> ì¬ìƒ ìœ„ì¹˜ (ms).</li>
                            <li><strong>Playlist:</strong> í˜„ì¬ ëŒ€ê¸°ì—´ ë° ì…”í”Œ/ë°˜ë³µ ëª¨ë“œ.</li>
                        </ul>
                        <p style="margin-top: 10px; font-size: 0.9em; color: var(--accent-rose);">
                            * ì•±ì€ <code>onPause()</code> ë˜ëŠ” <code>onStop()</code> ì‹œì ì— ì´ ì •ë³´ë¥¼ ì˜êµ¬ ì €ì¥ì†Œ(DB/Prefs)ì— ì €ì¥í•´ì•¼ í•©ë‹ˆë‹¤.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 6: Developer Checklist -->
        <section class="section sec-context">
            <h2 class="section-title">
                <span class="section-number">6</span>
                ê°œë°œì ì²´í¬ë¦¬ìŠ¤íŠ¸
            </h2>
            <p class="section-description">
                ë¯¸ë””ì–´ ì•± ê°œë°œìê°€ AAOSì˜ ì „ì› ì •ì±…ì— ì˜¬ë°”ë¥´ê²Œ ëŒ€ì‘í•˜ê¸° ìœ„í•œ ê°€ì´ë“œì…ë‹ˆë‹¤.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title"><span class="card-icon">âœ…</span> í•„ìˆ˜ êµ¬í˜„ ì‚¬í•­</h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>MediaSession & AudioFocus:</strong> í‘œì¤€ APIë¥¼ ì¤€ìˆ˜í•˜ì—¬ êµ¬í˜„.</li>
                            <li><strong>Focus Loss ëŒ€ì‘:</strong> í¬ì»¤ìŠ¤ ìƒì„ ì‹œ ì¦‰ì‹œ <code>pause()</code> ë° ìƒíƒœ ì €ì¥.</li>
                            <li><strong>PlaybackState ê´€ë¦¬:</strong> <code>STATE_PAUSED</code>ë¡œ ì •í™•íˆ ì—…ë°ì´íŠ¸.</li>
                        </ul>
                    </div>
                </div>
                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ’¾</span> ìƒíƒœ ì €ì¥ (Persistence)</h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>ì €ì¥ ì‹œì :</strong> <code>onPause()</code>, <code>onStop()</code>,
                                <code>ACTION_SHUTDOWN</code>.
                            </li>
                            <li><strong>ì €ì¥ í•­ëª©:</strong> Media ID, Position, Playlist, Shuffle Mode.</li>
                            <li><strong>ë³µêµ¬:</strong> ì•± ì¬ì‹œì‘ ë˜ëŠ” <code>onPlay()</code> í˜¸ì¶œ ì‹œ ë§ˆì§€ë§‰ ìƒíƒœì—ì„œ ì´ì–´í•˜ê¸°.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <a href="index.html" class="nav-button">â† Back to Dashboard</a>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                darkMode: true,
                background: '#111827',
                primaryColor: '#3b82f6',
                secondaryColor: '#ec4899',
                tertiaryColor: '#0f172a',
                primaryTextColor: '#e5e7eb',
                secondaryTextColor: '#9ca3af',
                lineColor: '#334155'
            }
        });
    </script>
</body>

</html>