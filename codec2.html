<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Prevent Flash of Incorrect Theme (FOIT) -->
    <script>
    (function(){var t=localStorage.getItem('android-media-framework-theme');if(t)document.documentElement.setAttribute('data-theme',t);else if(window.matchMedia&&window.matchMedia('(prefers-color-scheme:light)').matches)document.documentElement.setAttribute('data-theme','light');})();
    </script>
    <title>Android Codec 2.0 Architecture</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@300;400;600;700;900&family=IBM+Plex+Mono:wght@400;500;600&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/design-system.css">

        <style>
        /* Page-specific styles loaded from design-system.css */
    </style>
</head>

<body>
    <nav class="nav">
        <a href="index.html" class="nav-button">
            â† AOSP Media Framework
        </a>
    </nav>

    <div class="container">
        <header>
            <h1 class="page-title">âš™ï¸ Codec 2.0</h1>
            <p class="page-subtitle">ì°¨ì„¸ëŒ€ Android ë¯¸ë””ì–´ ì½”ë± ì•„í‚¤í…ì²˜</p>
        </header>

        <!-- Section 1: Overview -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">1</span>
                Overview: Codec 2.0ì´ë€?
            </h2>
            <p class="section-description">
                Codec 2.0ì€ Android Q(10)ì—ì„œ ë„ì…ëœ ì°¨ì„¸ëŒ€ ë©€í‹°ë¯¸ë””ì–´ í”„ë ˆì„ì›Œí¬ë¡œ, ê¸°ì¡´ ACodec/OpenMAXë¥¼ ëŒ€ì²´í•©ë‹ˆë‹¤.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ¯</span>
                        ì£¼ìš” ëª©í‘œ
                    </h3>
                    <div class="card-description">
                        <p><strong>ì„±ëŠ¥ ë° ë³´ì•ˆ í–¥ìƒ</strong></p>
                        <ul>
                            <li>Zero-Copy ë²„í¼ ê´€ë¦¬ë¡œ ì„±ëŠ¥ í–¥ìƒ</li>
                            <li>HAL ê¸°ë°˜ ë³´ì•ˆ ê°•í™”</li>
                            <li>Mainline ëª¨ë“ˆë¡œ ë…ë¦½ ì—…ë°ì´íŠ¸</li>
                            <li>í•˜ë“œì›¨ì–´ ê°€ì† ìµœì í™”</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”„</span>
                        ê¸°ì¡´ ì‹œìŠ¤í…œ ëŒ€ì²´
                    </h3>
                    <div class="card-description">
                        <p><strong>ACodec + OpenMAX IL ëŒ€ì²´</strong></p>
                        <ul>
                            <li>ë” ë‹¨ìˆœí•˜ê³  ìœ ì—°í•œ API</li>
                            <li>ì»´í¬ë„ŒíŠ¸ ì²´ì´ë‹ ì§€ì›</li>
                            <li>í•„í„° í”ŒëŸ¬ê·¸ì¸ ì§€ì›</li>
                            <li>êµ¬ì„± ì¿¼ë¦¬ ê¸°ëŠ¥ í–¥ìƒ</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âš¡</span>
                        Zero-Copy ë²„í¼
                    </h3>
                    <div class="card-description">
                        <p><strong>í•µì‹¬ ì„±ëŠ¥ ìµœì í™”</strong></p>
                        <ul>
                            <li>ë°ì´í„° ë³µì‚¬ ì˜¤ë²„í—¤ë“œ ì œê±°</li>
                            <li>C2Bufferë¥¼ í†µí•œ íš¨ìœ¨ì  ì „ë‹¬</li>
                            <li>C2Allocatorë¡œ ë©”ëª¨ë¦¬ ê´€ë¦¬</li>
                            <li>ION/Gralloc í™œìš©</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”Œ</span>
                        HAL ì¸í„°í˜ì´ìŠ¤
                    </h3>
                    <div class="card-description">
                        <p><strong>android.hardware.media.c2</strong></p>
                        <ul>
                            <li>HIDL/AIDL ê¸°ë°˜ HAL</li>
                            <li>ë²¤ë” êµ¬í˜„ ë¶„ë¦¬</li>
                            <li>í”„ë¡œì„¸ìŠ¤ ê°„ í†µì‹  ìµœì í™”</li>
                            <li>ë…ë¦½ì ì¸ ì—…ë°ì´íŠ¸ ê°€ëŠ¥</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 2: Architecture -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">2</span>
                ì „ì²´ ì•„í‚¤í…ì²˜
            </h2>
            <p class="section-description">
                MediaCodec APIë¶€í„° í•˜ë“œì›¨ì–´ ì½”ë±ê¹Œì§€ Codec 2.0ì˜ ì „ì²´ êµ¬ì¡°ë¥¼ ì‹œê°í™”í•©ë‹ˆë‹¤.
            </p>

            <div class="mermaid-container">
                <div class="mermaid">
                    graph TB
                    subgraph APP ["Application Layer"]
                    MEDIA_APP[Media App]
                    end

                    subgraph FRAMEWORK ["Android Framework"]
                    MEDIACODEC[MediaCodec API]
                    CCODEC[CCodec<br />Entry Point]
                    BUFFER_CH[CCodecBufferChannel<br />Buffer Delivery]
                    end

                    subgraph CODEC2_CLIENT ["Codec2 Client"]
                    C2_CLIENT[Codec2Client]
                    LISTENER[mClientListener<br />Callbacks]
                    end

                    subgraph HAL ["HAL Interface - android.hardware.media.c2"]
                    HIDL_AIDL[HIDL/AIDL<br />IPC Layer]
                    end

                    subgraph VENDOR ["Vendor Implementation"]
                    COMP_STORE[C2ComponentStore<br />Library Entry Point]
                    C2_COMP[C2Component<br />Encoder/Decoder]
                    C2_INTF[C2Component Interface<br />Configuration]
                    C2_ALLOC[C2Allocator<br />Memory Management]
                    C2_POOL[C2BlockPool<br />Buffer Pool]
                    end

                    subgraph HW ["Hardware"]
                    HW_CODEC[Hardware Codec<br />DSP/GPU]
                    ION[ION Allocator]
                    GRALLOC[Gralloc<br />Graphics Buffer]
                    end

                    MEDIA_APP --> MEDIACODEC
                    MEDIACODEC --> CCODEC
                    CCODEC --> BUFFER_CH
                    CCODEC --> C2_CLIENT
                    C2_CLIENT --> LISTENER
                    C2_CLIENT --> HIDL_AIDL

                    HIDL_AIDL --> COMP_STORE
                    COMP_STORE --> C2_COMP
                    C2_COMP --> C2_INTF
                    C2_COMP --> C2_ALLOC
                    C2_ALLOC --> C2_POOL

                    C2_COMP --> HW_CODEC
                    C2_ALLOC --> ION
                    C2_ALLOC --> GRALLOC

                </div>
            </div>

            <div class="highlight-box">
                <strong>í•µì‹¬ ì»´í¬ë„ŒíŠ¸:</strong>
                <ul>
                    <li><strong>CCodec</strong>: Stagefrightì™€ Codec 2.0 í”„ë ˆì„ì›Œí¬ ê°„ ì¸í„°í˜ì´ìŠ¤</li>
                    <li><strong>Codec2Client</strong>: CCodecì´ Codec 2.0 ì»´í¬ë„ŒíŠ¸ì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸</li>
                    <li><strong>C2ComponentStore</strong>: ë²¤ë”ë³„ ì½”ë± ë¼ì´ë¸ŒëŸ¬ë¦¬ ì§„ì…ì </li>
                    <li><strong>C2Component</strong>: ì‹¤ì œ ì¸ì½”ë”/ë””ì½”ë” êµ¬í˜„ì²´</li>
                    <li><strong>C2Allocator</strong>: Zero-Copyë¥¼ ìœ„í•œ ë©”ëª¨ë¦¬ í• ë‹¹ ë° ê´€ë¦¬</li>
                </ul>
            </div>
        </section>

        <!-- Section 3: Component Lifecycle -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">3</span>
                ì»´í¬ë„ŒíŠ¸ ìƒëª…ì£¼ê¸°
            </h2>
            <p class="section-description">
                C2Componentì˜ ìƒì„±ë¶€í„° ì†Œë©¸ê¹Œì§€ì˜ ì „ì²´ ìƒëª…ì£¼ê¸°ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.
            </p>

            <div class="mermaid-container">
                <div class="mermaid">
                    sequenceDiagram
                    participant App
                    participant MC as MediaCodec
                    participant CC as CCodec
                    participant C2C as Codec2Client
                    participant HAL as HIDL/AIDL
                    participant CS as C2ComponentStore
                    participant COMP as C2Component

                    App->>MC: createByCodecName()
                    MC->>CC: CCodec ìƒì„±
                    CC->>C2C: Codec2Client::CreateFromService()
                    C2C->>HAL: HAL Service ì—°ê²°
                    HAL->>CS: getComponentStore()
                    CS-->>HAL: ComponentStore ë°˜í™˜
                    HAL-->>C2C: Store ë°˜í™˜

                    App->>MC: configure()
                    MC->>CC: configure()
                    CC->>C2C: createComponent()
                    C2C->>HAL: createComponent(name)
                    HAL->>CS: createComponent()
                    CS->>COMP: C2Component ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
                    COMP-->>CS: Component ë°˜í™˜
                    CS-->>HAL: Component ë°˜í™˜
                    HAL-->>C2C: Component ë°˜í™˜
                    C2C-->>CC: Component ë°˜í™˜

                    CC->>C2C: query() - íŒŒë¼ë¯¸í„° ì¡°íšŒ
                    C2C->>COMP: Component Interface ì ‘ê·¼
                    COMP-->>C2C: ì„¤ì •ê°’ ë°˜í™˜

                    App->>MC: start()
                    MC->>CC: start()
                    CC->>C2C: start()
                    C2C->>HAL: start()
                    HAL->>COMP: start()

                    loop ë°ì´í„° ì²˜ë¦¬
                    App->>MC: queueInputBuffer()
                    MC->>CC: C2Work ìƒì„±
                    CC->>C2C: queue(C2Work)
                    C2C->>HAL: queue(work)
                    HAL->>COMP: process(work)
                    COMP->>COMP: ì¸ì½”ë”©/ë””ì½”ë”©
                    COMP-->>HAL: onWorkDone()
                    HAL-->>C2C: onWorkDone()
                    C2C-->>CC: Listener ì½œë°±
                    CC-->>MC: ì¶œë ¥ ë²„í¼ ì „ë‹¬
                    MC-->>App: dequeueOutputBuffer()
                    end

                    App->>MC: stop()
                    MC->>CC: stop()
                    CC->>C2C: stop()
                    C2C->>HAL: stop()
                    HAL->>COMP: stop()

                    App->>MC: release()
                    MC->>CC: release()
                    CC->>C2C: release()
                    C2C->>HAL: release()
                    HAL->>COMP: release()
                    COMP->>COMP: ë¦¬ì†ŒìŠ¤ ì •ë¦¬
                </div>
            </div>
        </section>

        <!-- Section 4: Buffer Management -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">4</span>
                Zero-Copy ë²„í¼ ê´€ë¦¬
            </h2>
            <p class="section-description">
                Codec 2.0ì˜ í•µì‹¬ ê¸°ëŠ¥ì¸ Zero-Copy ë²„í¼ ë©”ì»¤ë‹ˆì¦˜ì„ ìƒì„¸íˆ ì„¤ëª…í•©ë‹ˆë‹¤.
            </p>

            <div class="mermaid-container">
                <div class="mermaid">
                    flowchart TB
                    START[ì•±ì—ì„œ ì¸ì½”ë”©/ë””ì½”ë”© ìš”ì²­] --> ALLOC{ë²„í¼ í• ë‹¹ í•„ìš”?}

                    ALLOC -->|Yes| C2ALLOC[C2Allocator í˜¸ì¶œ]
                    C2ALLOC --> POOL[C2BlockPoolì—ì„œ<br />ë©”ëª¨ë¦¬ ë¸”ë¡ íšë“]

                    POOL --> TYPE{ë²„í¼ íƒ€ì…}
                    TYPE -->|Linear| ION_ALLOC[ION Allocator<br />ì—°ì† ë©”ëª¨ë¦¬]
                    TYPE -->|Graphic| GRALLOC_ALLOC[Gralloc<br />ê·¸ë˜í”½ ë²„í¼]

                    ION_ALLOC --> C2BUFFER[C2Buffer ìƒì„±]
                    GRALLOC_ALLOC --> C2BUFFER

                    ALLOC -->|No| C2BUFFER

                    C2BUFFER --> C2WORK[C2Workì— C2Buffer ì²¨ë¶€]
                    C2WORK --> QUEUE[Componentì— queue]

                    QUEUE --> PROCESS[Componentì—ì„œ ì²˜ë¦¬]
                    PROCESS --> ZEROCOPY{Zero-Copy ê°€ëŠ¥?}

                    ZEROCOPY -->|Yes| DIRECT[ë©”ëª¨ë¦¬ ì§ì ‘ ì ‘ê·¼<br />ë³µì‚¬ ì—†ìŒ]
                    ZEROCOPY -->|No| COPY[í•„ìš”ì‹œ ë³µì‚¬]

                    DIRECT --> OUTPUT[ì¶œë ¥ C2Buffer ìƒì„±]
                    COPY --> OUTPUT

                    OUTPUT --> RETURN[ì•±ìœ¼ë¡œ ë°˜í™˜]
                    RETURN --> RECYCLE[C2BlockPoolë¡œ ì¬í™œìš©]
                    RECYCLE --> END[ì™„ë£Œ]

                </div>
            </div>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ”§ ë²„í¼ ê´€ë¦¬ ì»´í¬ë„ŒíŠ¸
            </h3>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“¦</span>
                        C2Buffer
                    </h3>
                    <div class="card-description">
                        <p><strong>ë¯¸ë””ì–´ ë°ì´í„° ì»¨í…Œì´ë„ˆ</strong></p>
                        <ul>
                            <li>ì˜¤ë””ì˜¤/ë¹„ë””ì˜¤ í”„ë ˆì„ ë‹´ê¸°</li>
                            <li>ë©”íƒ€ë°ì´í„° í¬í•¨</li>
                            <li>Zero-Copy ì§€ì›</li>
                            <li>í”„ë¡œì„¸ìŠ¤ ê°„ ì „ë‹¬ ê°€ëŠ¥</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ›ï¸</span>
                        C2Allocator
                    </h3>
                    <div class="card-description">
                        <p><strong>ë©”ëª¨ë¦¬ í• ë‹¹ ê´€ë¦¬ì</strong></p>
                        <ul>
                            <li>ë²„í¼ ë©”ëª¨ë¦¬ í• ë‹¹</li>
                            <li>ì¬í™œìš© ë° ìƒíƒœ ì¶”ì </li>
                            <li>ION/Gralloc í™œìš©</li>
                            <li>ë©”ëª¨ë¦¬ íš¨ìœ¨ì„± ìµœì í™”</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸŠ</span>
                        C2BlockPool
                    </h3>
                    <div class="card-description">
                        <p><strong>ë²„í¼ í’€ ê´€ë¦¬</strong></p>
                        <ul>
                            <li>ë©”ëª¨ë¦¬ ë¸”ë¡ í’€ë§</li>
                            <li>ë¹ ë¥¸ í• ë‹¹/í•´ì œ</li>
                            <li>ë©”ëª¨ë¦¬ ì¬ì‚¬ìš©</li>
                            <li>ì„±ëŠ¥ í–¥ìƒ</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âš¡</span>
                        Zero-Copy ì¥ì 
                    </h3>
                    <div class="card-description">
                        <p><strong>ì„±ëŠ¥ ìµœì í™”</strong></p>
                        <ul>
                            <li>CPU ì‚¬ìš©ëŸ‰ ê°ì†Œ</li>
                            <li>ë©”ëª¨ë¦¬ ëŒ€ì—­í­ ì ˆì•½</li>
                            <li>ì§€ì—° ì‹œê°„ ë‹¨ì¶•</li>
                            <li>ì „ë ¥ ì†Œë¹„ ê°ì†Œ</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 5: C2Component Structure -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">5</span>
                C2Component êµ¬ì¡°
            </h2>
            <p class="section-description">
                ì‹¤ì œ ì¸ì½”ë”/ë””ì½”ë”ë¥¼ êµ¬í˜„í•˜ëŠ” C2Componentì˜ ë‚´ë¶€ êµ¬ì¡°ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.
            </p>

            <div class="mermaid-container">
                <div class="mermaid">
                    graph TB
                    subgraph COMPONENT ["C2Component"]
                    COMP_INTF[C2Component Interface<br />íŒŒë¼ë¯¸í„° ì„¤ì •]
                    COMP_IMPL[Component Implementation<br />ì‹¤ì œ ì½”ë± ë¡œì§]

                    subgraph CONFIG ["Configuration"]
                    PARAMS[C2Param<br />ì„¤ì • íŒŒë¼ë¯¸í„°]
                    QUERY[Query<br />ëŠ¥ë ¥ ì¡°íšŒ]
                    TUNING[Tuning<br />ë™ì  ì¡°ì •]
                    end

                    subgraph PROCESSING ["Processing"]
                    INPUT_Q[Input Queue<br />ì…ë ¥ ëŒ€ê¸°ì—´]
                    WORK_PROC[Work Processor<br />ì‘ì—… ì²˜ë¦¬]
                    OUTPUT_Q[Output Queue<br />ì¶œë ¥ ëŒ€ê¸°ì—´]
                    end

                    subgraph CALLBACKS ["Callbacks"]
                    WORK_DONE[onWorkDone<br />ì‘ì—… ì™„ë£Œ]
                    TRIGGERED[onTriggered<br />ì´ë²¤íŠ¸ ë°œìƒ]
                    ERROR[onError<br />ì—ëŸ¬ ì²˜ë¦¬]
                    end
                    end

                    COMP_INTF --> CONFIG
                    COMP_IMPL --> PROCESSING
                    COMP_IMPL --> CALLBACKS

                    INPUT_Q --> WORK_PROC
                    WORK_PROC --> OUTPUT_Q

                    WORK_PROC --> WORK_DONE
                    WORK_PROC --> TRIGGERED
                    WORK_PROC --> ERROR

                </div>
            </div>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ” ì£¼ìš” ì¸í„°í˜ì´ìŠ¤
            </h3>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âš™ï¸</span>
                        C2Component Interface
                    </h3>
                    <div class="card-description">
                        <p><strong>ì„¤ì • ë° ì¿¼ë¦¬</strong></p>
                        <ul>
                            <li><code>query()</code>: íŒŒë¼ë¯¸í„° ì¡°íšŒ</li>
                            <li><code>config()</code>: íŒŒë¼ë¯¸í„° ì„¤ì •</li>
                            <li><code>querySupportedParams()</code>: ì§€ì› íŒŒë¼ë¯¸í„° í™•ì¸</li>
                            <li><code>querySupportedValues()</code>: ì§€ì› ê°’ ë²”ìœ„</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”„</span>
                        Work Processing
                    </h3>
                    <div class="card-description">
                        <p><strong>ë°ì´í„° ì²˜ë¦¬</strong></p>
                        <ul>
                            <li><code>queue()</code>: C2Work ì œì¶œ</li>
                            <li><code>flush()</code>: ëŒ€ê¸°ì—´ ë¹„ìš°ê¸°</li>
                            <li><code>drain()</code>: ì¶œë ¥ ì™„ë£Œ ëŒ€ê¸°</li>
                            <li><code>start()</code> / <code>stop()</code>: ìƒíƒœ ì œì–´</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“Š</span>
                        C2Param
                    </h3>
                    <div class="card-description">
                        <p><strong>íŒŒë¼ë¯¸í„° íƒ€ì…</strong></p>
                        <ul>
                            <li>ë¹„íŠ¸ë ˆì´íŠ¸, í”„ë ˆì„ë ˆì´íŠ¸</li>
                            <li>í•´ìƒë„, ìƒ‰ìƒ í¬ë§·</li>
                            <li>í”„ë¡œíŒŒì¼, ë ˆë²¨</li>
                            <li>ë²„í¼ í¬ê¸°, ì§€ì—° ì‹œê°„</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ¯</span>
                        Listener Callbacks
                    </h3>
                    <div class="card-description">
                        <p><strong>ì´ë²¤íŠ¸ ì•Œë¦¼</strong></p>
                        <ul>
                            <li><code>onWorkDone()</code>: ì‘ì—… ì™„ë£Œ</li>
                            <li><code>onTriggered()</code>: íŠ¸ë¦¬ê±° ì´ë²¤íŠ¸</li>
                            <li><code>onError()</code>: ì—ëŸ¬ ë°œìƒ</li>
                            <li><code>onFramesRendered()</code>: í”„ë ˆì„ ë Œë”ë§</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 6: HAL Communication -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">6</span>
                HAL í†µì‹  ë©”ì»¤ë‹ˆì¦˜
            </h2>
            <p class="section-description">
                HIDL/AIDLì„ í†µí•œ í”„ë ˆì„ì›Œí¬ì™€ ë²¤ë” êµ¬í˜„ ê°„ í†µì‹  ë°©ì‹ì„ ì„¤ëª…í•©ë‹ˆë‹¤.
            </p>

            <div class="mermaid-container">
                <div class="mermaid">
                    sequenceDiagram
                    participant FC as Framework<br />Codec2Client
                    participant HIDL as HIDL/AIDL<br />Binder IPC
                    participant VS as Vendor Service<br />C2ComponentStore
                    participant VC as Vendor<br />C2Component

                    Note over FC,VC: ì»´í¬ë„ŒíŠ¸ ìƒì„±
                    FC->>HIDL: createComponent(name)
                    HIDL->>VS: createComponent()
                    VS->>VC: new C2Component()
                    VC-->>VS: Component ì¸ìŠ¤í„´ìŠ¤
                    VS-->>HIDL: IComponent ë°˜í™˜
                    HIDL-->>FC: Component Proxy

                    Note over FC,VC: íŒŒë¼ë¯¸í„° ì„¤ì •
                    FC->>HIDL: config(params)
                    HIDL->>HIDL: ë°ì´í„° ì§ë ¬í™”
                    HIDL->>VC: config()
                    VC->>VC: íŒŒë¼ë¯¸í„° ì ìš©
                    VC-->>HIDL: ê²°ê³¼
                    HIDL->>HIDL: ë°ì´í„° ì—­ì§ë ¬í™”
                    HIDL-->>FC: ì„¤ì • ì™„ë£Œ

                    Note over FC,VC: Work ì²˜ë¦¬
                    FC->>HIDL: queue(workBundle)
                    HIDL->>HIDL: C2Work ì§ë ¬í™”<br />C2Buffer FD ì „ë‹¬
                    HIDL->>VC: queue()
                    VC->>VC: ì¸ì½”ë”©/ë””ì½”ë”©
                    VC->>HIDL: onWorkDone()
                    HIDL->>HIDL: ê²°ê³¼ ì§ë ¬í™”
                    HIDL->>FC: Listener ì½œë°±
                    FC->>FC: ì¶œë ¥ ì²˜ë¦¬
                </div>
            </div>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ”Œ HAL ì¸í„°í˜ì´ìŠ¤ ê³„ì¸µ
            </h3>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“¡</span>
                        HIDL (Legacy)
                    </h3>
                    <div class="card-description">
                        <p><strong>Hardware Interface Definition Language</strong></p>
                        <ul>
                            <li>Android 10~12ì—ì„œ ì£¼ë¡œ ì‚¬ìš©</li>
                            <li>Binderized HAL</li>
                            <li>í”„ë¡œì„¸ìŠ¤ ê°„ í†µì‹ </li>
                            <li>ì•ˆì •ì ì¸ ABI</li>
                            <li><span style="color: #94a3b8; font-size: 0.9em;">í˜„ì¬ë„ í˜¸í™˜ ê°€ëŠ¥</span></li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ†•</span>
                        AIDL (Current)
                    </h3>
                    <div class="card-description">
                        <p><strong>Android Interface Definition Language</strong></p>
                        <ul>
                            <li><strong>Android 11</strong>: Stable AIDL ë„ì…</li>
                            <li><strong>Android 13+</strong>: HIDLâ†’AIDL ì „í™˜ ê¶Œì¥</li>
                            <li>í–¥ìƒëœ ì•ˆì •ì„± ë° ìœ ì—°ì„±</li>
                            <li>ê°„ì†Œí™”ëœ êµ¬ë¬¸</li>
                            <li>í•˜ìœ„ í˜¸í™˜ì„± ìœ ì§€</li>
                        </ul>
                        <p style="margin-top: 8px; padding: 8px; background: rgba(16, 185, 129, 0.1); border-left: 3px solid #10b981; font-size: 0.85em;">
                            <strong>ì°¸ê³ </strong>: OEMì€ HIDLê³¼ AIDL ì¤‘ ì„ íƒ ê°€ëŠ¥. AIDL ì „í™˜ì€ ê¶Œì¥ì´ì§€ë§Œ í•„ìˆ˜ ì•„ë‹˜.
                        </p>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”„</span>
                        ë°ì´í„° ì§ë ¬í™”
                    </h3>
                    <div class="card-description">
                        <p><strong>í”„ë¡œì„¸ìŠ¤ ê°„ ë°ì´í„° ì „ë‹¬</strong></p>
                        <ul>
                            <li>C2Param ì§ë ¬í™”</li>
                            <li>C2Buffer FD ê³µìœ </li>
                            <li>Zero-Copy ìœ ì§€</li>
                            <li>íš¨ìœ¨ì ì¸ IPC</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ›¡ï¸</span>
                        ë³´ì•ˆ ë° ê²©ë¦¬
                    </h3>
                    <div class="card-description">
                        <p><strong>í”„ë¡œì„¸ìŠ¤ ë¶„ë¦¬</strong></p>
                        <ul>
                            <li>ë²¤ë” í”„ë¡œì„¸ìŠ¤ ê²©ë¦¬</li>
                            <li>í¬ë˜ì‹œ ì˜í–¥ ìµœì†Œí™”</li>
                            <li>ê¶Œí•œ ë¶„ë¦¬</li>
                            <li>SELinux ì •ì±… ì ìš©</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 7: Codec 2.0 vs OMX -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">7</span>
                Codec 2.0 vs OpenMAX ë¹„êµ
            </h2>
            <p class="section-description">
                ê¸°ì¡´ OpenMAX ILê³¼ Codec 2.0ì˜ ì£¼ìš” ì°¨ì´ì ì„ ë¹„êµí•©ë‹ˆë‹¤.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”´</span>
                        OpenMAX IL (Legacy)
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>ë²„í¼ ê´€ë¦¬</strong>: ë³µì‚¬ ê¸°ë°˜, ì„±ëŠ¥ ì˜¤ë²„í—¤ë“œ</li>
                            <li><strong>API</strong>: ë³µì¡í•˜ê³  ê²½ì§ëœ êµ¬ì¡°</li>
                            <li><strong>ì—…ë°ì´íŠ¸</strong>: OS ì—…ë°ì´íŠ¸ í•„ìš”</li>
                            <li><strong>í™•ì¥ì„±</strong>: ì œí•œì </li>
                            <li><strong>HAL</strong>: ì§ì ‘ í†µí•©, ë³´ì•ˆ ì·¨ì•½</li>
                            <li><strong>í•„í„°</strong>: ì§€ì› ì œí•œì </li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸŸ¢</span>
                        Codec 2.0 (Modern)
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>ë²„í¼ ê´€ë¦¬</strong>: Zero-Copy, ê³ ì„±ëŠ¥</li>
                            <li><strong>API</strong>: ë‹¨ìˆœí•˜ê³  ìœ ì—°í•œ êµ¬ì¡°</li>
                            <li><strong>ì—…ë°ì´íŠ¸</strong>: Mainline ëª¨ë“ˆ, ë…ë¦½ ì—…ë°ì´íŠ¸</li>
                            <li><strong>í™•ì¥ì„±</strong>: ì»´í¬ë„ŒíŠ¸ ì²´ì´ë‹, í”ŒëŸ¬ê·¸ì¸</li>
                            <li><strong>HAL</strong>: HIDL/AIDL ê¸°ë°˜, ë³´ì•ˆ ê°•í™”</li>
                            <li><strong>í•„í„°</strong>: í•„í„° í”ŒëŸ¬ê·¸ì¸ ì§€ì› (HDRâ†’SDR ë“±)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="warning-box">
                <strong>âš ï¸ ë§ˆì´ê·¸ë ˆì´ì…˜ ê³ ë ¤ì‚¬í•­:</strong>
                <ul style="margin-top: 10px; padding-left: 20px;">
                    <li><strong>Android 9 (Pie)</strong>: Codec 2.0 ë„ì…</li>
                    <li><strong>Android 10 (Q)</strong>: Codec 2.0ì´ ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •</li>
                    <li><strong>Android 11 (R)</strong>: Codec 2.0 ì™„ì „ ì „í™˜ ê¶Œì¥</li>
                    <li><strong>Android 12 (S)+</strong>: OMX IL <span style="color: #f59e0b;">deprecated</span>, vendor íŒŒí‹°ì…˜ì—ì„œ ì—¬ì „íˆ ì‚¬ìš© ê°€ëŠ¥</li>
                    <li>ê¸°ì¡´ OMX ì½”ë±ì€ <code>OMXStore</code> í˜¸í™˜ì„± ë ˆì´ì–´ë¥¼ í†µí•´ ê³„ì† ë™ì‘ (legacy ì§€ì›)</li>
                    <li>ìƒˆë¡œìš´ í•˜ë“œì›¨ì–´ ì½”ë±ì€ Codec 2.0ìœ¼ë¡œ êµ¬í˜„ <strong>í•„ìˆ˜</strong> (Android 13+)</li>
                    <li>ë²¤ë”ëŠ” <code>C2ComponentStore</code>ë¥¼ í†µí•´ ì½”ë± ë…¸ì¶œ</li>
                </ul>
                <p style="margin-top: 12px; padding: 10px; background: rgba(245, 158, 11, 0.1); border-left: 3px solid #f59e0b; font-size: 0.95rem; line-height: 1.6;">
                    <strong>ì°¸ê³ </strong>: OMX ILì˜ ì™„ì „ ì œê±° ì‹œì ì€ ëª…í™•í•˜ì§€ ì•Šìœ¼ë©°, vendor íŒŒí‹°ì…˜ì—ì„œ ë ˆê±°ì‹œ ì§€ì›ì„ ìœ„í•´ ê³„ì† ìœ ì§€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    AOSP Media Modules ë¬¸ì„œ(<a href="https://source.android.com/docs/core/media/media-modules" style="color: #60a5fa;">ë§í¬</a>)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.
                </p>
            </div>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 50px; margin-bottom: 20px;">
                ğŸ“Š Android ë²„ì „ë³„ ë¯¸ë””ì–´ ì½”ë± API ë³€ì²œì‚¬
            </h3>
            <div style="overflow-x: auto;">
                <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
                    <thead>
                        <tr style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(139, 92, 246, 0.2));">
                            <th style="padding: 12px; border: 1px solid rgba(255,255,255,0.1); text-align: left;">Android ë²„ì „</th>
                            <th style="padding: 12px; border: 1px solid rgba(255,255,255,0.1); text-align: left;">ì½”ë± ìŠ¤íƒ</th>
                            <th style="padding: 12px; border: 1px solid rgba(255,255,255,0.1); text-align: left;">HAL ì¸í„°í˜ì´ìŠ¤</th>
                            <th style="padding: 12px; border: 1px solid rgba(255,255,255,0.1); text-align: left;">ì£¼ìš” ë³€ê²½ì‚¬í•­</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);"><strong>Android 7.0 (Nougat)</strong><br><small style="color: #94a3b8;">API 24</small></td>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);">OMX IL 1.1.2</td>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);">ì§ì ‘ ì—°ê²°</td>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);">
                                â€¢ MediaCodec ìƒŒë“œë°•ì‹± ë„ì…<br>
                                â€¢ í”„ë¡œì„¸ìŠ¤ ë¶„ë¦¬ ê°•í™”
                            </td>
                        </tr>
                        <tr style="background: rgba(255,255,255,0.02);">
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);"><strong>Android 8.0 (Oreo)</strong><br><small style="color: #94a3b8;">API 26</small></td>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);">OMX IL (Legacy)</td>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);"><span style="color: #10b981;">HIDL 1.0</span></td>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);">
                                â€¢ <strong>Project Treble</strong> ë„ì…<br>
                                â€¢ Binderized HAL (HIDL)
                            </td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);"><strong>Android 9.0 (Pie)</strong><br><small style="color: #94a3b8;">API 28</small></td>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);"><span style="color: #3b82f6;">Codec 2.0 ë„ì…</span></td>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);">HIDL 1.0/1.1</td>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);">
                                â€¢ Codec 2.0 ì²« ë„ì… (ì„ íƒì‚¬í•­)<br>
                                â€¢ Zero-Copy ë²„í¼ ê´€ë¦¬
                            </td>
                        </tr>
                        <tr style="background: rgba(255,255,255,0.02);">
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);"><strong>Android 10 (Q)</strong><br><small style="color: #94a3b8;">API 29</small></td>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);"><span style="color: #10b981;">Codec 2.0 ê¸°ë³¸ê°’</span></td>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);">HIDL 1.1/1.2</td>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);">
                                â€¢ <strong>Project Mainline</strong> ë„ì…<br>
                                â€¢ Media APEX ëª¨ë“ˆ ë…ë¦½ ì—…ë°ì´íŠ¸
                            </td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);"><strong>Android 11 (R)</strong><br><small style="color: #94a3b8;">API 30</small></td>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);">Codec 2.0</td>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);">HIDL 1.2 / <span style="color: #10b981;">AIDL</span></td>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);">
                                â€¢ <strong>Stable AIDL</strong> ë„ì…<br>
                                â€¢ Codec 2.0 ì™„ì „ ì „í™˜ ê¶Œì¥
                            </td>
                        </tr>
                        <tr style="background: rgba(255,255,255,0.02);">
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);"><strong>Android 12 (S)</strong><br><small style="color: #94a3b8;">API 31</small></td>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);">Codec 2.0</td>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);">HIDL/AIDL í˜¼ìš©</td>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);">
                                â€¢ <span style="color: #f59e0b;">OMX IL deprecated</span><br>
                                â€¢ vendor íŒŒí‹°ì…˜ì—ì„œ ì—¬ì „íˆ ì§€ì›
                            </td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);"><strong>Android 13 (T)</strong><br><small style="color: #94a3b8;">API 33</small></td>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);">Codec 2.0 ì™„ì „ ì „í™˜</td>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);"><span style="color: #10b981;">AIDL ê¶Œì¥</span></td>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);">
                                â€¢ HIDLâ†’AIDL ì „í™˜ ê¶Œì¥ ì‹œì‘<br>
                                â€¢ ìƒˆ HW ì½”ë± Codec 2.0 í•„ìˆ˜
                            </td>
                        </tr>
                        <tr style="background: rgba(255,255,255,0.02);">
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);"><strong>Android 14 (U)</strong><br><small style="color: #94a3b8;">API 34</small></td>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);">Codec 2.0</td>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);">AIDL</td>
                            <td style="padding: 12px; border: 1px solid rgba(255,255,255,0.1);">
                                â€¢ AIDL ì•ˆì •í™”<br>
                                â€¢ Media3 í†µí•© ê°•í™”
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div style="margin-top: 20px; padding: 16px; background: rgba(16, 185, 129, 0.1); border-left: 4px solid #10b981; border-radius: 8px;">
                <p style="margin: 0; color: #e5e7eb; line-height: 1.8; font-size: 0.95rem;">
                    <strong>ğŸ’¡ Key Insights</strong><br>
                    â€¢ <strong>Android 9</strong>: Codec 2.0 ì²« ë„ì… (ì„ íƒì‚¬í•­)<br>
                    â€¢ <strong>Android 10</strong>: Codec 2.0 ê¸°ë³¸ê°’ + Mainline ëª¨ë“ˆí™”<br>
                    â€¢ <strong>Android 11</strong>: Stable AIDL ë„ì… (HIDLê³¼ ë³‘í–‰)<br>
                    â€¢ <strong>Android 12</strong>: OMX IL deprecated (ì™„ì „ ì œê±° ì•„ë‹˜)<br>
                    â€¢ <strong>Android 13+</strong>: AIDL ì „í™˜ ê¶Œì¥ + Codec 2.0 í•„ìˆ˜
                </p>
            </div>
        </section>

        <!-- Section 8: MediaCodec API Usage Examples -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">8</span>
                MediaCodec API ì‚¬ìš© ì˜ˆì‹œ
            </h2>
            <p class="section-description">
                ì•± ê°œë°œìê°€ MediaCodec APIë¥¼ í†µí•´ Codec 2.0ì„ ì‚¬ìš©í•˜ëŠ” ì‹¤ì œ ì½”ë“œ ì˜ˆì‹œì…ë‹ˆë‹¤.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ¬</span>
                        ë¹„ë””ì˜¤ ë””ì½”ë” ì´ˆê¸°í™”
                    </h3>
                    <div class="card-description">
                        <p><strong>Kotlin ì½”ë“œ ì˜ˆì‹œ</strong></p>
                        <pre style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 0.85rem; line-height: 1.5;"><code>// H.264 ë¹„ë””ì˜¤ ë””ì½”ë” ìƒì„±
val decoder = MediaCodec.createDecoderByType("video/avc")

// MediaFormat ì„¤ì •
val format = MediaFormat().apply {
    setString(MediaFormat.KEY_MIME, "video/avc")
    setInteger(MediaFormat.KEY_WIDTH, 1920)
    setInteger(MediaFormat.KEY_HEIGHT, 1080)
    setInteger(MediaFormat.KEY_FRAME_RATE, 30)
}

// Surface ì¶œë ¥ ì„¤ì • (í™”ë©´ ë Œë”ë§)
decoder.configure(format, surface, null, 0)
decoder.start()

// ë˜ëŠ” ByteBuffer ì¶œë ¥ (í›„ì²˜ë¦¬ìš©)
// decoder.configure(format, null, null, 0)</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“¥</span>
                        ì…ë ¥ ë²„í¼ ì²˜ë¦¬
                    </h3>
                    <div class="card-description">
                        <p><strong>ì••ì¶•ëœ ë¹„ë””ì˜¤ í”„ë ˆì„ ì…ë ¥</strong></p>
                        <pre style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 0.85rem; line-height: 1.5;"><code>// ì…ë ¥ ë²„í¼ ì¸ë±ìŠ¤ íšë“ (íƒ€ì„ì•„ì›ƒ 10ms)
val inputIndex = decoder.dequeueInputBuffer(10000)

if (inputIndex >= 0) {
    val inputBuffer = decoder.getInputBuffer(inputIndex)
    inputBuffer?.clear()

    // ì••ì¶•ëœ H.264 NAL ìœ ë‹› ë³µì‚¬
    val sampleSize = extractor.readSampleData(inputBuffer, 0)
    val presentationTimeUs = extractor.sampleTime

    decoder.queueInputBuffer(
        inputIndex,
        0,
        sampleSize,
        presentationTimeUs,
        0  // flags
    )

    extractor.advance()
}</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“¤</span>
                        ì¶œë ¥ ë²„í¼ ì²˜ë¦¬
                    </h3>
                    <div class="card-description">
                        <p><strong>ë””ì½”ë”©ëœ í”„ë ˆì„ ìˆ˜ì‹ </strong></p>
                        <pre style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 0.85rem; line-height: 1.5;"><code>val bufferInfo = MediaCodec.BufferInfo()
val outputIndex = decoder.dequeueOutputBuffer(bufferInfo, 10000)

when (outputIndex) {
    MediaCodec.INFO_OUTPUT_FORMAT_CHANGED -> {
        val newFormat = decoder.outputFormat
        Log.d(TAG, "Output format: $newFormat")
    }
    MediaCodec.INFO_TRY_AGAIN_LATER -> {
        // ì¶œë ¥ ë²„í¼ ì—†ìŒ, ëŒ€ê¸°
    }
    else -> {
        if (outputIndex >= 0) {
            // Surface ë Œë”ë§
            decoder.releaseOutputBuffer(outputIndex, true)

            // ë˜ëŠ” ByteBuffer ì ‘ê·¼
            // val outputBuffer = decoder.getOutputBuffer(outputIndex)
            // decoder.releaseOutputBuffer(outputIndex, false)
        }
    }
}</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ¥</span>
                        ë¹„ë””ì˜¤ ì¸ì½”ë” ì˜ˆì‹œ
                    </h3>
                    <div class="card-description">
                        <p><strong>H.264 ì¸ì½”ë”© ì„¤ì •</strong></p>
                        <pre style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 0.85rem; line-height: 1.5;"><code>val encoder = MediaCodec.createEncoderByType("video/avc")

val format = MediaFormat.createVideoFormat(
    "video/avc", 1920, 1080
).apply {
    setInteger(MediaFormat.KEY_COLOR_FORMAT,
        MediaCodecInfo.CodecCapabilities.COLOR_FormatSurface)
    setInteger(MediaFormat.KEY_BIT_RATE, 6000000)  // 6Mbps
    setInteger(MediaFormat.KEY_FRAME_RATE, 30)
    setInteger(MediaFormat.KEY_I_FRAME_INTERVAL, 1)  // 1ì´ˆ
    setInteger(MediaFormat.KEY_PROFILE,
        MediaCodecInfo.CodecProfileLevel.AVCProfileHigh)
}

val inputSurface = MediaCodec.createPersistentInputSurface()
encoder.configure(format, null, null,
    MediaCodec.CONFIGURE_FLAG_ENCODE)
encoder.setInputSurface(inputSurface)
encoder.start()</code></pre>
                    </div>
                </div>
            </div>

            <div class="highlight-box" style="margin-top: 30px;">
                <strong>ğŸ’¡ Codec 2.0 ìë™ ì„ íƒ</strong><br/>
                <code>MediaCodec.createDecoderByType()</code>ì„ ì‚¬ìš©í•˜ë©´ ì‹œìŠ¤í…œì´ ìë™ìœ¼ë¡œ ìµœì ì˜ ì½”ë±ì„ ì„ íƒí•©ë‹ˆë‹¤:
                <ul style="margin-top: 10px; padding-left: 20px;">
                    <li><strong>Android 10+</strong>: Codec 2.0 êµ¬í˜„ ìš°ì„  ì„ íƒ</li>
                    <li><strong>í•˜ë“œì›¨ì–´ ì½”ë±</strong>: ì‚¬ìš© ê°€ëŠ¥í•œ ê²½ìš° ìë™ ì‚¬ìš©</li>
                    <li><strong>ì†Œí”„íŠ¸ì›¨ì–´ í´ë°±</strong>: HW ì‹¤íŒ¨ ì‹œ SW ì½”ë±ìœ¼ë¡œ ì „í™˜</li>
                    <li><strong>ëª…ì‹œì  ì„ íƒ</strong>: <code>MediaCodec.createByCodecName("c2.android.avc.decoder")</code></li>
                </ul>
            </div>
        </section>

        <!-- Section 9: Vendor Implementation Guide -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">9</span>
                ë²¤ë” êµ¬í˜„ ê°€ì´ë“œ
            </h2>
            <p class="section-description">
                í•˜ë“œì›¨ì–´ ì œì¡°ì‚¬ê°€ ì»¤ìŠ¤í…€ Codec 2.0 ì»´í¬ë„ŒíŠ¸ë¥¼ êµ¬í˜„í•˜ê³  ë“±ë¡í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.
            </p>

            <div class="mermaid-container">
                <div class="mermaid">
                    graph TB
                    subgraph Implementation["ë²¤ë” êµ¬í˜„"]
                        COMP_IMPL["C2Component êµ¬í˜„<br/>(H.264/VP9/AV1 ë“±)"]
                        STORE_IMPL["C2ComponentStore êµ¬í˜„<br/>(Factory)"]
                        SERVICE["Codec2 HAL Service<br/>(HIDL/AIDL)"]
                    end

                    subgraph Build["ë¹Œë“œ ì„¤ì •"]
                        BP["Android.bp<br/>(cc_library_shared)"]
                        XML["media_codecs.xml<br/>(ì½”ë± ì„ ì–¸)"]
                        MANIFEST["manifest.xml<br/>(HAL Service)"]
                    end

                    subgraph Registration["ë“±ë¡ ë° ë°œê²¬"]
                        HWSERVICE["hwservicemanager<br/>(Service Registry)"]
                        FRAMEWORK["Framework<br/>(Codec2Client)"]
                    end

                    COMP_IMPL --> STORE_IMPL
                    STORE_IMPL --> SERVICE

                    BP --> COMP_IMPL
                    XML --> STORE_IMPL
                    MANIFEST --> SERVICE

                    SERVICE --> HWSERVICE
                    HWSERVICE --> FRAMEWORK
                </div>
            </div>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ“ êµ¬í˜„ ë‹¨ê³„
            </h3>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">1ï¸âƒ£</span>
                        C2Component êµ¬í˜„
                    </h3>
                    <div class="card-description">
                        <p><strong>ì»¤ìŠ¤í…€ ì½”ë± í´ë˜ìŠ¤ ì‘ì„±</strong></p>
                        <pre style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 0.85rem; line-height: 1.5;"><code>// vendor/mycompany/codec2/MyAvcDecoder.h
class MyAvcDecoder : public SimpleC2Component {
public:
    MyAvcDecoder(const char* name,
                 c2_node_id_t id,
                 const std::shared_ptr&lt;IntfImpl&gt;& intfImpl);

    // í•„ìˆ˜ ë©”ì„œë“œ êµ¬í˜„
    c2_status_t onInit() override;
    c2_status_t onStop() override;
    void onReset() override;
    void onRelease() override;
    c2_status_t onFlush_sm() override;
    void process(
        const std::unique_ptr&lt;C2Work&gt;& work,
        const std::shared_ptr&lt;C2BlockPool&gt;& pool
    ) override;

private:
    // í•˜ë“œì›¨ì–´ ë””ì½”ë” í•¸ë“¤
    void* mHwHandle;
};</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">2ï¸âƒ£</span>
                        C2ComponentStore êµ¬í˜„
                    </h3>
                    <div class="card-description">
                        <p><strong>ì»´í¬ë„ŒíŠ¸ íŒ©í† ë¦¬</strong></p>
                        <pre style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 0.85rem; line-height: 1.5;"><code>// MyComponentStore.cpp
class MyComponentStore : public C2ComponentStore {
public:
    MyComponentStore()
        : mReflector(std::make_shared&lt;C2ReflectorHelper&gt;()) {}

    c2_status_t createComponent(
        c2_node_id_t id,
        std::shared_ptr&lt;C2Component&gt;* component) override {

        if (name == "c2.vendor.avc.decoder") {
            *component = std::make_shared&lt;MyAvcDecoder&gt;(
                name, id, intfImpl);
            return C2_OK;
        }
        return C2_NOT_FOUND;
    }

    std::vector&lt;std::shared_ptr&lt;C2Component::Traits&gt;&gt;
    listComponents() override;
};</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">3ï¸âƒ£</span>
                        Android.bp ë¹Œë“œ ì„¤ì •
                    </h3>
                    <div class="card-description">
                        <p><strong>Soong ë¹Œë“œ íŒŒì¼</strong></p>
                        <pre style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 0.85rem; line-height: 1.5;"><code>// Android.bp
cc_library_shared {
    name: "libcodec2_vendor_mycompany",
    vendor: true,

    srcs: [
        "MyAvcDecoder.cpp",
        "MyComponentStore.cpp",
    ],

    shared_libs: [
        "libcodec2",
        "libcodec2_vndk",
        "libcodec2_soft_common",
        "liblog",
        "libutils",
    ],

    cflags: [
        "-Wall",
        "-Werror",
    ],
}</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">4ï¸âƒ£</span>
                        media_codecs.xml ì„ ì–¸
                    </h3>
                    <div class="card-description">
                        <p><strong>ì½”ë± ëŠ¥ë ¥ ì •ì˜</strong></p>
                        <pre style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 0.85rem; line-height: 1.5;"><code>&lt;!-- device/mycompany/mydevice/media_codecs.xml --&gt;
&lt;MediaCodecs&gt;
    &lt;Decoders&gt;
        &lt;MediaCodec name="c2.vendor.avc.decoder"
                    type="video/avc"&gt;
            &lt;Limit name="size" min="64x64" max="3840x2160"/&gt;
            &lt;Limit name="alignment" value="2x2"/&gt;
            &lt;Limit name="block-size" value="16x16"/&gt;
            &lt;Limit name="frame-rate" range="1-60"/&gt;
            &lt;Limit name="bitrate" range="1-120000000"/&gt;
            &lt;Feature name="adaptive-playback"/&gt;
            &lt;Feature name="secure-playback"/&gt;
        &lt;/MediaCodec&gt;
    &lt;/Decoders&gt;
&lt;/MediaCodecs&gt;</code></pre>
                    </div>
                </div>
            </div>

            <div class="warning-box" style="margin-top: 30px;">
                <strong>âš ï¸ ë²¤ë” êµ¬í˜„ ì£¼ì˜ì‚¬í•­:</strong>
                <ul style="margin-top: 10px; padding-left: 20px;">
                    <li><strong>ë„¤ì´ë° ê·œì¹™</strong>: <code>c2.vendor.&lt;company&gt;.&lt;codec&gt;.&lt;type&gt;</code> (ì˜ˆ: c2.vendor.qcom.avc.decoder)</li>
                    <li><strong>Secure Codec</strong>: DRM ì¬ìƒì„ ìœ„í•´ <code>.secure</code> ì„œí”½ìŠ¤ ì¶”ê°€</li>
                    <li><strong>SELinux</strong>: HAL ì„œë¹„ìŠ¤ì— ëŒ€í•œ ì ì ˆí•œ ì •ì±… ì„¤ì • í•„ìš”</li>
                    <li><strong>CDD ì¤€ìˆ˜</strong>: CDD(Compatibility Definition Document) ìš”êµ¬ì‚¬í•­ ë§Œì¡± í•„ìˆ˜</li>
                    <li><strong>CTS í…ŒìŠ¤íŠ¸</strong>: CTS MediaCodec í…ŒìŠ¤íŠ¸ í†µê³¼ í•„ìˆ˜</li>
                </ul>
            </div>
        </section>

        <!-- Section 10: Debugging and Troubleshooting -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">10</span>
                ë””ë²„ê¹… ë° íŠ¸ëŸ¬ë¸”ìŠˆíŒ…
            </h2>
            <p class="section-description">
                Codec 2.0 ê°œë°œ ë° í†µí•© ê³¼ì •ì—ì„œ ë°œìƒí•˜ëŠ” ì¼ë°˜ì ì¸ ë¬¸ì œì™€ í•´ê²° ë°©ë²•ì…ë‹ˆë‹¤.
            </p>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 20px; margin-bottom: 20px;">
                ğŸ” ë””ë²„ê¹… ë„êµ¬
            </h3>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“±</span>
                        adb logcat í•„í„°ë§
                    </h3>
                    <div class="card-description">
                        <p><strong>Codec 2.0 ê´€ë ¨ ë¡œê·¸ ì¶”ì¶œ</strong></p>
                        <pre style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 0.85rem; line-height: 1.5;"><code># Codec2 ì „ì²´ ë¡œê·¸
adb logcat -s Codec2Client Codec2 CCodec

# íŠ¹ì • ì»´í¬ë„ŒíŠ¸ë§Œ
adb logcat -s c2.android.avc.decoder

# HAL í†µì‹  ë¡œê·¸
adb logcat -s android.hardware.media.c2

# ë²„í¼ ê´€ë ¨ ë””ë²„ê·¸
adb logcat | grep -i "c2buffer\|c2work"

# ì—ëŸ¬ë§Œ í•„í„°ë§
adb logcat *:E | grep -i codec</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“Š</span>
                        dumpsys ëª…ë ¹ì–´
                    </h3>
                    <div class="card-description">
                        <p><strong>ì‹œìŠ¤í…œ ìƒíƒœ ì¡°íšŒ</strong></p>
                        <pre style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 0.85rem; line-height: 1.5;"><code># ì‚¬ìš© ê°€ëŠ¥í•œ Codec2 ì»´í¬ë„ŒíŠ¸ ëª©ë¡
adb shell dumpsys media.codec2

# MediaCodec ì¸ìŠ¤í„´ìŠ¤ ìƒíƒœ
adb shell dumpsys media.player

# í˜„ì¬ í™œì„±í™”ëœ ì½”ë± ì„¸ì…˜
adb shell dumpsys media.codec

# í•˜ë“œì›¨ì–´ ì½”ë± ì‚¬ìš© í˜„í™©
adb shell dumpsys media.resource_manager</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âš™ï¸</span>
                        ì‹œìŠ¤í…œ ì†ì„± (System Properties)
                    </h3>
                    <div class="card-description">
                        <p><strong>ëŸ°íƒ€ì„ ì„¤ì • ë³€ê²½</strong></p>
                        <pre style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 0.85rem; line-height: 1.5;"><code># Codec2 ê°•ì œ í™œì„±í™”
adb shell setprop debug.stagefright.ccodec 1

# OpenMAX ê°•ì œ ì‚¬ìš© (í…ŒìŠ¤íŠ¸ìš©)
adb shell setprop debug.stagefright.ccodec 0

# ìƒì„¸ ë¡œê·¸ í™œì„±í™”
adb shell setprop debug.codec2.platform.loglevel 3

# ì¬ë¶€íŒ… í›„ ì ìš©
adb reboot</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ§ª</span>
                        CTS í…ŒìŠ¤íŠ¸ ì‹¤í–‰
                    </h3>
                    <div class="card-description">
                        <p><strong>í˜¸í™˜ì„± í…ŒìŠ¤íŠ¸</strong></p>
                        <pre style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 0.85rem; line-height: 1.5;"><code># MediaCodec CTS í…ŒìŠ¤íŠ¸
adb shell am instrument -w -e class \
  android.media.cts.MediaCodecTest \
  android.media.cts/.MediaCodecTestRunner

# Codec2 íŠ¹í™” í…ŒìŠ¤íŠ¸
adb shell /data/nativetest64/C2ComponentTest/C2ComponentTest

# ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬
adb shell am start -n \
  com.android.cts.media/.MediaCodecBenchmark</code></pre>
                    </div>
                </div>
            </div>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                âš ï¸ ì¼ë°˜ì ì¸ ë¬¸ì œ ë° í•´ê²°ì±…
            </h3>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>ë¬¸ì œ</th>
                        <th>ì›ì¸</th>
                        <th>í•´ê²° ë°©ë²•</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>ì½”ë±ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ</strong></td>
                        <td>HAL ì„œë¹„ìŠ¤ ë¯¸ë“±ë¡ ë˜ëŠ” media_codecs.xml ì„¤ì • ì˜¤ë¥˜</td>
                        <td><code>dumpsys media.codec2</code>ë¡œ ë“±ë¡ í™•ì¸, manifest.xml ë° SELinux ì •ì±… ì ê²€</td>
                    </tr>
                    <tr>
                        <td><strong>configure() ì‹¤íŒ¨</strong></td>
                        <td>ì§€ì›í•˜ì§€ ì•ŠëŠ” í•´ìƒë„/í”„ë¡œíŒŒì¼/ë ˆë²¨</td>
                        <td>MediaCodecInfo.getCapabilitiesForType()ë¡œ ì§€ì› ë²”ìœ„ í™•ì¸</td>
                    </tr>
                    <tr>
                        <td><strong>ì¶œë ¥ ë²„í¼ê°€ ë‚˜ì˜¤ì§€ ì•ŠìŒ</strong></td>
                        <td>ì…ë ¥ ë°ì´í„° í˜•ì‹ ì˜¤ë¥˜ (SPS/PPS ëˆ„ë½ ë“±)</td>
                        <td>MediaExtractor ì‚¬ìš© ë˜ëŠ” ì˜¬ë°”ë¥¸ NAL ìœ ë‹› êµ¬ì„± í™•ì¸</td>
                    </tr>
                    <tr>
                        <td><strong>ë””ì½”ë”© í™”ë©´ ê¹¨ì§</strong></td>
                        <td>ì˜ëª»ëœ íƒ€ì„ìŠ¤íƒ¬í”„, ë™ê¸°í™” ì‹¤íŒ¨</td>
                        <td>presentationTimeUs ì •í™•íˆ ì„¤ì •, releaseOutputBuffer(index, true) ì‚¬ìš©</td>
                    </tr>
                    <tr>
                        <td><strong>HW ì½”ë± í¬ë˜ì‹œ</strong></td>
                        <td>ë²¤ë” HAL êµ¬í˜„ ë²„ê·¸, ë©”ëª¨ë¦¬ ë¶€ì¡±</td>
                        <td>SW ì½”ë±ìœ¼ë¡œ í´ë°±, dumpsysë¡œ ë©”ëª¨ë¦¬ ì‚¬ìš© í™•ì¸</td>
                    </tr>
                    <tr>
                        <td><strong>Zero-Copy ë™ì‘ ì•ˆí•¨</strong></td>
                        <td>ION/Gralloc í• ë‹¹ ì‹¤íŒ¨</td>
                        <td>C2Allocator ë¡œê·¸ í™•ì¸, ë²„í¼ í¬ê¸° ì¡°ì •</td>
                    </tr>
                    <tr>
                        <td><strong>DRM ì¬ìƒ ì‹¤íŒ¨</strong></td>
                        <td>Secure ì½”ë± ë¯¸ì§€ì› ë˜ëŠ” HDCP ì¸ì¦ ì‹¤íŒ¨</td>
                        <td>c2.*.decoder.secure ì½”ë± ì¡´ì¬ í™•ì¸, Widevine ë ˆë²¨ ì ê²€</td>
                    </tr>
                    <tr>
                        <td><strong>ì„±ëŠ¥ ì €í•˜</strong></td>
                        <td>SW ì½”ë± ì‚¬ìš©, ë¶ˆí•„ìš”í•œ ë³µì‚¬</td>
                        <td>HW ì½”ë± ìš°ì„  ì„ íƒ, Surface ì§ì ‘ ë Œë”ë§ ì‚¬ìš©</td>
                    </tr>
                </tbody>
            </table>

            <div class="highlight-box" style="margin-top: 30px;">
                <strong>ğŸ’¡ ë””ë²„ê¹… íŒ</strong>
                <ul style="margin-top: 10px; padding-left: 20px;">
                    <li><strong>ë¡œê·¸ ë ˆë²¨ ì¡°ì •</strong>: <code>adb shell setprop log.tag.Codec2 VERBOSE</code></li>
                    <li><strong>í”„ë ˆì„ ë¤í”„</strong>: MediaMuxerë¡œ ë””ì½”ë”©ëœ YUV ì €ì¥ í›„ ë¶„ì„</li>
                    <li><strong>íƒ€ì´ë° ë¶„ì„</strong>: Systraceë¡œ íì‰/ë””íì‰ íƒ€ì´ë° í”„ë¡œíŒŒì¼ë§</li>
                    <li><strong>ë²¤ë” ë¡œê·¸</strong>: ë²¤ë”ë³„ ì»¤ìŠ¤í…€ ë¡œê·¸ íƒœê·¸ í™•ì¸ (ì˜ˆ: qcom.*, exynos.*)</li>
                </ul>
            </div>
        </section>

        <!-- Section 11: AOSP Source Code Reference -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">11</span>
                AOSP ì†ŒìŠ¤ ì½”ë“œ ì°¸ì¡°
            </h2>
            <p class="section-description">
                Codec 2.0ì˜ ì‹¤ì œ êµ¬í˜„ì„ ì´í•´í•˜ê¸° ìœ„í•œ ì£¼ìš” AOSP ì†ŒìŠ¤ ì½”ë“œ ìœ„ì¹˜ì™€ ì—­í• ì…ë‹ˆë‹¤.
            </p>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 20px; margin-bottom: 20px;">
                ğŸ“‚ ì£¼ìš” ë””ë ‰í† ë¦¬ êµ¬ì¡°
            </h3>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ—ï¸</span>
                        Framework ë ˆì´ì–´
                    </h3>
                    <div class="card-description">
                        <p><strong>frameworks/av/</strong></p>
                        <ul style="font-size: 0.9rem; line-height: 1.6;">
                            <li><code>media/codec2/sfplugin/</code><br/>
                            â†’ CCodec, CCodecBufferChannel êµ¬í˜„</li>
                            <li><code>media/codec2/vndk/</code><br/>
                            â†’ Codec2Client, C2Component ì¸í„°í˜ì´ìŠ¤</li>
                            <li><code>media/libstagefright/</code><br/>
                            â†’ MediaCodec.cpp (ì•± API ì§„ì…ì )</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”Œ</span>
                        HAL ì¸í„°í˜ì´ìŠ¤
                    </h3>
                    <div class="card-description">
                        <p><strong>hardware/interfaces/</strong></p>
                        <ul style="font-size: 0.9rem; line-height: 1.6;">
                            <li><code>media/c2/1.0/</code><br/>
                            â†’ HIDL ì¸í„°í˜ì´ìŠ¤ ì •ì˜ (Android 10-12)</li>
                            <li><code>media/c2/aidl/</code><br/>
                            â†’ AIDL ì¸í„°í˜ì´ìŠ¤ ì •ì˜ (Android 13+)</li>
                            <li><code>media/c2/1.0/default/</code><br/>
                            â†’ ê¸°ë³¸ HAL êµ¬í˜„ ì°¸ì¡°</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ’¾</span>
                        ì†Œí”„íŠ¸ì›¨ì–´ ì½”ë±
                    </h3>
                    <div class="card-description">
                        <p><strong>frameworks/av/media/codec2/components/</strong></p>
                        <ul style="font-size: 0.9rem; line-height: 1.6;">
                            <li><code>base/</code><br/>
                            â†’ SimpleC2Component (ê¸°ë³¸ í´ë˜ìŠ¤)</li>
                            <li><code>avc/C2SoftAvcDec.cpp</code><br/>
                            â†’ H.264 SW ë””ì½”ë” ìƒ˜í”Œ</li>
                            <li><code>vpx/C2SoftVpxDec.cpp</code><br/>
                            â†’ VP8/VP9 SW ë””ì½”ë”</li>
                            <li><code>aom/C2SoftAomDec.cpp</code><br/>
                            â†’ AV1 SW ë””ì½”ë”</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âš¡</span>
                        Core ë¼ì´ë¸ŒëŸ¬ë¦¬
                    </h3>
                    <div class="card-description">
                        <p><strong>frameworks/av/media/codec2/core/</strong></p>
                        <ul style="font-size: 0.9rem; line-height: 1.6;">
                            <li><code>include/C2Component.h</code><br/>
                            â†’ C2Component ì¸í„°í˜ì´ìŠ¤</li>
                            <li><code>include/C2Buffer.h</code><br/>
                            â†’ C2Buffer, C2Block ì •ì˜</li>
                            <li><code>include/C2Param.h</code><br/>
                            â†’ C2Param íŒŒë¼ë¯¸í„° íƒ€ì…</li>
                            <li><code>C2AllocatorGralloc.cpp</code><br/>
                            â†’ Gralloc ê¸°ë°˜ í• ë‹¹ì</li>
                        </ul>
                    </div>
                </div>
            </div>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ”¬ ì°¸ê³ í•  ìƒ˜í”Œ êµ¬í˜„
            </h3>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“</span>
                        H.264 ë””ì½”ë” êµ¬í˜„
                    </h3>
                    <div class="card-description">
                        <p><strong>C2SoftAvcDec.cpp</strong></p>
                        <pre style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 0.8rem; line-height: 1.5;"><code>// frameworks/av/media/codec2/components/avc/C2SoftAvcDec.cpp

class C2SoftAvcDec : public SimpleC2Component {
    void process(
        const std::unique_ptr&lt;C2Work&gt;& work,
        const std::shared_ptr&lt;C2BlockPool&gt;& pool) override {

        // ì…ë ¥ ë²„í¼ì—ì„œ H.264 NAL ì¶”ì¶œ
        C2ReadView rView = work->input.buffers[0]->data().linearBlocks().front().map().get();

        // libavcdec (H.264 SW ë””ì½”ë”) í˜¸ì¶œ
        mDecHandle->decode(rView.data(), rView.capacity());

        // ì¶œë ¥ ë²„í¼ í• ë‹¹ ë° YUV ë³µì‚¬
        std::shared_ptr&lt;C2GraphicBlock&gt; block;
        C2MemoryUsage usage = { C2MemoryUsage::CPU_READ, C2MemoryUsage::CPU_WRITE };
        c2_status_t err = pool->fetchGraphicBlock(mWidth, mHeight, HAL_PIXEL_FORMAT_YV12, usage, &block);

        // ë””ì½”ë”©ëœ í”„ë ˆì„ì„ ì¶œë ¥ Workì— ì²¨ë¶€
        auto fillWork = [buffer = createGraphicBuffer(block)](const std::unique_ptr&lt;C2Work&gt;& work) {
            work->worklets.front()->output.buffers.push_back(buffer);
        };
        fillWork(work);
    }
};</code></pre>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ­</span>
                        ComponentStore êµ¬í˜„
                    </h3>
                    <div class="card-description">
                        <p><strong>C2SoftCodecComponentStore.cpp</strong></p>
                        <pre style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; overflow-x: auto; font-size: 0.8rem; line-height: 1.5;"><code>// frameworks/av/media/codec2/components/base/SimpleC2Component.cpp

std::shared_ptr&lt;C2ComponentStore&gt; GetCodec2PlatformComponentStore() {
    static std::mutex mutex;
    static std::weak_ptr&lt;C2ComponentStore&gt; platformStore;
    std::lock_guard&lt;std::mutex&gt; lock(mutex);
    std::shared_ptr&lt;C2ComponentStore&gt; store = platformStore.lock();

    if (store == nullptr) {
        store = std::make_shared&lt;C2PlatformComponentStore&gt;();
        platformStore = store;
    }
    return store;
}

// ì»´í¬ë„ŒíŠ¸ ë“±ë¡ ë§¤í¬ë¡œ
REGISTER_C2COMPONENT(C2SoftAvcDec, "c2.android.avc.decoder");
REGISTER_C2COMPONENT(C2SoftVpxDec, "c2.android.vp8.decoder");
REGISTER_C2COMPONENT(C2SoftAomDec, "c2.android.av1.decoder");</code></pre>
                    </div>
                </div>
            </div>

            <div class="highlight-box" style="margin-top: 30px;">
                <strong>ğŸ”— ìœ ìš©í•œ ë§í¬</strong>
                <ul style="margin-top: 10px; padding-left: 20px;">
                    <li><strong>AOSP ì†ŒìŠ¤ ë¸Œë¼ìš°ì €</strong>: <a href="https://cs.android.com/android/platform/superproject/+/master:frameworks/av/media/codec2/" target="_blank" style="color: var(--accent-primary);">cs.android.com (Codec2)</a></li>
                    <li><strong>Codec2 ê³µì‹ ë¬¸ì„œ</strong>: <a href="https://source.android.com/docs/core/media/codec2" target="_blank" style="color: var(--accent-primary);">source.android.com</a></li>
                    <li><strong>CTS í…ŒìŠ¤íŠ¸ ì½”ë“œ</strong>: <code>cts/tests/tests/media/codec/</code></li>
                    <li><strong>VTS í…ŒìŠ¤íŠ¸ ì½”ë“œ</strong>: <code>test/vts-testcase/hal/media/c2/</code></li>
                </ul>
            </div>
        </section>

        <!-- Section 12: Related Pages -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">12</span>
                ê´€ë ¨ ìƒì„¸ ë¬¸ì„œ
            </h2>
            <p class="section-description">
                Codec 2.0ì™€ ê´€ë ¨ëœ ë¯¸ë””ì–´ í”„ë ˆì„ì›Œí¬ì˜ ë‹¤ë¥¸ ì£¼ì œë“¤ì„ íƒìƒ‰í•˜ì„¸ìš”.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ—ï¸</span>
                        Media Framework Core
                    </h3>
                    <div class="card-description">
                        <p>ì „ì²´ ë¯¸ë””ì–´ í”„ë ˆì„ì›Œí¬ ì•„í‚¤í…ì²˜</p>
                        <ul>
                            <li>AOSP 5-Layer êµ¬ì¡°</li>
                            <li>Application â†’ HAL ë°ì´í„° í”Œë¡œìš°</li>
                            <li>MediaCodec API ìœ„ì¹˜</li>
                            <li>Codec2ê°€ ì „ì²´ êµ¬ì¡°ì—ì„œ ì°¨ì§€í•˜ëŠ” ì—­í• </li>
                        </ul>
                        <a href="media-framework-core.html" style="display: inline-block; margin-top: 15px; padding: 10px 20px; background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(245, 158, 11, 0.2)); border: 1px solid #8b5cf6; border-radius: 8px; color: #a78bfa; text-decoration: none; font-weight: 600;">
                            ìì„¸íˆ ë³´ê¸° â†’
                        </a>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“Š</span>
                        Media Playback Pipeline
                    </h3>
                    <div class="card-description">
                        <p>ë¯¸ë””ì–´ ì¬ìƒ íŒŒì´í”„ë¼ì¸ ìƒì„¸</p>
                        <ul>
                            <li>NuPlayerì˜ Codec2 í†µí•©</li>
                            <li>End-to-End ë°ì´í„° í”Œë¡œìš°</li>
                            <li>ë²„í¼ ê´€ë¦¬ ë° A/V ë™ê¸°í™”</li>
                            <li>ì„±ëŠ¥ ìµœì í™” ê¸°ë²•</li>
                        </ul>
                        <a href="media-playback.html" style="display: inline-block; margin-top: 15px; padding: 10px 20px; background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(245, 158, 11, 0.2)); border: 1px solid #8b5cf6; border-radius: 8px; color: #a78bfa; text-decoration: none; font-weight: 600;">
                            ìì„¸íˆ ë³´ê¸° â†’
                        </a>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“¦</span>
                        MediaExtractor
                    </h3>
                    <div class="card-description">
                        <p>ì»¨í…Œì´ë„ˆ íŒŒì‹± ë° ë””ë¨¹ì‹±</p>
                        <ul>
                            <li>MP4/MKV/WebM íŒŒì‹±</li>
                            <li>íŠ¸ë™ ë¶„ë¦¬ ë° ë©”íƒ€ë°ì´í„° ì¶”ì¶œ</li>
                            <li>Codec2ë¡œ ì „ë‹¬ë˜ëŠ” ì••ì¶• ë°ì´í„°</li>
                            <li>Extractor í”ŒëŸ¬ê·¸ì¸ êµ¬ì¡°</li>
                        </ul>
                        <a href="media-extractor.html" style="display: inline-block; margin-top: 15px; padding: 10px 20px; background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(245, 158, 11, 0.2)); border: 1px solid #8b5cf6; border-radius: 8px; color: #a78bfa; text-decoration: none; font-weight: 600;">
                            ìì„¸íˆ ë³´ê¸° â†’
                        </a>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”Š</span>
                        Audio Framework
                    </h3>
                    <div class="card-description">
                        <p>ì˜¤ë””ì˜¤ ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸</p>
                        <ul>
                            <li>ì˜¤ë””ì˜¤ ì½”ë± (AAC, MP3, Opus)</li>
                            <li>AudioFlinger ë¯¹ì‹± ì—”ì§„</li>
                            <li>Audio HAL ì¸í„°í˜ì´ìŠ¤</li>
                            <li>Codec2 ì˜¤ë””ì˜¤ ì»´í¬ë„ŒíŠ¸</li>
                        </ul>
                        <a href="audio-framework.html" style="display: inline-block; margin-top: 15px; padding: 10px 20px; background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(245, 158, 11, 0.2)); border: 1px solid #8b5cf6; border-radius: 8px; color: #a78bfa; text-decoration: none; font-weight: 600;">
                            ìì„¸íˆ ë³´ê¸° â†’
                        </a>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸµ</span>
                        Dolby Codecs
                    </h3>
                    <div class="card-description">
                        <p>í”„ë¦¬ë¯¸ì—„ ì˜¤ë””ì˜¤/ë¹„ë””ì˜¤ ì½”ë±</p>
                        <ul>
                            <li>Dolby Atmos (AC-4, E-AC-3)</li>
                            <li>Dolby Vision (HDR)</li>
                            <li>Codec2 ê¸°ë°˜ Dolby í†µí•©</li>
                            <li>ë²¤ë” êµ¬í˜„ ê°€ì´ë“œ</li>
                        </ul>
                        <a href="dolby-codecs.html" style="display: inline-block; margin-top: 15px; padding: 10px 20px; background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(245, 158, 11, 0.2)); border: 1px solid #8b5cf6; border-radius: 8px; color: #a78bfa; text-decoration: none; font-weight: 600;">
                            ìì„¸íˆ ë³´ê¸° â†’
                        </a>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”</span>
                        Widevine DRM
                    </h3>
                    <div class="card-description">
                        <p>DRM ë³´í˜¸ ì½˜í…ì¸  ì¬ìƒ</p>
                        <ul>
                            <li>Widevine L1/L2/L3</li>
                            <li>Secure Codec2 ì»´í¬ë„ŒíŠ¸</li>
                            <li>TEE ê¸°ë°˜ ë³´ì•ˆ íŒŒì´í”„ë¼ì¸</li>
                            <li>MediaDrm + MediaCodec í†µí•©</li>
                        </ul>
                        <a href="widevine.html" style="display: inline-block; margin-top: 15px; padding: 10px 20px; background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(245, 158, 11, 0.2)); border: 1px solid #8b5cf6; border-radius: 8px; color: #a78bfa; text-decoration: none; font-weight: 600;">
                            ìì„¸íˆ ë³´ê¸° â†’
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer
            style="text-align: center; padding: 40px 20px; color: var(--text-muted); border-top: 1px solid var(--border-color); margin-top: 60px;">
            <p>Android Codec 2.0 Architecture</p>
            <p style="margin-top: 10px; font-size: 0.9rem;">
                Next-Generation Media Codec Framework
            </p>
            <p style="margin-top: 20px;">
                <a href="index.html" style="color: var(--accent-primary); text-decoration: none;">
                    â† AOSP Media Frameworkë¡œ ëŒì•„ê°€ê¸°
                </a>
            </p>
        </footer>
    </div>

    <script src="scripts/mermaid-theme.js"></script>
    <script>
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        document.querySelectorAll('.section').forEach(section => {
            section.style.opacity = '0';
            section.style.transform = 'translateY(30px)';
            section.style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
            observer.observe(section);
        });
    </script>

    <!-- Navigation & Copy Features -->
    <script src="scripts/copy-code.js"></script>
    <script src="scripts/toc-generator.js"></script>
    <script src="scripts/page-navigation.js"></script>
    <!-- Interactive Diagram Features -->
    <script src="scripts/diagram-data.js"></script>
    <script src="scripts/diagram-interactive.js"></script>

    <script src="scripts/theme-toggle.js?v=2"></script>
    <script src="scripts/lang-switch.js"></script>
</body>

</html>