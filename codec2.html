<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Android Codec 2.0 Architecture</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@300;400;600;700;900&family=IBM+Plex+Mono:wght@400;500;600&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/design-system.css">

        <style>
        /* Page-specific styles loaded from design-system.css */
    </style>
</head>

<body>
    <nav class="nav">
        <a href="index.html" class="nav-button">
            â† AOSP Media Framework
        </a>
    </nav>

    <div class="container">
        <header>
            <h1 class="page-title">âš™ï¸ Codec 2.0</h1>
            <p class="page-subtitle">ì°¨ì„¸ëŒ€ Android ë¯¸ë””ì–´ ì½”ë± ì•„í‚¤í…ì²˜</p>
        </header>

        <!-- Section 1: Overview -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">1</span>
                Overview: Codec 2.0ì´ë€?
            </h2>
            <p class="section-description">
                Codec 2.0ì€ Android Q(10)ì—ì„œ ë„ì…ëœ ì°¨ì„¸ëŒ€ ë©€í‹°ë¯¸ë””ì–´ í”„ë ˆì„ì›Œí¬ë¡œ, ê¸°ì¡´ ACodec/OpenMAXë¥¼ ëŒ€ì²´í•©ë‹ˆë‹¤.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ¯</span>
                        ì£¼ìš” ëª©í‘œ
                    </h3>
                    <div class="card-description">
                        <p><strong>ì„±ëŠ¥ ë° ë³´ì•ˆ í–¥ìƒ</strong></p>
                        <ul>
                            <li>Zero-Copy ë²„í¼ ê´€ë¦¬ë¡œ ì„±ëŠ¥ í–¥ìƒ</li>
                            <li>HAL ê¸°ë°˜ ë³´ì•ˆ ê°•í™”</li>
                            <li>Mainline ëª¨ë“ˆë¡œ ë…ë¦½ ì—…ë°ì´íŠ¸</li>
                            <li>í•˜ë“œì›¨ì–´ ê°€ì† ìµœì í™”</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”„</span>
                        ê¸°ì¡´ ì‹œìŠ¤í…œ ëŒ€ì²´
                    </h3>
                    <div class="card-description">
                        <p><strong>ACodec + OpenMAX IL ëŒ€ì²´</strong></p>
                        <ul>
                            <li>ë” ë‹¨ìˆœí•˜ê³  ìœ ì—°í•œ API</li>
                            <li>ì»´í¬ë„ŒíŠ¸ ì²´ì´ë‹ ì§€ì›</li>
                            <li>í•„í„° í”ŒëŸ¬ê·¸ì¸ ì§€ì›</li>
                            <li>êµ¬ì„± ì¿¼ë¦¬ ê¸°ëŠ¥ í–¥ìƒ</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âš¡</span>
                        Zero-Copy ë²„í¼
                    </h3>
                    <div class="card-description">
                        <p><strong>í•µì‹¬ ì„±ëŠ¥ ìµœì í™”</strong></p>
                        <ul>
                            <li>ë°ì´í„° ë³µì‚¬ ì˜¤ë²„í—¤ë“œ ì œê±°</li>
                            <li>C2Bufferë¥¼ í†µí•œ íš¨ìœ¨ì  ì „ë‹¬</li>
                            <li>C2Allocatorë¡œ ë©”ëª¨ë¦¬ ê´€ë¦¬</li>
                            <li>ION/Gralloc í™œìš©</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”Œ</span>
                        HAL ì¸í„°í˜ì´ìŠ¤
                    </h3>
                    <div class="card-description">
                        <p><strong>android.hardware.media.c2</strong></p>
                        <ul>
                            <li>HIDL/AIDL ê¸°ë°˜ HAL</li>
                            <li>ë²¤ë” êµ¬í˜„ ë¶„ë¦¬</li>
                            <li>í”„ë¡œì„¸ìŠ¤ ê°„ í†µì‹  ìµœì í™”</li>
                            <li>ë…ë¦½ì ì¸ ì—…ë°ì´íŠ¸ ê°€ëŠ¥</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 2: Architecture -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">2</span>
                ì „ì²´ ì•„í‚¤í…ì²˜
            </h2>
            <p class="section-description">
                MediaCodec APIë¶€í„° í•˜ë“œì›¨ì–´ ì½”ë±ê¹Œì§€ Codec 2.0ì˜ ì „ì²´ êµ¬ì¡°ë¥¼ ì‹œê°í™”í•©ë‹ˆë‹¤.
            </p>

            <div class="mermaid-container">
                <div class="mermaid">
                    graph TB
                    subgraph APP ["Application Layer"]
                    MEDIA_APP[Media App]
                    end

                    subgraph FRAMEWORK ["Android Framework"]
                    MEDIACODEC[MediaCodec API]
                    CCODEC[CCodec<br />Entry Point]
                    BUFFER_CH[CCodecBufferChannel<br />Buffer Delivery]
                    end

                    subgraph CODEC2_CLIENT ["Codec2 Client"]
                    C2_CLIENT[Codec2Client]
                    LISTENER[mClientListener<br />Callbacks]
                    end

                    subgraph HAL ["HAL Interface - android.hardware.media.c2"]
                    HIDL_AIDL[HIDL/AIDL<br />IPC Layer]
                    end

                    subgraph VENDOR ["Vendor Implementation"]
                    COMP_STORE[C2ComponentStore<br />Library Entry Point]
                    C2_COMP[C2Component<br />Encoder/Decoder]
                    C2_INTF[C2Component Interface<br />Configuration]
                    C2_ALLOC[C2Allocator<br />Memory Management]
                    C2_POOL[C2BlockPool<br />Buffer Pool]
                    end

                    subgraph HW ["Hardware"]
                    HW_CODEC[Hardware Codec<br />DSP/GPU]
                    ION[ION Allocator]
                    GRALLOC[Gralloc<br />Graphics Buffer]
                    end

                    MEDIA_APP --> MEDIACODEC
                    MEDIACODEC --> CCODEC
                    CCODEC --> BUFFER_CH
                    CCODEC --> C2_CLIENT
                    C2_CLIENT --> LISTENER
                    C2_CLIENT --> HIDL_AIDL

                    HIDL_AIDL --> COMP_STORE
                    COMP_STORE --> C2_COMP
                    C2_COMP --> C2_INTF
                    C2_COMP --> C2_ALLOC
                    C2_ALLOC --> C2_POOL

                    C2_COMP --> HW_CODEC
                    C2_ALLOC --> ION
                    C2_ALLOC --> GRALLOC

                    style CCODEC fill:#1a1f35,stroke:#06b6d4,stroke-width:3px
                    style C2_COMP fill:#1a1f35,stroke:#22d3ee,stroke-width:3px
                    style C2_ALLOC fill:#1a1f35,stroke:#67e8f9,stroke-width:2px
                    style HIDL_AIDL fill:#1a1f35,stroke:#10b981,stroke-width:2px
                </div>
            </div>

            <div class="highlight-box">
                <strong>í•µì‹¬ ì»´í¬ë„ŒíŠ¸:</strong>
                <ul>
                    <li><strong>CCodec</strong>: Stagefrightì™€ Codec 2.0 í”„ë ˆì„ì›Œí¬ ê°„ ì¸í„°í˜ì´ìŠ¤</li>
                    <li><strong>Codec2Client</strong>: CCodecì´ Codec 2.0 ì»´í¬ë„ŒíŠ¸ì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸</li>
                    <li><strong>C2ComponentStore</strong>: ë²¤ë”ë³„ ì½”ë± ë¼ì´ë¸ŒëŸ¬ë¦¬ ì§„ì…ì </li>
                    <li><strong>C2Component</strong>: ì‹¤ì œ ì¸ì½”ë”/ë””ì½”ë” êµ¬í˜„ì²´</li>
                    <li><strong>C2Allocator</strong>: Zero-Copyë¥¼ ìœ„í•œ ë©”ëª¨ë¦¬ í• ë‹¹ ë° ê´€ë¦¬</li>
                </ul>
            </div>
        </section>

        <!-- Section 3: Component Lifecycle -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">3</span>
                ì»´í¬ë„ŒíŠ¸ ìƒëª…ì£¼ê¸°
            </h2>
            <p class="section-description">
                C2Componentì˜ ìƒì„±ë¶€í„° ì†Œë©¸ê¹Œì§€ì˜ ì „ì²´ ìƒëª…ì£¼ê¸°ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.
            </p>

            <div class="mermaid-container">
                <div class="mermaid">
                    sequenceDiagram
                    participant App
                    participant MC as MediaCodec
                    participant CC as CCodec
                    participant C2C as Codec2Client
                    participant HAL as HIDL/AIDL
                    participant CS as C2ComponentStore
                    participant COMP as C2Component

                    App->>MC: createByCodecName()
                    MC->>CC: CCodec ìƒì„±
                    CC->>C2C: Codec2Client::CreateFromService()
                    C2C->>HAL: HAL Service ì—°ê²°
                    HAL->>CS: getComponentStore()
                    CS-->>HAL: ComponentStore ë°˜í™˜
                    HAL-->>C2C: Store ë°˜í™˜

                    App->>MC: configure()
                    MC->>CC: configure()
                    CC->>C2C: createComponent()
                    C2C->>HAL: createComponent(name)
                    HAL->>CS: createComponent()
                    CS->>COMP: C2Component ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
                    COMP-->>CS: Component ë°˜í™˜
                    CS-->>HAL: Component ë°˜í™˜
                    HAL-->>C2C: Component ë°˜í™˜
                    C2C-->>CC: Component ë°˜í™˜

                    CC->>C2C: query() - íŒŒë¼ë¯¸í„° ì¡°íšŒ
                    C2C->>COMP: Component Interface ì ‘ê·¼
                    COMP-->>C2C: ì„¤ì •ê°’ ë°˜í™˜

                    App->>MC: start()
                    MC->>CC: start()
                    CC->>C2C: start()
                    C2C->>HAL: start()
                    HAL->>COMP: start()

                    loop ë°ì´í„° ì²˜ë¦¬
                    App->>MC: queueInputBuffer()
                    MC->>CC: C2Work ìƒì„±
                    CC->>C2C: queue(C2Work)
                    C2C->>HAL: queue(work)
                    HAL->>COMP: process(work)
                    COMP->>COMP: ì¸ì½”ë”©/ë””ì½”ë”©
                    COMP-->>HAL: onWorkDone()
                    HAL-->>C2C: onWorkDone()
                    C2C-->>CC: Listener ì½œë°±
                    CC-->>MC: ì¶œë ¥ ë²„í¼ ì „ë‹¬
                    MC-->>App: dequeueOutputBuffer()
                    end

                    App->>MC: stop()
                    MC->>CC: stop()
                    CC->>C2C: stop()
                    C2C->>HAL: stop()
                    HAL->>COMP: stop()

                    App->>MC: release()
                    MC->>CC: release()
                    CC->>C2C: release()
                    C2C->>HAL: release()
                    HAL->>COMP: release()
                    COMP->>COMP: ë¦¬ì†ŒìŠ¤ ì •ë¦¬
                </div>
            </div>
        </section>

        <!-- Section 4: Buffer Management -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">4</span>
                Zero-Copy ë²„í¼ ê´€ë¦¬
            </h2>
            <p class="section-description">
                Codec 2.0ì˜ í•µì‹¬ ê¸°ëŠ¥ì¸ Zero-Copy ë²„í¼ ë©”ì»¤ë‹ˆì¦˜ì„ ìƒì„¸íˆ ì„¤ëª…í•©ë‹ˆë‹¤.
            </p>

            <div class="mermaid-container">
                <div class="mermaid">
                    flowchart TB
                    START[ì•±ì—ì„œ ì¸ì½”ë”©/ë””ì½”ë”© ìš”ì²­] --> ALLOC{ë²„í¼ í• ë‹¹ í•„ìš”?}

                    ALLOC -->|Yes| C2ALLOC[C2Allocator í˜¸ì¶œ]
                    C2ALLOC --> POOL[C2BlockPoolì—ì„œ<br />ë©”ëª¨ë¦¬ ë¸”ë¡ íšë“]

                    POOL --> TYPE{ë²„í¼ íƒ€ì…}
                    TYPE -->|Linear| ION_ALLOC[ION Allocator<br />ì—°ì† ë©”ëª¨ë¦¬]
                    TYPE -->|Graphic| GRALLOC_ALLOC[Gralloc<br />ê·¸ë˜í”½ ë²„í¼]

                    ION_ALLOC --> C2BUFFER[C2Buffer ìƒì„±]
                    GRALLOC_ALLOC --> C2BUFFER

                    ALLOC -->|No| C2BUFFER

                    C2BUFFER --> C2WORK[C2Workì— C2Buffer ì²¨ë¶€]
                    C2WORK --> QUEUE[Componentì— queue]

                    QUEUE --> PROCESS[Componentì—ì„œ ì²˜ë¦¬]
                    PROCESS --> ZEROCOPY{Zero-Copy ê°€ëŠ¥?}

                    ZEROCOPY -->|Yes| DIRECT[ë©”ëª¨ë¦¬ ì§ì ‘ ì ‘ê·¼<br />ë³µì‚¬ ì—†ìŒ]
                    ZEROCOPY -->|No| COPY[í•„ìš”ì‹œ ë³µì‚¬]

                    DIRECT --> OUTPUT[ì¶œë ¥ C2Buffer ìƒì„±]
                    COPY --> OUTPUT

                    OUTPUT --> RETURN[ì•±ìœ¼ë¡œ ë°˜í™˜]
                    RETURN --> RECYCLE[C2BlockPoolë¡œ ì¬í™œìš©]
                    RECYCLE --> END[ì™„ë£Œ]

                    style C2ALLOC fill:#1a1f35,stroke:#06b6d4,stroke-width:2px
                    style C2BUFFER fill:#1a1f35,stroke:#22d3ee,stroke-width:2px
                    style ZEROCOPY fill:#1a1f35,stroke:#10b981,stroke-width:2px
                    style DIRECT fill:#1a1f35,stroke:#10b981,stroke-width:3px
                </div>
            </div>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ”§ ë²„í¼ ê´€ë¦¬ ì»´í¬ë„ŒíŠ¸
            </h3>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“¦</span>
                        C2Buffer
                    </h3>
                    <div class="card-description">
                        <p><strong>ë¯¸ë””ì–´ ë°ì´í„° ì»¨í…Œì´ë„ˆ</strong></p>
                        <ul>
                            <li>ì˜¤ë””ì˜¤/ë¹„ë””ì˜¤ í”„ë ˆì„ ë‹´ê¸°</li>
                            <li>ë©”íƒ€ë°ì´í„° í¬í•¨</li>
                            <li>Zero-Copy ì§€ì›</li>
                            <li>í”„ë¡œì„¸ìŠ¤ ê°„ ì „ë‹¬ ê°€ëŠ¥</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ›ï¸</span>
                        C2Allocator
                    </h3>
                    <div class="card-description">
                        <p><strong>ë©”ëª¨ë¦¬ í• ë‹¹ ê´€ë¦¬ì</strong></p>
                        <ul>
                            <li>ë²„í¼ ë©”ëª¨ë¦¬ í• ë‹¹</li>
                            <li>ì¬í™œìš© ë° ìƒíƒœ ì¶”ì </li>
                            <li>ION/Gralloc í™œìš©</li>
                            <li>ë©”ëª¨ë¦¬ íš¨ìœ¨ì„± ìµœì í™”</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸŠ</span>
                        C2BlockPool
                    </h3>
                    <div class="card-description">
                        <p><strong>ë²„í¼ í’€ ê´€ë¦¬</strong></p>
                        <ul>
                            <li>ë©”ëª¨ë¦¬ ë¸”ë¡ í’€ë§</li>
                            <li>ë¹ ë¥¸ í• ë‹¹/í•´ì œ</li>
                            <li>ë©”ëª¨ë¦¬ ì¬ì‚¬ìš©</li>
                            <li>ì„±ëŠ¥ í–¥ìƒ</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âš¡</span>
                        Zero-Copy ì¥ì 
                    </h3>
                    <div class="card-description">
                        <p><strong>ì„±ëŠ¥ ìµœì í™”</strong></p>
                        <ul>
                            <li>CPU ì‚¬ìš©ëŸ‰ ê°ì†Œ</li>
                            <li>ë©”ëª¨ë¦¬ ëŒ€ì—­í­ ì ˆì•½</li>
                            <li>ì§€ì—° ì‹œê°„ ë‹¨ì¶•</li>
                            <li>ì „ë ¥ ì†Œë¹„ ê°ì†Œ</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 5: C2Component Structure -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">5</span>
                C2Component êµ¬ì¡°
            </h2>
            <p class="section-description">
                ì‹¤ì œ ì¸ì½”ë”/ë””ì½”ë”ë¥¼ êµ¬í˜„í•˜ëŠ” C2Componentì˜ ë‚´ë¶€ êµ¬ì¡°ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.
            </p>

            <div class="mermaid-container">
                <div class="mermaid">
                    graph TB
                    subgraph COMPONENT ["C2Component"]
                    COMP_INTF[C2Component Interface<br />íŒŒë¼ë¯¸í„° ì„¤ì •]
                    COMP_IMPL[Component Implementation<br />ì‹¤ì œ ì½”ë± ë¡œì§]

                    subgraph CONFIG ["Configuration"]
                    PARAMS[C2Param<br />ì„¤ì • íŒŒë¼ë¯¸í„°]
                    QUERY[Query<br />ëŠ¥ë ¥ ì¡°íšŒ]
                    TUNING[Tuning<br />ë™ì  ì¡°ì •]
                    end

                    subgraph PROCESSING ["Processing"]
                    INPUT_Q[Input Queue<br />ì…ë ¥ ëŒ€ê¸°ì—´]
                    WORK_PROC[Work Processor<br />ì‘ì—… ì²˜ë¦¬]
                    OUTPUT_Q[Output Queue<br />ì¶œë ¥ ëŒ€ê¸°ì—´]
                    end

                    subgraph CALLBACKS ["Callbacks"]
                    WORK_DONE[onWorkDone<br />ì‘ì—… ì™„ë£Œ]
                    TRIGGERED[onTriggered<br />ì´ë²¤íŠ¸ ë°œìƒ]
                    ERROR[onError<br />ì—ëŸ¬ ì²˜ë¦¬]
                    end
                    end

                    COMP_INTF --> CONFIG
                    COMP_IMPL --> PROCESSING
                    COMP_IMPL --> CALLBACKS

                    INPUT_Q --> WORK_PROC
                    WORK_PROC --> OUTPUT_Q

                    WORK_PROC --> WORK_DONE
                    WORK_PROC --> TRIGGERED
                    WORK_PROC --> ERROR

                    style COMP_INTF fill:#1a1f35,stroke:#06b6d4,stroke-width:2px
                    style COMP_IMPL fill:#1a1f35,stroke:#22d3ee,stroke-width:2px
                    style WORK_PROC fill:#1a1f35,stroke:#67e8f9,stroke-width:2px
                </div>
            </div>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ” ì£¼ìš” ì¸í„°í˜ì´ìŠ¤
            </h3>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âš™ï¸</span>
                        C2Component Interface
                    </h3>
                    <div class="card-description">
                        <p><strong>ì„¤ì • ë° ì¿¼ë¦¬</strong></p>
                        <ul>
                            <li><code>query()</code>: íŒŒë¼ë¯¸í„° ì¡°íšŒ</li>
                            <li><code>config()</code>: íŒŒë¼ë¯¸í„° ì„¤ì •</li>
                            <li><code>querySupportedParams()</code>: ì§€ì› íŒŒë¼ë¯¸í„° í™•ì¸</li>
                            <li><code>querySupportedValues()</code>: ì§€ì› ê°’ ë²”ìœ„</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”„</span>
                        Work Processing
                    </h3>
                    <div class="card-description">
                        <p><strong>ë°ì´í„° ì²˜ë¦¬</strong></p>
                        <ul>
                            <li><code>queue()</code>: C2Work ì œì¶œ</li>
                            <li><code>flush()</code>: ëŒ€ê¸°ì—´ ë¹„ìš°ê¸°</li>
                            <li><code>drain()</code>: ì¶œë ¥ ì™„ë£Œ ëŒ€ê¸°</li>
                            <li><code>start()</code> / <code>stop()</code>: ìƒíƒœ ì œì–´</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“Š</span>
                        C2Param
                    </h3>
                    <div class="card-description">
                        <p><strong>íŒŒë¼ë¯¸í„° íƒ€ì…</strong></p>
                        <ul>
                            <li>ë¹„íŠ¸ë ˆì´íŠ¸, í”„ë ˆì„ë ˆì´íŠ¸</li>
                            <li>í•´ìƒë„, ìƒ‰ìƒ í¬ë§·</li>
                            <li>í”„ë¡œíŒŒì¼, ë ˆë²¨</li>
                            <li>ë²„í¼ í¬ê¸°, ì§€ì—° ì‹œê°„</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ¯</span>
                        Listener Callbacks
                    </h3>
                    <div class="card-description">
                        <p><strong>ì´ë²¤íŠ¸ ì•Œë¦¼</strong></p>
                        <ul>
                            <li><code>onWorkDone()</code>: ì‘ì—… ì™„ë£Œ</li>
                            <li><code>onTriggered()</code>: íŠ¸ë¦¬ê±° ì´ë²¤íŠ¸</li>
                            <li><code>onError()</code>: ì—ëŸ¬ ë°œìƒ</li>
                            <li><code>onFramesRendered()</code>: í”„ë ˆì„ ë Œë”ë§</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 6: HAL Communication -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">6</span>
                HAL í†µì‹  ë©”ì»¤ë‹ˆì¦˜
            </h2>
            <p class="section-description">
                HIDL/AIDLì„ í†µí•œ í”„ë ˆì„ì›Œí¬ì™€ ë²¤ë” êµ¬í˜„ ê°„ í†µì‹  ë°©ì‹ì„ ì„¤ëª…í•©ë‹ˆë‹¤.
            </p>

            <div class="mermaid-container">
                <div class="mermaid">
                    sequenceDiagram
                    participant FC as Framework<br />Codec2Client
                    participant HIDL as HIDL/AIDL<br />Binder IPC
                    participant VS as Vendor Service<br />C2ComponentStore
                    participant VC as Vendor<br />C2Component

                    Note over FC,VC: ì»´í¬ë„ŒíŠ¸ ìƒì„±
                    FC->>HIDL: createComponent(name)
                    HIDL->>VS: createComponent()
                    VS->>VC: new C2Component()
                    VC-->>VS: Component ì¸ìŠ¤í„´ìŠ¤
                    VS-->>HIDL: IComponent ë°˜í™˜
                    HIDL-->>FC: Component Proxy

                    Note over FC,VC: íŒŒë¼ë¯¸í„° ì„¤ì •
                    FC->>HIDL: config(params)
                    HIDL->>HIDL: ë°ì´í„° ì§ë ¬í™”
                    HIDL->>VC: config()
                    VC->>VC: íŒŒë¼ë¯¸í„° ì ìš©
                    VC-->>HIDL: ê²°ê³¼
                    HIDL->>HIDL: ë°ì´í„° ì—­ì§ë ¬í™”
                    HIDL-->>FC: ì„¤ì • ì™„ë£Œ

                    Note over FC,VC: Work ì²˜ë¦¬
                    FC->>HIDL: queue(workBundle)
                    HIDL->>HIDL: C2Work ì§ë ¬í™”<br />C2Buffer FD ì „ë‹¬
                    HIDL->>VC: queue()
                    VC->>VC: ì¸ì½”ë”©/ë””ì½”ë”©
                    VC->>HIDL: onWorkDone()
                    HIDL->>HIDL: ê²°ê³¼ ì§ë ¬í™”
                    HIDL->>FC: Listener ì½œë°±
                    FC->>FC: ì¶œë ¥ ì²˜ë¦¬
                </div>
            </div>

            <h3 style="color: var(--accent-primary); font-size: 1.5rem; margin-top: 40px; margin-bottom: 20px;">
                ğŸ”Œ HAL ì¸í„°í˜ì´ìŠ¤ ê³„ì¸µ
            </h3>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ“¡</span>
                        HIDL (Legacy)
                    </h3>
                    <div class="card-description">
                        <p><strong>Hardware Interface Definition Language</strong></p>
                        <ul>
                            <li>Android 10~12ì—ì„œ ì‚¬ìš©</li>
                            <li>Binderized HAL</li>
                            <li>í”„ë¡œì„¸ìŠ¤ ê°„ í†µì‹ </li>
                            <li>ì•ˆì •ì ì¸ ABI</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ†•</span>
                        AIDL (Current)
                    </h3>
                    <div class="card-description">
                        <p><strong>Android Interface Definition Language</strong></p>
                        <ul>
                            <li>Android 13+ ê¶Œì¥</li>
                            <li>í–¥ìƒëœ ì•ˆì •ì„±</li>
                            <li>ë” ë‚˜ì€ ìœ ì—°ì„±</li>
                            <li>ê°„ì†Œí™”ëœ êµ¬ë¬¸</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”„</span>
                        ë°ì´í„° ì§ë ¬í™”
                    </h3>
                    <div class="card-description">
                        <p><strong>í”„ë¡œì„¸ìŠ¤ ê°„ ë°ì´í„° ì „ë‹¬</strong></p>
                        <ul>
                            <li>C2Param ì§ë ¬í™”</li>
                            <li>C2Buffer FD ê³µìœ </li>
                            <li>Zero-Copy ìœ ì§€</li>
                            <li>íš¨ìœ¨ì ì¸ IPC</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ›¡ï¸</span>
                        ë³´ì•ˆ ë° ê²©ë¦¬
                    </h3>
                    <div class="card-description">
                        <p><strong>í”„ë¡œì„¸ìŠ¤ ë¶„ë¦¬</strong></p>
                        <ul>
                            <li>ë²¤ë” í”„ë¡œì„¸ìŠ¤ ê²©ë¦¬</li>
                            <li>í¬ë˜ì‹œ ì˜í–¥ ìµœì†Œí™”</li>
                            <li>ê¶Œí•œ ë¶„ë¦¬</li>
                            <li>SELinux ì •ì±… ì ìš©</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 7: Codec 2.0 vs OMX -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">7</span>
                Codec 2.0 vs OpenMAX ë¹„êµ
            </h2>
            <p class="section-description">
                ê¸°ì¡´ OpenMAX ILê³¼ Codec 2.0ì˜ ì£¼ìš” ì°¨ì´ì ì„ ë¹„êµí•©ë‹ˆë‹¤.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”´</span>
                        OpenMAX IL (Legacy)
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>ë²„í¼ ê´€ë¦¬</strong>: ë³µì‚¬ ê¸°ë°˜, ì„±ëŠ¥ ì˜¤ë²„í—¤ë“œ</li>
                            <li><strong>API</strong>: ë³µì¡í•˜ê³  ê²½ì§ëœ êµ¬ì¡°</li>
                            <li><strong>ì—…ë°ì´íŠ¸</strong>: OS ì—…ë°ì´íŠ¸ í•„ìš”</li>
                            <li><strong>í™•ì¥ì„±</strong>: ì œí•œì </li>
                            <li><strong>HAL</strong>: ì§ì ‘ í†µí•©, ë³´ì•ˆ ì·¨ì•½</li>
                            <li><strong>í•„í„°</strong>: ì§€ì› ì œí•œì </li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸŸ¢</span>
                        Codec 2.0 (Modern)
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>ë²„í¼ ê´€ë¦¬</strong>: Zero-Copy, ê³ ì„±ëŠ¥</li>
                            <li><strong>API</strong>: ë‹¨ìˆœí•˜ê³  ìœ ì—°í•œ êµ¬ì¡°</li>
                            <li><strong>ì—…ë°ì´íŠ¸</strong>: Mainline ëª¨ë“ˆ, ë…ë¦½ ì—…ë°ì´íŠ¸</li>
                            <li><strong>í™•ì¥ì„±</strong>: ì»´í¬ë„ŒíŠ¸ ì²´ì´ë‹, í”ŒëŸ¬ê·¸ì¸</li>
                            <li><strong>HAL</strong>: HIDL/AIDL ê¸°ë°˜, ë³´ì•ˆ ê°•í™”</li>
                            <li><strong>í•„í„°</strong>: í•„í„° í”ŒëŸ¬ê·¸ì¸ ì§€ì› (HDRâ†’SDR ë“±)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="warning-box">
                <strong>âš ï¸ ë§ˆì´ê·¸ë ˆì´ì…˜ ê³ ë ¤ì‚¬í•­:</strong>
                <ul style="margin-top: 10px; padding-left: 20px;">
                    <li>Android 10+ì—ì„œ Codec 2.0ì´ ê¸°ë³¸ê°’</li>
                    <li>ê¸°ì¡´ OMX ì½”ë±ì€ í˜¸í™˜ì„± ë ˆì´ì–´ë¥¼ í†µí•´ ê³„ì† ë™ì‘</li>
                    <li>ìƒˆë¡œìš´ í•˜ë“œì›¨ì–´ ì½”ë±ì€ Codec 2.0ìœ¼ë¡œ êµ¬í˜„ ê¶Œì¥</li>
                    <li>ë²¤ë”ëŠ” C2ComponentStoreë¥¼ í†µí•´ ì½”ë± ë…¸ì¶œ</li>
                </ul>
            </div>
        </section>

        <!-- Footer -->
        <footer
            style="text-align: center; padding: 40px 20px; color: var(--text-muted); border-top: 1px solid var(--border-color); margin-top: 60px;">
            <p>Android Codec 2.0 Architecture</p>
            <p style="margin-top: 10px; font-size: 0.9rem;">
                Next-Generation Media Codec Framework
            </p>
            <p style="margin-top: 20px;">
                <a href="index.html" style="color: var(--accent-primary); text-decoration: none;">
                    â† AOSP Media Frameworkë¡œ ëŒì•„ê°€ê¸°
                </a>
            </p>
        </footer>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'dark',
            themeVariables: {
                primaryColor: '#1a1f35',
                primaryTextColor: '#e5e7eb',
                primaryBorderColor: '#06b6d4',
                lineColor: '#22d3ee',
                secondaryColor: '#111827',
                tertiaryColor: '#0a0e1a',
                background: '#0a0e1a',
                mainBkg: '#1a1f35',
                secondBkg: '#111827',
                border1: '#06b6d4',
                border2: '#22d3ee',
                note: '#67e8f9',
                noteBkgColor: 'rgba(6, 182, 212, 0.1)',
                noteBorderColor: '#06b6d4',
                fontFamily: 'Noto Sans KR'
            },
            flowchart: {
                curve: 'basis',
                padding: 20,
                nodeSpacing: 50,
                rankSpacing: 50
            },
            sequence: {
                actorMargin: 50,
                width: 150,
                height: 65,
                boxMargin: 10,
                boxTextMargin: 5,
                noteMargin: 10,
                messageMargin: 35
            }
        });

        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        document.querySelectorAll('.section').forEach(section => {
            section.style.opacity = '0';
            section.style.transform = 'translateY(30px)';
            section.style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
            observer.observe(section);
        });
    </script>
</body>

</html>