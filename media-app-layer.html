<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media App Layer & APIs</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@300;400;600;700;900&family=IBM+Plex+Mono:wght@400;500;600&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/design-system.css">

        <style>
        /* Page-specific styles loaded from design-system.css */
    </style>
</head>

<body>
    <nav class="nav">
        <a href="index.html" class="nav-button">
            ← AOSP Media Framework
        </a>
    </nav>

    <div class="container">
        <header>
            <h1 class="page-title">📱 Media App Layer & APIs</h1>
            <p class="page-subtitle">Android 미디어 앱 개발을 위한 API 가이드</p>
        </header>

        <!-- Section 1: Overview -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">1</span>
                Media App Layer 개요
            </h2>
            <p class="section-description">
                Android는 다양한 추상화 수준의 미디어 API를 제공하여 개발자가 필요에 맞는 적절한 도구를 선택할 수 있습니다.
            </p>

            <div class="highlight-box">
                <strong>핵심 원칙:</strong> Android 미디어 API는 높은 수준의 간단한 API부터 낮은 수준의 세밀한 제어 API까지 레이어로 구성되어 있습니다.
            </div>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">🎬</span>
                        High-Level APIs
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>Media3</strong>: 최신 통합 미디어 라이브러리</li>
                            <li><strong>MediaPlayer</strong>: 간단한 재생용</li>
                            <li><strong>MediaSession</strong>: 미디어 제어 표준화</li>
                            <li>빠른 개발, 적은 코드</li>
                            <li>일반적 사용 사례에 최적화</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">⚙️</span>
                        Mid-Level APIs
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>ExoPlayer</strong>: 고급 미디어 플레이어</li>
                            <li><strong>Camera2</strong>: 현대적 카메라 API</li>
                            <li>커스터마이징 가능</li>
                            <li>고급 기능 지원</li>
                            <li>적응형 스트리밍, DRM</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">🔧</span>
                        Low-Level APIs
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>AudioTrack</strong>: Raw 오디오 재생</li>
                            <li><strong>AudioRecord</strong>: Raw 오디오 녹음</li>
                            <li><strong>MediaCodec</strong>: 코덱 직접 제어</li>
                            <li>최대한의 제어</li>
                            <li>오디오 합성, DSP 처리</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 2: Architecture -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">2</span>
                Media App 아키텍처
            </h2>
            <p class="section-description">
                Android 미디어 앱의 전체 레이어 구조를 이해합니다.
            </p>

            <div class="mermaid-container">
                <div class="mermaid">
                    graph TB
                    subgraph APP["App Layer"]
                    MEDIA3[Media3<br />ExoPlayer]
                    MEDIAPLAYER[MediaPlayer]
                    CAMERA[Camera2]
                    end

                    subgraph SESSION["MediaSession Layer"]
                    MSESSION[MediaSession]
                    MCONTROLLER[MediaController]
                    end

                    subgraph FW["Framework Layer"]
                    AUDIOMANAGER[AudioManager]
                    MEDIASERVICE[MediaService]
                    end

                    subgraph NATIVE["Native Layer"]
                    AUDIOTRACK[AudioTrack]
                    AUDIORECORD[AudioRecord]
                    MEDIACODEC[MediaCodec]
                    end

                    subgraph HAL["HAL Layer"]
                    AUDIOHAL[Audio HAL]
                    CAMERAHAL[Camera HAL]
                    end

                    MEDIA3 --> MSESSION
                    MEDIAPLAYER --> MSESSION
                    MSESSION <--> MCONTROLLER
                        MSESSION --> AUDIOTRACK
                        MEDIASERVICE --> MEDIACODEC
                        AUDIOTRACK --> AUDIOHAL
                        AUDIORECORD --> AUDIOHAL
                        CAMERA --> CAMERAHAL

                </div>
            </div>
        </section>

        <!-- Section 3: MediaPlayer -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">3</span>
                MediaPlayer API
                <span class="tag tag-legacy">Legacy</span>
            </h2>
            <p class="section-description">
                Android Framework에 내장된 기본 미디어 플레이어입니다.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">✅</span>
                        장점
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li>간단한 API, 빠른 구현</li>
                            <li>Framework 내장, 추가 의존성 불필요</li>
                            <li>일반적인 포맷 지원</li>
                            <li>간단한 재생에 적합</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">⚠️</span>
                        단점
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li>제한적인 커스터마이징</li>
                            <li>DASH/HLS 지원 부족</li>
                            <li>DRM 처리 복잡</li>
                            <li>Android 버전 종속적</li>
                            <li>고급 기능 부족</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">🎯</span>
                        사용 사례
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li>로컬 파일 재생</li>
                            <li>간단한 스트리밍</li>
                            <li>빠른 프로토타입</li>
                            <li>교육용 앱</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="highlight-box" style="margin-top: 30px;">
                <strong>권장사항:</strong> 새로운 프로젝트는 Media3 사용을 권장합니다. MediaPlayer는 간단한 사용 사례나 레거시 지원용으로만 사용하세요.
            </div>
        </section>

        <!-- Section 4: ExoPlayer -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">4</span>
                ExoPlayer
                <span class="tag tag-advanced">Advanced</span>
            </h2>
            <p class="section-description">
                Google이 개발한 Application-level 미디어 플레이어 라이브러리입니다.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">🚀</span>
                        주요 특징
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>적응형 스트리밍</strong>: DASH, HLS, SmoothStreaming</li>
                            <li><strong>DRM</strong>: Widevine, PlayReady</li>
                            <li><strong>커스터마이징</strong>: 모든 컴포넌트 교체 가능</li>
                            <li><strong>독립 업데이트</strong>: OS 버전 무관</li>
                            <li><strong>오픈소스</strong>: 커뮤니티 기여</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">🧩</span>
                        모듈형 아키텍처
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>MediaSource</strong>: 미디어 콘텐츠 제공</li>
                            <li><strong>Renderer</strong>: 비디오/오디오 렌더링</li>
                            <li><strong>TrackSelector</strong>: 트랙 선택 로직</li>
                            <li><strong>LoadControl</strong>: 버퍼링 제어</li>
                            <li>각 컴포넌트 독립 교체 가능</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">📺</span>
                        사용 사례
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li>OTT 스트리밍 서비스</li>
                            <li>라이브 방송</li>
                            <li>프리미엄 동영상 앱</li>
                            <li>맞춤형 재생 UI 필요 시</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="mermaid-container">
                <div class="mermaid">
                    graph LR
                    UI[UI Layer]
                    PLAYER[ExoPlayer]
                    MS[MediaSource]
                    RENDERER[Renderer]
                    TRACK[TrackSelector]
                    LOAD[LoadControl]

                    UI --> PLAYER
                    PLAYER --> MS
                    PLAYER --> RENDERER
                    PLAYER --> TRACK
                    PLAYER --> LOAD
                    MS -->|Media Data| RENDERER

                </div>
            </div>
        </section>

        <!-- Section 5: Media3 -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">5</span>
                Media3 Library
                <span class="tag tag-recommended">Recommended</span>
            </h2>
            <p class="section-description">
                Jetpack Media3는 Android 미디어 지원 라이브러리의 새로운 통합 버전입니다.
            </p>

            <div class="highlight-box">
                <strong>Media3란?</strong> ExoPlayer를 포함한 모든 미디어 API를 통합하고 단순화한 최신 라이브러리입니다.
            </div>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">🎯</span>
                        핵심 개선사항
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>통합 Player 인터페이스</strong>: 일관된 API</li>
                            <li><strong>ExoPlayer 내장</strong>: 기본 구현 제공</li>
                            <li><strong>간소화된 아키텍처</strong>: 어댑터 불필요</li>
                            <li><strong>MediaSession 통합</strong>: 자동 연결</li>
                            <li><strong>UI 모듈</strong>: 플레이어 컨트롤 제공</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">📦</span>
                        주요 모듈
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><code>media3-exoplayer</code>: ExoPlayer 구현</li>
                            <li><code>media3-session</code>: MediaSession 지원</li>
                            <li><code>media3-ui</code>: UI 컴포넌트</li>
                            <li><code>media3-common</code>: 공통 인터페이스</li>
                            <li><code>media3-datasource</code>: 데이터 소스</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">✨</span>
                        장점
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li>최신 베스트 프랙티스 반영</li>
                            <li>Jetpack 통합</li>
                            <li>지속적인 업데이트</li>
                            <li>간단한 마이그레이션 경로</li>
                            <li>풍부한 문서</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 6: MediaSession -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">6</span>
                MediaSession & MediaController
            </h2>
            <p class="section-description">
                표준화된 미디어 제어를 위한 핵심 컴포넌트입니다.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">🎛️</span>
                        MediaSession
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li>실제 미디어 플레이어 관리</li>
                            <li>재생 상태 유지</li>
                            <li>메타데이터 제공</li>
                            <li>재생 명령 수신</li>
                            <li>여러 Controller와 통신</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">🎮</span>
                        MediaController
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li>UI에서 Session 제어</li>
                            <li>재생 명령 전송 (play, pause, skip)</li>
                            <li>재생 정보 조회</li>
                            <li>여러 위치에서 사용 가능</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">🌐</span>
                        외부 제어
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>Lock Screen</strong>: 잠금 화면 컨트롤</li>
                            <li><strong>Notification</strong>: 알림 미디어 컨트롤</li>
                            <li><strong>Android Auto</strong>: 차량 인포테인먼트</li>
                            <li><strong>Wear OS</strong>: 웨어러블 제어</li>
                            <li><strong>Google Assistant</strong>: 음성 명령</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="mermaid-container">
                <div class="mermaid">
                    graph TB
                    PLAYER[Media Player<br />ExoPlayer]
                    SESSION[MediaSession]

                    subgraph Controllers["MediaControllers"]
                    APP_UI[App UI]
                    LOCKSCREEN[Lock Screen]
                    AUTO[Android Auto]
                    WEAR[Wear OS]
                    ASSISTANT[Assistant]
                    end

                    PLAYER <--> SESSION
                        SESSION <--> APP_UI
                            SESSION <--> LOCKSCREEN
                                SESSION <--> AUTO
                                    SESSION <--> WEAR
                                        SESSION <--> ASSISTANT

                </div>
            </div>
        </section>

        <!-- Section 7: AudioTrack & AudioRecord -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">7</span>
                AudioTrack & AudioRecord
            </h2>
            <p class="section-description">
                Low-level 오디오 API로 PCM 오디오 데이터를 직접 제어합니다.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">🔊</span>
                        AudioTrack
                    </h3>
                    <div class="card-description">
                        <p><strong>Raw PCM 오디오 재생</strong></p>
                        <ul>
                            <li><strong>MODE_STREAM</strong>: 연속 스트리밍<br />- 큰 오디오 데이터<br />- 실시간 생성</li>
                            <li><strong>MODE_STATIC</strong>: 한 번에 로드<br />- 짧은 사운드<br />- 낮은 지연시간</li>
                            <li>오디오 합성</li>
                            <li>DSP 처리</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">🎤</span>
                        AudioRecord
                    </h3>
                    <div class="card-description">
                        <p><strong>Raw PCM 오디오 녹음</strong></p>
                        <ul>
                            <li>마이크에서 직접 녹음</li>
                            <li>실시간 오디오 처리</li>
                            <li>오디오 분석</li>
                            <li>음성 인식 전처리</li>
                            <li>RECORD_AUDIO 권한 필요</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">🎯</span>
                        사용 사례
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>AudioTrack</strong>:
                                <ul>
                                    <li>음악 신디사이저</li>
                                    <li>게임 효과음</li>
                                    <li>VoIP 앱</li>
                                </ul>
                            </li>
                            <li><strong>AudioRecord</strong>:
                                <ul>
                                    <li>음성 분석</li>
                                    <li>실시간 이펙트</li>
                                    <li>오디오 시각화</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 8: Camera2 -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">8</span>
                Camera2 API
            </h2>
            <p class="section-description">
                현대적이고 강력한 카메라 제어 API입니다.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">📷</span>
                        핵심 컴포넌트
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>CameraManager</strong>: 카메라 장치 관리</li>
                            <li><strong>CameraDevice</strong>: 개별 카메라 제어</li>
                            <li><strong>CameraCaptureSession</strong>: 캡처 세션</li>
                            <li><strong>CaptureRequest</strong>: 캡처 설정</li>
                            <li><strong>TextureView</strong>: 프리뷰 표시</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">⚙️</span>
                        고급 제어
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li>수동 노출 제어</li>
                            <li>ISO 설정</li>
                            <li>화이트 밸런스</li>
                            <li>RAW 캡처</li>
                            <li>렌즈/플래시 제어</li>
                            <li>버스트 캡처</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">🆚</span>
                        Camera2 vs CameraX
                    </h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>Camera2</strong>:
                                <ul>
                                    <li>최대 제어</li>
                                    <li>복잡한 API</li>
                                    <li>프로 카메라 앱</li>
                                </ul>
                            </li>
                            <li><strong>CameraX</strong>:
                                <ul>
                                    <li>간단한 API</li>
                                    <li>일반적 사용 사례</li>
                                    <li>권장됨</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 9: API Comparison -->
        <section class="content-section section">
            <h2 class="section-title">
                <span class="section-number">9</span>
                API 비교 및 선택 가이드
            </h2>
            <p class="section-description">
                사용 사례에 따른 적절한 API 선택 가이드입니다.
            </p>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>API</th>
                        <th>기능</th>
                        <th>권장 사용 사례</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Media3</strong></td>
                        <td>스트리밍, DRM, 고급 기능</td>
                        <td>새로운 미디어 앱 (추천)</td>
                    </tr>
                    <tr>
                        <td><strong>ExoPlayer</strong></td>
                        <td>커스터마이징, DASH/HLS</td>
                        <td>고급 스트리밍 요구사항</td>
                    </tr>
                    <tr>
                        <td><strong>MediaPlayer</strong></td>
                        <td>기본 재생</td>
                        <td>간단한 로컬 재생</td>
                    </tr>
                    <tr>
                        <td><strong>MediaSession</strong></td>
                        <td>외부 제어, 백그라운드</td>
                        <td>모든 미디어 앱 (필수)</td>
                    </tr>
                    <tr>
                        <td><strong>AudioTrack</strong></td>
                        <td>PCM 재생, DSP</td>
                        <td>오디오 합성, 게임</td>
                    </tr>
                    <tr>
                        <td><strong>AudioRecord</strong></td>
                        <td>PCM 녹음, 분석</td>
                        <td>음성 처리, 분석</td>
                    </tr>
                    <tr>
                        <td><strong>Camera2</strong></td>
                        <td>수동 제어, RAW</td>
                        <td>프로 카메라 앱</td>
                    </tr>
                    <tr>
                        <td><strong>CameraX</strong></td>
                        <td>간편한 카메라</td>
                        <td>일반 카메라 기능</td>
                    </tr>
                </tbody>
            </table>


        </section>

    </div>

    <script src="scripts/mermaid-theme.js"></script>
    <script src="scripts/theme-toggle.js"></script>
</body>

</html>