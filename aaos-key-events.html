<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Prevent Flash of Incorrect Theme (FOIT) -->
    <script>
    (function(){var t=localStorage.getItem('android-media-framework-theme');if(t)document.documentElement.setAttribute('data-theme',t);else if(window.matchMedia&&window.matchMedia('(prefers-color-scheme:light)').matches)document.documentElement.setAttribute('data-theme','light');})();
    </script>
    <title>AAOS Key Event Handling | Android Media Framework</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@300;400;600;700;900&family=IBM+Plex+Mono:wght@400;500;600&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/design-system.css">

        <style>
        /* Page-specific styles loaded from design-system.css */
    </style>
</head>

<body>
    <nav class="nav">
        <a href="index.html" class="nav-button">
            â† Android Media
        </a>
    </nav>

    <div class="container">
        <header>
            <h1 class="page-title">AAOS Key Event Handling</h1>
            <p class="page-subtitle">Architecture and flow of key events in Android Automotive OS, from hardware input to
                app-level handling.</p>
        </header>

        <!-- Section 1: Input Framework (AOSP) -->
        <section class="section sec-input">
            <h2 class="section-title">
                <span class="section-number">1</span>
                Input Framework (AOSP)
            </h2>
            <p class="section-description">
                AAOSëŠ” í‘œì¤€ Android Input Frameworkë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì§€ë§Œ, ì°¨ëŸ‰ í•˜ë“œì›¨ì–´(í•¸ë“¤ ë¦¬ëª¨ì»¨, ë¡œí„°ë¦¬ ë…¸ë¸Œ ë“±)ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´
                <strong>Vehicle HAL (VHAL)</strong>ì´ ì¶”ê°€ëœ êµ¬ì¡°ë¥¼ ê°€ì§‘ë‹ˆë‹¤.
            </p>
            <div class="mermaid-container">
                <div class="mermaid">
                    graph TD
                    HW[Vehicle Hardware<br />Steering Wheel / Buttons] --> VHAL[Vehicle
                    HAL<br />android.hardware.automotive.vehicle]
                    VHAL -- "VEHICLE_PROPERTY_HW_KEY_INPUT" --> CarService[Car Service]
                    CarService --> InputMgr[InputManagerService]
                    InputMgr --> App[Application]

                </div>
            </div>
            <p style="margin-top: 20px; color: var(--text-secondary);">
                ê¸°ë³¸ì ì¸ í‚¤ ì´ë²¤íŠ¸ëŠ” Linux Kernel Driver(evdev)ë¥¼ í†µí•´ <code>InputReader</code>ë¡œ ì „ë‹¬ë˜ì§€ë§Œ,
                ì°¨ëŸ‰ íŠ¹í™” í‚¤(Custom Input)ëŠ” VHALì„ í†µí•´ <code>CarService</code>ë¡œ ì „ë‹¬ë˜ì–´ ë³„ë„ ì²˜ë¦¬ë©ë‹ˆë‹¤.
            </p>
        </section>

        <!-- Section 2: Car Service (AAOS Specific) -->
        <section class="section sec-car">
            <h2 class="section-title">
                <span class="section-number">2</span>
                Car Service (AAOS ì „ìš©)
            </h2>
            <p class="section-description">
                <strong>CarInputService</strong>ëŠ” AAOSì—ì„œ ì…ë ¥ ì´ë²¤íŠ¸ë¥¼ ì¤‘ì•™ì—ì„œ ê´€ë¦¬í•˜ëŠ” í•µì‹¬ ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤.
                VHALë¡œë¶€í„° ë°›ì€ ì´ë²¤íŠ¸ë¥¼ ë¶„ì„í•˜ì—¬ ì ì ˆí•œ íƒ€ê²Ÿ(Cluster, Main Display, Voice Assistant ë“±)ìœ¼ë¡œ ë¼ìš°íŒ…í•©ë‹ˆë‹¤.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸš—</span> CarInputService</h3>
                    <div class="card-description">ì…ë ¥ ì´ë²¤íŠ¸ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³  í•„í„°ë§í•©ë‹ˆë‹¤.
                        íŠ¹ìˆ˜ í‚¤(Voice, Call)ë¥¼ ê°€ë¡œì±„ê±°ë‚˜, ë¡œí„°ë¦¬ ì´ë²¤íŠ¸ë¥¼ í‘œì¤€ í‚¤ ì´ë²¤íŠ¸ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.</div>
                </div>
                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ¹</span> InstrumentClusterRenderingService</h3>
                    <div class="card-description">ê³„ê¸°íŒ(Cluster) ë””ìŠ¤í”Œë ˆì´ë¥¼ íƒ€ê²Ÿìœ¼ë¡œ í•˜ëŠ” í‚¤ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
                        (ì˜ˆ: í•¸ë“¤ì˜ 'ë‹¤ìŒ ê³¡' ë²„íŠ¼ì´ ê³„ê¸°íŒ UIë¥¼ ì œì–´í•  ë•Œ)</div>
                </div>
                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ”„</span> RotaryController</h3>
                    <div class="card-description">ë¡œí„°ë¦¬ ë…¸ë¸Œ(Rotary Knob) ì…ë ¥ì„ í¬ì»¤ìŠ¤ ì´ë™(Navigation) ì´ë²¤íŠ¸ë¡œ ë³€í™˜í•˜ì—¬
                        í„°ì¹˜ ìŠ¤í¬ë¦°ì´ ì•„ë‹Œ ì¡°ì‘ê³„ì—ì„œë„ ì•±ì„ ì œì–´í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.</div>
                </div>
            </div>
        </section>

        <!-- Section 3: Car Input / UX Restriction -->
        <section class="section sec-ux">
            <h2 class="section-title">
                <span class="section-number">3</span>
                Car Input & UX Restriction
            </h2>
            <p class="section-description">
                ìš´ì „ì ì•ˆì „ì„ ìœ„í•´ ì£¼í–‰ ìƒíƒœ(Driving State)ì— ë”°ë¼ ì…ë ¥ ë° UXê°€ ì œí•œë©ë‹ˆë‹¤.
                <strong>CarUxRestrictionsManager</strong>ëŠ” ì°¨ëŸ‰ì˜ ê¸°ì–´ ìƒíƒœ(Parked, Moving)ì— ë”°ë¼ ì•±ì˜ UI ìƒí˜¸ì‘ìš©ì„ ì œì–´í•©ë‹ˆë‹¤.
            </p>

            <div class="mermaid-container">
                <div class="mermaid">
                    graph LR
                    Sensor[Gear / Speed Sensor] --> CarInfo[CarInfoManager]
                    CarInfo -- "Update State" --> UXR[CarUxRestrictionsManager]
                    UXR -- "onUxRestrictionsChanged()" --> App

                    subgraph App Logic
                    State{Is Moving?}
                    State -- Yes --> Block[Block Input / Hide Video]
                    State -- No --> Allow[Allow Full Interaction]
                    end

                </div>
            </div>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ›‘</span> Moving State</h3>
                    <div class="card-description">í‚¤ë³´ë“œ ì…ë ¥ ì°¨ë‹¨, ë¹„ë””ì˜¤ ì¬ìƒ ì¤‘ì§€, ë¦¬ìŠ¤íŠ¸ ìŠ¤í¬ë¡¤ ì œí•œ, ì„¤ì • ë©”ë‰´ ì§„ì… ì œí•œ.</div>
                </div>
                <div class="card">
                    <h3 class="card-title"><span class="card-icon">âœ…</span> Distraction Optimized</h3>
                    <div class="card-description">ì•±ì€ <code>Distraction Optimized</code>ë¡œ íƒœê¹…ë˜ì–´ì•¼ ì£¼í–‰ ì¤‘ì—ë„ ì œí•œëœ UIë¡œ ì‹¤í–‰ ê°€ëŠ¥í•©ë‹ˆë‹¤.
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: Framework Deep Dive: Media & Volume Key Flow -->
        <section class="section sec-car">
            <h2 class="section-title">
                <span class="section-number">4</span>
                Framework Deep Dive: Media & Volume Key Flow
            </h2>
            <p class="section-description">
                AAOSì—ì„œ ë¯¸ë””ì–´ í‚¤(Play/Pause)ì™€ ë³¼ë¥¨ í‚¤ëŠ” ì„œë¡œ ë‹¤ë¥¸ ê²½ë¡œë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
                ë¯¸ë””ì–´ í‚¤ëŠ” <strong>MediaSessionService</strong>ë¥¼ í†µí•´ í™œì„± ì„¸ì…˜ìœ¼ë¡œ ì „ë‹¬ë˜ë©°,
                ë³¼ë¥¨ í‚¤ëŠ” <strong>CarAudioService</strong>ë¥¼ í†µí•´ í•˜ë“œì›¨ì–´ ì•°í”„ë¥¼ ì§ì ‘ ì œì–´í•©ë‹ˆë‹¤.
            </p>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-indigo); font-size: 1.3rem;">1. Media
                Key Dispatching Flow</h3>
            <p style="color: var(--text-secondary); margin-bottom: 20px;">
                ë¯¸ë””ì–´ í‚¤ ì´ë²¤íŠ¸(<code>KEYCODE_MEDIA_PLAY</code> ë“±)ëŠ” <code>CarInputService</code>ë¥¼ ê±°ì³
                Android í”„ë ˆì„ì›Œí¬ì˜ <code>MediaSessionService</code>ë¡œ ì „ë‹¬ë©ë‹ˆë‹¤.
                ì´í›„ ìš°ì„ ìˆœìœ„(Priority)ì— ë”°ë¼ ê°€ì¥ ì ì ˆí•œ MediaSessionì—ê²Œ ì „ë‹¬ë©ë‹ˆë‹¤.
            </p>
            <div class="mermaid-container">
                <div class="mermaid">
                    sequenceDiagram
                    participant HW as Vehicle HW
                    participant VHAL as Vehicle HAL
                    participant CIS as CarInputService
                    participant IMS as InputManagerService
                    participant MSS as MediaSessionService
                    participant App as Active Media App

                    HW->>VHAL: Press Play Button
                    VHAL->>CIS: VEHICLE_PROPERTY_HW_KEY_INPUT
                    CIS->>CIS: Filter & Process
                    CIS->>IMS: injectKeyEvent(KEYCODE_MEDIA_PLAY)
                    IMS->>MSS: dispatchMediaKeyEvent()
                    MSS->>MSS: Find Priority Session<br />(Active & PlaybackState)
                    MSS->>App: MediaSession.Callback.onPlay()
                    App->>App: Handle Playback
                </div>
            </div>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ¯</span> Dispatch Priority Logic</h3>
                    <div class="card-description">
                        <ol>
                            <li><strong>Active UI:</strong> í˜„ì¬ í™”ë©´ì— ë³´ì´ëŠ” ì•±ì´ ìµœìš°ì„ .</li>
                            <li><strong>Active Session:</strong> UIê°€ ì—†ë”ë¼ë„ ì¬ìƒ ì¤‘(Active)ì¸ <code>MediaSession</code>.</li>
                            <li><strong>Last Active:</strong> ê°€ì¥ ìµœê·¼ì— ì¬ìƒí–ˆë˜ ì„¸ì…˜ (Resumption ì§€ì› ì‹œ).</li>
                        </ol>
                    </div>
                </div>
            </div>

            <h3 style="margin-top: 40px; margin-bottom: 16px; color: var(--accent-indigo); font-size: 1.3rem;">2.
                Volume Key Handling Flow</h3>
            <p style="color: var(--text-secondary); margin-bottom: 20px;">
                AAOSì˜ ë³¼ë¥¨ ì œì–´ëŠ” <strong>Fixed Volume</strong> ì •ì±…ì„ ë”°ë¦…ë‹ˆë‹¤.
                ì†Œí”„íŠ¸ì›¨ì–´ ë¯¹ì„œì—ì„œ ë³¼ë¥¨ì„ ì¤„ì´ì§€ ì•Šê³ , <strong>CarAudioService</strong>ê°€ í•˜ë“œì›¨ì–´ ì•°í”„(Audio Control HAL)ì— ì§ì ‘ ê²Œì¸(Gain) ê°’ì„
                ì „ë‹¬í•©ë‹ˆë‹¤.
            </p>
            <div class="mermaid-container">
                <div class="mermaid">
                    graph TD
                    HW[Volume Knob / Button] --> VHAL[Vehicle HAL]
                    VHAL -- "HW_KEY_INPUT" --> CIS[CarInputService]
                    CIS -- "KEYCODE_VOLUME_UP/DOWN" --> CAS[CarAudioService]

                    subgraph Volume Logic
                    CAS --> Group{Identify Volume Group}
                    Group -- "Music Group" --> Current[Get Current Context]
                    Group -- "Navi Group" --> Priority[Check Priority]
                    end

                    CAS -- "setGroupVolume(zone, group, index)" --> HAL[Audio Control HAL]
                    HAL -- "Apply Hardware Gain" --> Amp[Hardware Amplifier]

                </div>
            </div>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ”Š</span> Volume Groups & Audio Context</h3>
                    <div class="card-description">
                        <p>
                            <code>CarAudioService</code>ëŠ” ì˜¤ë””ì˜¤ ì†ì„±(Usage)ì— ë”°ë¼ <strong>Volume Group</strong>ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.
                            ì˜ˆë¥¼ ë“¤ì–´, ë¯¸ë””ì–´ ë³¼ë¥¨ì„ ì¡°ì ˆí•  ë•Œ ë‚´ë¹„ê²Œì´ì…˜ ì•ˆë‚´ ë³¼ë¥¨ì€ ì˜í–¥ì„ ë°›ì§€ ì•Šë„ë¡ ê·¸ë£¹ë³„ë¡œ ë…ë¦½ì ì¸ ì œì–´ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 5: App Level Handling -->
        <section class="section sec-input">
            <h2 class="section-title">
                <span class="section-number">5</span>
                App ë ˆë²¨ ì²˜ë¦¬
            </h2>
            <p class="section-description">
                ì•± ê°œë°œìëŠ” í‘œì¤€ Android APIë¥¼ ì‚¬ìš©í•˜ì—¬ í‚¤ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•˜ë˜, AAOSì˜ íŠ¹ìˆ˜ì„±ì„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.
            </p>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-teal); font-size: 1.3rem;">Best
                Practices</h3>
            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title"><span class="card-icon">âœ…</span> Checklist</h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>MediaSession Callback êµ¬í˜„:</strong> <code>onPlay()</code>,
                                <code>onPause()</code>,
                                <code>onSkipToNext()</code> ë“±ì„ êµ¬í˜„í•˜ì—¬ ë¯¸ë””ì–´ í‚¤ì— ëŒ€ì‘í•©ë‹ˆë‹¤.
                            </li>
                            <li><strong>Audio Focus ê´€ë¦¬:</strong> ì¬ìƒ ì‹œì‘ ì „ ë°˜ë“œì‹œ í¬ì»¤ìŠ¤ë¥¼ ìš”ì²­í•˜ê³ ,
                                <code>onAudioFocusChange()</code>ì—ì„œ í¬ì»¤ìŠ¤
                                ì†ì‹¤(Loss)ì— ëŒ€ì‘í•©ë‹ˆë‹¤.
                            </li>
                            <li><strong>UX Restriction ì¤€ìˆ˜:</strong> <code>CarUxRestrictionsManager</code>ë¥¼ êµ¬ë…í•˜ì—¬ ì£¼í–‰ ì¤‘ UIë¥¼
                                ë‹¨ìˆœí™”í•˜ê±°ë‚˜ ì…ë ¥ì„
                                ì°¨ë‹¨í•´ì•¼ í•©ë‹ˆë‹¤.</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="mermaid-container">
                <div class="mermaid">
                    sequenceDiagram
                    participant HW as HW Button
                    participant CS as CarService
                    participant MS as MediaSession
                    participant App as Media App

                    HW->>CS: Key Event (KEYCODE_MEDIA_PLAY)
                    CS->>MS: Dispatch Media Button
                    MS->>App: onPlay() Callback
                    App->>App: requestAudioFocus()
                    App->>App: Start Playback
                </div>
            </div>
        </section>

        <!-- Section 6: Code Examples -->
        <section class="section sec-input">
            <h2 class="section-title">
                <span class="section-number">6</span>
                ì‹¤ì œ ì½”ë“œ ì˜ˆì‹œ
            </h2>
            <p class="section-description">
                AAOS í™˜ê²½ì—ì„œ í‚¤ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì‹¤ì œ Kotlin/Java ì½”ë“œ ì˜ˆì‹œì…ë‹ˆë‹¤.
            </p>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-teal); font-size: 1.3rem;">ğŸ“± MediaSession Callback êµ¬í˜„</h3>
            <div class="code-block">
                <pre><code>// MediaSession Callbackìœ¼ë¡œ ë¯¸ë””ì–´ í‚¤ ì²˜ë¦¬
class CarMediaPlayer(private val context: Context) {
    private lateinit var mediaSession: MediaSessionCompat
    private lateinit var player: MediaPlayer

    fun initialize() {
        mediaSession = MediaSessionCompat(context, "CarMediaPlayer").apply {
            setFlags(
                MediaSessionCompat.FLAG_HANDLES_MEDIA_BUTTONS or
                MediaSessionCompat.FLAG_HANDLES_TRANSPORT_CONTROLS
            )

            setCallback(mediaSessionCallback)

            // PlaybackState ì´ˆê¸°í™”
            setPlaybackState(
                PlaybackStateCompat.Builder()
                    .setActions(
                        PlaybackStateCompat.ACTION_PLAY or
                        PlaybackStateCompat.ACTION_PAUSE or
                        PlaybackStateCompat.ACTION_SKIP_TO_NEXT or
                        PlaybackStateCompat.ACTION_SKIP_TO_PREVIOUS
                    )
                    .setState(PlaybackStateCompat.STATE_NONE, 0, 1.0f)
                    .build()
            )

            isActive = true
        }
    }

    private val mediaSessionCallback = object : MediaSessionCompat.Callback() {
        override fun onPlay() {
            Log.d("CarMedia", "Hardware Play button pressed")

            // Audio Focus ìš”ì²­
            if (requestAudioFocus()) {
                player.start()
                updatePlaybackState(PlaybackStateCompat.STATE_PLAYING)
            }
        }

        override fun onPause() {
            Log.d("CarMedia", "Hardware Pause button pressed")
            player.pause()
            updatePlaybackState(PlaybackStateCompat.STATE_PAUSED)
        }

        override fun onSkipToNext() {
            Log.d("CarMedia", "Hardware Next button pressed")
            playNextTrack()
        }

        override fun onSkipToPrevious() {
            Log.d("CarMedia", "Hardware Previous button pressed")
            playPreviousTrack()
        }

        override fun onStop() {
            Log.d("CarMedia", "Hardware Stop button pressed")
            player.stop()
            abandonAudioFocus()
            updatePlaybackState(PlaybackStateCompat.STATE_STOPPED)
        }

        override fun onSeekTo(pos: Long) {
            Log.d("CarMedia", "Seek to: $pos")
            player.seekTo(pos.toInt())
        }

        override fun onMediaButtonEvent(mediaButtonEvent: Intent?): Boolean {
            Log.d("CarMedia", "Media button event: $mediaButtonEvent")
            return super.onMediaButtonEvent(mediaButtonEvent)
        }
    }

    private fun updatePlaybackState(state: Int) {
        val position = if (::player.isInitialized) player.currentPosition.toLong() else 0

        mediaSession.setPlaybackState(
            PlaybackStateCompat.Builder()
                .setState(state, position, 1.0f)
                .setActions(
                    PlaybackStateCompat.ACTION_PLAY or
                    PlaybackStateCompat.ACTION_PAUSE or
                    PlaybackStateCompat.ACTION_SKIP_TO_NEXT or
                    PlaybackStateCompat.ACTION_SKIP_TO_PREVIOUS
                )
                .build()
        )
    }
}</code></pre>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-teal); font-size: 1.3rem;">âŒ¨ï¸ Activityì—ì„œ í‚¤ ì´ë²¤íŠ¸ ì²˜ë¦¬</h3>
            <div class="code-block">
                <pre><code>// Activityì—ì„œ ì§ì ‘ í‚¤ ì´ë²¤íŠ¸ ì²˜ë¦¬
class CarMediaActivity : AppCompatActivity() {

    override fun onKeyDown(keyCode: Int, event: KeyEvent?): Boolean {
        return when (keyCode) {
            KeyEvent.KEYCODE_MEDIA_PLAY -> {
                Log.d("CarMedia", "Play key pressed")
                handlePlayAction()
                true
            }

            KeyEvent.KEYCODE_MEDIA_PAUSE -> {
                Log.d("CarMedia", "Pause key pressed")
                handlePauseAction()
                true
            }

            KeyEvent.KEYCODE_MEDIA_NEXT -> {
                Log.d("CarMedia", "Next key pressed")
                handleNextAction()
                true
            }

            KeyEvent.KEYCODE_MEDIA_PREVIOUS -> {
                Log.d("CarMedia", "Previous key pressed")
                handlePreviousAction()
                true
            }

            KeyEvent.KEYCODE_VOLUME_UP -> {
                Log.d("CarMedia", "Volume Up")
                // CarAudioServiceê°€ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•˜ë¯€ë¡œ
                // ì¼ë°˜ì ìœ¼ë¡œ super í˜¸ì¶œë¡œ ì¶©ë¶„
                super.onKeyDown(keyCode, event)
            }

            KeyEvent.KEYCODE_VOLUME_DOWN -> {
                Log.d("CarMedia", "Volume Down")
                super.onKeyDown(keyCode, event)
            }

            // ë¡œí„°ë¦¬ ë…¸ë¸Œ íšŒì „ (AAOS íŠ¹í™”)
            KeyEvent.KEYCODE_DPAD_CENTER -> {
                Log.d("CarMedia", "Rotary Center (Select)")
                handleSelectAction()
                true
            }

            else -> super.onKeyDown(keyCode, event)
        }
    }

    override fun onKeyUp(keyCode: Int, event: KeyEvent?): Boolean {
        // Key Up ì´ë²¤íŠ¸ ì²˜ë¦¬ (í•„ìš” ì‹œ)
        return super.onKeyUp(keyCode, event)
    }

    // Dispatch ì „ì— í‚¤ ì´ë²¤íŠ¸ ê°€ë¡œì±„ê¸°
    override fun dispatchKeyEvent(event: KeyEvent?): Boolean {
        Log.d("CarMedia", "Key event: ${event?.keyCode}, action: ${event?.action}")
        return super.dispatchKeyEvent(event)
    }
}</code></pre>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-teal); font-size: 1.3rem;">ğŸ¯ Audio Focusì™€ í‚¤ ì´ë²¤íŠ¸ í†µí•©</h3>
            <div class="code-block">
                <pre><code>// Audio Focusë¥¼ ê³ ë ¤í•œ ë¯¸ë””ì–´ í‚¤ ì²˜ë¦¬
class MediaKeyHandler(private val context: Context) {
    private val audioManager = context.getSystemService(Context.AUDIO_SERVICE) as AudioManager
    private var audioFocusRequest: AudioFocusRequest? = null
    private var shouldResumeOnFocusGain = false

    fun handlePlayKey() {
        if (requestAudioFocus()) {
            // Focus íšë“ ì„±ê³µ â†’ ì¬ìƒ
            startPlayback()
        } else {
            // Focus íšë“ ì‹¤íŒ¨ â†’ ì§€ì—°ëœ ì¬ìƒ (Delayed Focus Gain)
            shouldResumeOnFocusGain = true
            Log.w("MediaKey", "Audio focus request delayed")
        }
    }

    fun handlePauseKey() {
        pausePlayback()
        // FocusëŠ” ìœ ì§€ (ì¼ì‹œì •ì§€ ìƒíƒœì—ì„œë„)
    }

    private fun requestAudioFocus(): Boolean {
        val audioAttributes = AudioAttributes.Builder()
            .setUsage(AudioAttributes.USAGE_MEDIA)
            .setContentType(AudioAttributes.CONTENT_TYPE_MUSIC)
            .build()

        audioFocusRequest = AudioFocusRequest.Builder(AudioManager.AUDIOFOCUS_GAIN)
            .setAudioAttributes(audioAttributes)
            .setOnAudioFocusChangeListener(focusChangeListener)
            .setAcceptsDelayedFocusGain(true)  // AAOSì—ì„œ ì¤‘ìš”
            .build()

        val result = audioManager.requestAudioFocus(audioFocusRequest!!)
        return result == AudioManager.AUDIOFOCUS_REQUEST_GRANTED
    }

    private val focusChangeListener = AudioManager.OnAudioFocusChangeListener { focusChange ->
        when (focusChange) {
            AudioManager.AUDIOFOCUS_GAIN -> {
                Log.d("MediaKey", "Audio focus gained")
                if (shouldResumeOnFocusGain) {
                    startPlayback()
                    shouldResumeOnFocusGain = false
                }
            }

            AudioManager.AUDIOFOCUS_LOSS -> {
                Log.d("MediaKey", "Audio focus lost permanently")
                pausePlayback()
                shouldResumeOnFocusGain = false
            }

            AudioManager.AUDIOFOCUS_LOSS_TRANSIENT -> {
                Log.d("MediaKey", "Audio focus lost temporarily")
                pausePlayback()
                shouldResumeOnFocusGain = true
            }

            AudioManager.AUDIOFOCUS_LOSS_TRANSIENT_CAN_DUCK -> {
                Log.d("MediaKey", "Ducking (volume down)")
                // ë³¼ë¥¨ ê°ì†Œ (20%)
            }
        }
    }
}</code></pre>
            </div>
        </section>

        <!-- Section 7: Rotary Controller Details -->
        <section class="section sec-car">
            <h2 class="section-title">
                <span class="section-number">7</span>
                Rotary Controller ìƒì„¸
            </h2>
            <p class="section-description">
                AAOSì˜ Rotary ControllerëŠ” ë¡œí„°ë¦¬ ë…¸ë¸Œ ì…ë ¥ì„ í¬ì»¤ìŠ¤ ì´ë™ ë° ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ”„</span> RotaryService</h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>ì—­í• </strong>: Rotary ì…ë ¥ â†’ Focus Navigation</li>
                            <li><strong>ë°©í–¥</strong>: CW (ì‹œê³„ë°©í–¥), CCW (ë°˜ì‹œê³„ë°©í–¥)</li>
                            <li><strong>Nudge</strong>: í•œ ì¹¸ì”© ì´ë™</li>
                            <li><strong>Inertia</strong>: ë¹ ë¥¸ íšŒì „ ì‹œ ê´€ì„± ìŠ¤í¬ë¡¤</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ¯</span> Focus Navigation</h3>
                    <div class="card-description">
                        <ul>
                            <li>View ê³„ì¸µì—ì„œ í¬ì»¤ìŠ¤ ê°€ëŠ¥í•œ í•­ëª© íƒìƒ‰</li>
                            <li>Directional Focus (Up, Down, Left, Right)</li>
                            <li>RecyclerView ìŠ¤í¬ë¡¤ ì§€ì›</li>
                            <li>Custom FocusFinder êµ¬í˜„ ê°€ëŠ¥</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title"><span class="card-icon">âš™ï¸</span> ì„¤ì •</h3>
                    <div class="card-description">
                        <ul>
                            <li>rotary_nudge_direction.xml ì„¤ì •</li>
                            <li>ì•±ë³„ Rotary ë™ì‘ ì»¤ìŠ¤í„°ë§ˆì´ì§•</li>
                            <li>ì†ë„ ë° ê°€ì†ë„ íŠœë‹</li>
                            <li>Direct Manipulation ëª¨ë“œ</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="mermaid-container">
                <div class="mermaid">
                    graph LR
                    HW[Rotary Knob] --> VHAL[Vehicle HAL<br />VEHICLE_PROPERTY_HW_ROTARY_INPUT]
                    VHAL --> RS[RotaryService]

                    RS --> NM{Nudge Mode?}

                    NM -->|Yes| FC[FocusController<br />requestFocus()]
                    NM -->|No| SC[ScrollController<br />scrollBy()]

                    FC --> VIEW1[Focusable View 1]
                    FC --> VIEW2[Focusable View 2]

                    SC --> RV[RecyclerView.smoothScrollBy()]

                    style NM fill:#f9f
                </div>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-indigo); font-size: 1.3rem;">ğŸ”§ Rotary ì´ë²¤íŠ¸ ì²˜ë¦¬</h3>
            <div class="code-block">
                <pre><code>// Viewì—ì„œ Rotary ì´ë²¤íŠ¸ ì²˜ë¦¬
class RotaryAwareView @JvmOverloads constructor(
    context: Context,
    attrs: AttributeSet? = null
) : View(context, attrs) {

    override fun onGenericMotionEvent(event: MotionEvent?): Boolean {
        if (event?.source == InputDevice.SOURCE_ROTARY_ENCODER) {
            // Rotary íšŒì „ ê°ì§€
            val scroll = event.getAxisValue(MotionEvent.AXIS_SCROLL)

            when {
                scroll > 0 -> {
                    // ì‹œê³„ë°©í–¥ íšŒì „
                    Log.d("Rotary", "Clockwise: $scroll")
                    handleClockwiseRotation(scroll)
                    return true
                }
                scroll < 0 -> {
                    // ë°˜ì‹œê³„ë°©í–¥ íšŒì „
                    Log.d("Rotary", "Counter-clockwise: $scroll")
                    handleCounterClockwiseRotation(scroll)
                    return true
                }
            }
        }

        return super.onGenericMotionEvent(event)
    }

    private fun handleClockwiseRotation(amount: Float) {
        // ë‹¤ìŒ í•­ëª©ìœ¼ë¡œ í¬ì»¤ìŠ¤ ì´ë™
        val nextView = focusSearch(View.FOCUS_DOWN)
        nextView?.requestFocus()
    }

    private fun handleCounterClockwiseRotation(amount: Float) {
        // ì´ì „ í•­ëª©ìœ¼ë¡œ í¬ì»¤ìŠ¤ ì´ë™
        val prevView = focusSearch(View.FOCUS_UP)
        prevView?.requestFocus()
    }
}

// RecyclerViewì—ì„œ Rotary ìŠ¤í¬ë¡¤
class RotaryRecyclerView @JvmOverloads constructor(
    context: Context,
    attrs: AttributeSet? = null
) : RecyclerView(context, attrs) {

    override fun onGenericMotionEvent(event: MotionEvent?): Boolean {
        if (event?.source == InputDevice.SOURCE_ROTARY_ENCODER) {
            val scroll = event.getAxisValue(MotionEvent.AXIS_SCROLL)

            if (scroll != 0f) {
                // ìŠ¤í¬ë¡¤ ì–‘ ê³„ì‚° (í•œ ì¹¸ = 100px)
                val scrollAmount = (scroll * 100).toInt()
                smoothScrollBy(0, -scrollAmount)
                return true
            }
        }

        return super.onGenericMotionEvent(event)
    }
}</code></pre>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-indigo); font-size: 1.3rem;">ğŸ“Š Rotary Nudge Direction</h3>
            <div class="comparison-table">
                <table>
                    <thead>
                        <tr>
                            <th>íšŒì „ ë°©í–¥</th>
                            <th>í¬ì»¤ìŠ¤ ì´ë™</th>
                            <th>ìŠ¤í¬ë¡¤ ë°©í–¥</th>
                            <th>ì ìš© ì˜ˆì‹œ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ì‹œê³„ë°©í–¥ (CW)</td>
                            <td>FOCUS_DOWN / FOCUS_FORWARD</td>
                            <td>ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤</td>
                            <td>ë¦¬ìŠ¤íŠ¸ì—ì„œ ë‹¤ìŒ í•­ëª©</td>
                        </tr>
                        <tr>
                            <td>ë°˜ì‹œê³„ë°©í–¥ (CCW)</td>
                            <td>FOCUS_UP / FOCUS_BACKWARD</td>
                            <td>ìœ„ë¡œ ìŠ¤í¬ë¡¤</td>
                            <td>ë¦¬ìŠ¤íŠ¸ì—ì„œ ì´ì „ í•­ëª©</td>
                        </tr>
                        <tr>
                            <td>ì„¼í„° ë²„íŠ¼ í´ë¦­</td>
                            <td>KEYCODE_DPAD_CENTER</td>
                            <td>-</td>
                            <td>í•­ëª© ì„ íƒ / í™•ì¸</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Section 8: Vehicle HAL Properties -->
        <section class="section sec-input">
            <h2 class="section-title">
                <span class="section-number">8</span>
                Vehicle HAL Properties
            </h2>
            <p class="section-description">
                ì°¨ëŸ‰ í•˜ë“œì›¨ì–´ ì…ë ¥ì„ Androidë¡œ ì „ë‹¬í•˜ëŠ” Vehicle HAL Property êµ¬ì¡°ì…ë‹ˆë‹¤.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ”‘</span> HW_KEY_INPUT</h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>Property ID</strong>: 0x11410A00 (287,314,432) <span style="color: #f59e0b; font-size: 0.85em;">âš ï¸ AOSP ê²€ì¦ í•„ìš”</span></li>
                            <li><strong>íƒ€ì…</strong>: VehiclePropValue (int32 array)</li>
                            <li><strong>ë°ì´í„°</strong>: [action, keyCode, displayType]</li>
                            <li><strong>ìš©ë„</strong>: í•¸ë“¤ ë²„íŠ¼ ë“± ì¼ë°˜ í‚¤</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ”„</span> HW_ROTARY_INPUT</h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>Property ID</strong>: 0x11410A20 (287,314,464) <span style="color: #10b981; font-size: 0.85em;">âœ… AOSP ê²€ì¦ ì™„ë£Œ</span></li>
                            <li><strong>íƒ€ì…</strong>: VehiclePropValue (int32 array)</li>
                            <li><strong>ë°ì´í„°</strong>: [rotaryInputType, detents, targetDisplay]</li>
                            <li><strong>ìš©ë„</strong>: Rotary Knob íšŒì „</li>
                            <li style="margin-top: 8px; padding: 8px; background: rgba(16, 185, 129, 0.1); border-left: 3px solid #10b981; font-size: 0.9em;">
                                <strong>ì¶œì²˜</strong>: <code>hardware/interfaces/automotive/vehicle/2.0/types.hal</code><br>
                                ê³„ì‚°: <code>0x0A20 | VehiclePropertyGroup:SYSTEM | VehiclePropertyType:INT32_VEC | VehicleArea:GLOBAL</code>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ“º</span> Display Type</h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>0</strong>: MAIN (ì„¼í„° ë””ìŠ¤í”Œë ˆì´)</li>
                            <li><strong>1</strong>: CLUSTER (ê³„ê¸°íŒ)</li>
                            <li><strong>2</strong>: HUD (í—¤ë“œì—… ë””ìŠ¤í”Œë ˆì´)</li>
                            <li><strong>-1</strong>: UNKNOWN (ì‹œìŠ¤í…œì´ ê²°ì •)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-teal); font-size: 1.3rem;">ğŸ“‹ VehiclePropValue êµ¬ì¡°</h3>
            <div class="code-block">
                <pre><code>// Vehicle HALì—ì„œ Androidë¡œ ì „ë‹¬ë˜ëŠ” ë°ì´í„° êµ¬ì¡°
message VehiclePropValue {
    int32 prop;           // Property ID (ì˜ˆ: 0x0A10 for HW_KEY_INPUT)
    int32 timestamp;      // íƒ€ì„ìŠ¤íƒ¬í”„ (ms)
    int32 areaId;         // Zone ID (ë©€í‹°ì¡´ ì§€ì› ì‹œ)

    // HW_KEY_INPUT ë°ì´í„° (int32Values)
    repeated int32 int32Values = [
        action,           // 0: DOWN, 1: UP
        keyCode,          // Android KeyCode (ì˜ˆ: 126 = KEYCODE_MEDIA_PLAY)
        displayType,      // 0: MAIN, 1: CLUSTER
        repeatCount       // ë¡± í”„ë ˆìŠ¤ ì‹œ ë°˜ë³µ íšŸìˆ˜
    ];
}

// HW_ROTARY_INPUT ë°ì´í„°
repeated int32 int32Values = [
    rotaryInputType,      // 0: ROTARY_INPUT_TYPE_SYSTEM_NAVIGATION
    detents,              // íšŒì „ ì–‘ (í´ë¦­ ìˆ˜, ì–‘ìˆ˜=CW, ìŒìˆ˜=CCW)
    targetDisplay,        // íƒ€ê²Ÿ ë””ìŠ¤í”Œë ˆì´ (0: MAIN, 1: CLUSTER)
    velocityInMillisPerDetent  // íšŒì „ ì†ë„ (ms/detent)
];</code></pre>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-teal); font-size: 1.3rem;">ğŸ“Š Key Action & Display Type</h3>
            <div class="comparison-table">
                <table>
                    <thead>
                        <tr>
                            <th>í•­ëª©</th>
                            <th>ê°’</th>
                            <th>ì˜ë¯¸</th>
                            <th>ì˜ˆì‹œ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td rowspan="2">Action</td>
                            <td>0</td>
                            <td>KEY_DOWN</td>
                            <td>ë²„íŠ¼ ëˆŒë¦¼</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>KEY_UP</td>
                            <td>ë²„íŠ¼ ë–¼ì–´ì§</td>
                        </tr>
                        <tr>
                            <td rowspan="4">Display Type</td>
                            <td>0</td>
                            <td>MAIN</td>
                            <td>ì„¼í„° ë””ìŠ¤í”Œë ˆì´</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>CLUSTER</td>
                            <td>ê³„ê¸°íŒ ë””ìŠ¤í”Œë ˆì´</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>HUD</td>
                            <td>í—¤ë“œì—… ë””ìŠ¤í”Œë ˆì´</td>
                        </tr>
                        <tr>
                            <td>-1</td>
                            <td>UNKNOWN</td>
                            <td>ì‹œìŠ¤í…œ ìë™ ê²°ì •</td>
                        </tr>
                        <tr>
                            <td rowspan="2">Rotary Type</td>
                            <td>0</td>
                            <td>SYSTEM_NAVIGATION</td>
                            <td>í¬ì»¤ìŠ¤ ì´ë™ (Nudge)</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>VOLUME</td>
                            <td>ë³¼ë¥¨ ì œì–´ ì „ìš©</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-teal); font-size: 1.3rem;">ğŸ”§ Vehicle HAL êµ¬í˜„ ì˜ˆì‹œ (C++)</h3>
            <div class="code-block">
                <pre><code>// Vehicle HALì—ì„œ í‚¤ ì´ë²¤íŠ¸ ì „ì†¡ (C++)
void VehicleHalImpl::onButtonPress(int keyCode, int displayType) {
    VehiclePropValue value;
    value.prop = toInt(VehicleProperty::HW_KEY_INPUT);
    value.timestamp = elapsedRealtimeNano();
    value.areaId = 0;

    // int32Values: [action, keyCode, displayType, repeatCount]
    value.value.int32Values = {
        0,              // 0 = KEY_DOWN
        keyCode,        // Android KeyCode (ì˜ˆ: 126 = MEDIA_PLAY)
        displayType,    // 0 = MAIN, 1 = CLUSTER
        0               // repeatCount
    };

    // CarServiceë¡œ ì „ì†¡
    mCallback->onPropertyEvent({value});
}

// Rotary ì´ë²¤íŠ¸ ì „ì†¡
void VehicleHalImpl::onRotaryInput(int detents) {
    VehiclePropValue value;
    value.prop = toInt(VehicleProperty::HW_ROTARY_INPUT);
    value.timestamp = elapsedRealtimeNano();
    value.areaId = 0;

    // int32Values: [rotaryInputType, detents, targetDisplay, velocity]
    value.value.int32Values = {
        0,              // 0 = SYSTEM_NAVIGATION
        detents,        // ì–‘ìˆ˜ = CW, ìŒìˆ˜ = CCW
        0,              // 0 = MAIN display
        100             // 100ms per detent
    };

    mCallback->onPropertyEvent({value});
}</code></pre>
            </div>
        </section>

        <!-- Section 9: Key Code Mapping -->
        <section class="section sec-car">
            <h2 class="section-title">
                <span class="section-number">9</span>
                Key Code Mapping
            </h2>
            <p class="section-description">
                Linux Input Event Codeì—ì„œ Android KeyCodeë¡œì˜ ë§¤í•‘ ë° ì°¨ëŸ‰ íŠ¹í™” í‚¤ ì½”ë“œì…ë‹ˆë‹¤.
            </p>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-indigo); font-size: 1.3rem;">ğŸ“Š ë¯¸ë””ì–´ í‚¤ ë§¤í•‘</h3>
            <div class="comparison-table">
                <table>
                    <thead>
                        <tr>
                            <th>Linux Event Code</th>
                            <th>Android KeyCode</th>
                            <th>ê°’</th>
                            <th>ì„¤ëª…</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>KEY_PLAYPAUSE (164)</td>
                            <td>KEYCODE_MEDIA_PLAY_PAUSE</td>
                            <td>85</td>
                            <td>ì¬ìƒ/ì¼ì‹œì •ì§€ í† ê¸€</td>
                        </tr>
                        <tr>
                            <td>KEY_PLAY (207)</td>
                            <td>KEYCODE_MEDIA_PLAY</td>
                            <td>126</td>
                            <td>ì¬ìƒ</td>
                        </tr>
                        <tr>
                            <td>KEY_PAUSE (119)</td>
                            <td>KEYCODE_MEDIA_PAUSE</td>
                            <td>127</td>
                            <td>ì¼ì‹œì •ì§€</td>
                        </tr>
                        <tr>
                            <td>KEY_NEXTSONG (163)</td>
                            <td>KEYCODE_MEDIA_NEXT</td>
                            <td>87</td>
                            <td>ë‹¤ìŒ ê³¡</td>
                        </tr>
                        <tr>
                            <td>KEY_PREVIOUSSONG (165)</td>
                            <td>KEYCODE_MEDIA_PREVIOUS</td>
                            <td>88</td>
                            <td>ì´ì „ ê³¡</td>
                        </tr>
                        <tr>
                            <td>KEY_STOP (128)</td>
                            <td>KEYCODE_MEDIA_STOP</td>
                            <td>86</td>
                            <td>ì •ì§€</td>
                        </tr>
                        <tr>
                            <td>KEY_FASTFORWARD (208)</td>
                            <td>KEYCODE_MEDIA_FAST_FORWARD</td>
                            <td>90</td>
                            <td>ë¹¨ë¦¬ê°ê¸°</td>
                        </tr>
                        <tr>
                            <td>KEY_REWIND (168)</td>
                            <td>KEYCODE_MEDIA_REWIND</td>
                            <td>89</td>
                            <td>ë˜ê°ê¸°</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-indigo); font-size: 1.3rem;">ğŸ“Š ì°¨ëŸ‰ íŠ¹í™” í‚¤ ì½”ë“œ (AAOS)</h3>
            <div class="comparison-table">
                <table>
                    <thead>
                        <tr>
                            <th>KeyCode</th>
                            <th>ê°’</th>
                            <th>ì„¤ëª…</th>
                            <th>ì‚¬ìš© ì˜ˆì‹œ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>KEYCODE_STEM_PRIMARY</td>
                            <td>264</td>
                            <td>í•¸ë“¤ Primary ë²„íŠ¼</td>
                            <td>ìŒì„± ì¸ì‹ ì‹œì‘</td>
                        </tr>
                        <tr>
                            <td>KEYCODE_STEM_1</td>
                            <td>265</td>
                            <td>í•¸ë“¤ ë²„íŠ¼ 1</td>
                            <td>í†µí™” ë°›ê¸°/ëŠê¸°</td>
                        </tr>
                        <tr>
                            <td>KEYCODE_STEM_2</td>
                            <td>266</td>
                            <td>í•¸ë“¤ ë²„íŠ¼ 2</td>
                            <td>ì»¤ìŠ¤í…€ ê¸°ëŠ¥</td>
                        </tr>
                        <tr>
                            <td>KEYCODE_STEM_3</td>
                            <td>267</td>
                            <td>í•¸ë“¤ ë²„íŠ¼ 3</td>
                            <td>ì»¤ìŠ¤í…€ ê¸°ëŠ¥</td>
                        </tr>
                        <tr>
                            <td>KEYCODE_CALL</td>
                            <td>5</td>
                            <td>í†µí™” ë²„íŠ¼</td>
                            <td>ì „í™” ê±¸ê¸°</td>
                        </tr>
                        <tr>
                            <td>KEYCODE_ENDCALL</td>
                            <td>6</td>
                            <td>í†µí™” ì¢…ë£Œ ë²„íŠ¼</td>
                            <td>ì „í™” ëŠê¸°</td>
                        </tr>
                        <tr>
                            <td>KEYCODE_VOICE_ASSIST</td>
                            <td>231</td>
                            <td>ìŒì„± ì¸ì‹ ë²„íŠ¼</td>
                            <td>Google Assistant</td>
                        </tr>
                        <tr>
                            <td>KEYCODE_NAVIGATE_PREVIOUS</td>
                            <td>260</td>
                            <td>ì´ì „ìœ¼ë¡œ ì´ë™</td>
                            <td>ë¸Œë¼ìš°ì € ë’¤ë¡œê°€ê¸°</td>
                        </tr>
                        <tr>
                            <td>KEYCODE_NAVIGATE_NEXT</td>
                            <td>261</td>
                            <td>ë‹¤ìŒìœ¼ë¡œ ì´ë™</td>
                            <td>ë¸Œë¼ìš°ì € ì•ìœ¼ë¡œ</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-indigo); font-size: 1.3rem;">ğŸ“‹ Generic.kl í‚¤ ë§¤í•‘ íŒŒì¼</h3>
            <div class="code-block">
                <pre><code># Generic.kl - Key Layout íŒŒì¼
# ìœ„ì¹˜: frameworks/base/data/keyboards/Generic.kl

# ë¯¸ë””ì–´ í‚¤ ë§¤í•‘
key 164   MEDIA_PLAY_PAUSE
key 207   MEDIA_PLAY
key 119   MEDIA_PAUSE
key 163   MEDIA_NEXT
key 165   MEDIA_PREVIOUS
key 128   MEDIA_STOP
key 208   MEDIA_FAST_FORWARD
key 168   MEDIA_REWIND

# ë³¼ë¥¨ í‚¤
key 115   VOLUME_UP
key 114   VOLUME_DOWN
key 113   VOLUME_MUTE

# ë„¤ë¹„ê²Œì´ì…˜ í‚¤
key 103   DPAD_UP
key 108   DPAD_DOWN
key 105   DPAD_LEFT
key 106   DPAD_RIGHT
key 352   DPAD_CENTER

# í†µí™” í‚¤
key 231   CALL
key 107   ENDCALL

# ìŒì„± ì¸ì‹
key 582   VOICE_ASSIST</code></pre>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-indigo); font-size: 1.3rem;">ğŸ”§ Custom Key ì •ì˜ (Vendor Overlay)</h3>
            <div class="code-block">
                <pre><code>// Vendor Overlayë¡œ ì»¤ìŠ¤í…€ í‚¤ ì •ì˜
// hardware/[vendor]/[device]/overlay/frameworks/base/core/res/res/values/config.xml

&lt;resources&gt;
    &lt;!-- Custom key behavior for STEM_PRIMARY --&gt;
    &lt;integer name="config_longPressOnStemPrimaryBehavior"&gt;2&lt;/integer&gt;
    &lt;!-- 0: Nothing, 1: Voice Assist, 2: Custom Action --&gt;

    &lt;!-- Custom key mapping --&gt;
    &lt;string-array name="config_custom_hardware_keys"&gt;
        &lt;item&gt;264:VOICE_ASSIST&lt;/item&gt;    &lt;!-- STEM_PRIMARY --&gt;
        &lt;item&gt;265:CALL&lt;/item&gt;            &lt;!-- STEM_1 --&gt;
        &lt;item&gt;266:MEDIA_PLAY_PAUSE&lt;/item&gt; &lt;!-- STEM_2 --&gt;
    &lt;/string-array&gt;
&lt;/resources&gt;</code></pre>
            </div>
        </section>

        <!-- Section 10: CarInputService Details -->
        <section class="section sec-input">
            <h2 class="section-title">
                <span class="section-number">10</span>
                CarInputService ìƒì„¸
            </h2>
            <p class="section-description">
                CarInputServiceëŠ” VHALì—ì„œ ë°›ì€ í‚¤ ì´ë²¤íŠ¸ë¥¼ Android Input Frameworkë¡œ ì£¼ì…í•˜ëŠ” í•µì‹¬ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ’‰</span> í‚¤ ì¸ì ì…˜</h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>InputManager.injectInputEvent()</strong></li>
                            <li>VHAL â†’ KeyEvent ê°ì²´ ìƒì„±</li>
                            <li>InputDispatcherë¡œ ì „ë‹¬</li>
                            <li>ì‹œìŠ¤í…œ ê¶Œí•œ í•„ìš” (INJECT_EVENTS)</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ¯</span> Display Routing</h3>
                    <div class="card-description">
                        <ul>
                            <li>displayType ê¸°ë°˜ íƒ€ê²Ÿ ê²°ì •</li>
                            <li>MAIN: ActivityTaskManager</li>
                            <li>CLUSTER: ClusterHomeService</li>
                            <li>UNKNOWN: í¬ì»¤ìŠ¤ëœ ë””ìŠ¤í”Œë ˆì´</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ”</span> í‚¤ í•„í„°ë§</h3>
                    <div class="card-description">
                        <ul>
                            <li>íŠ¹ìˆ˜ í‚¤ ê°€ë¡œì±„ê¸° (Voice, Call)</li>
                            <li>UX Restrictions ì ìš©</li>
                            <li>ì£¼í–‰ ì¤‘ íŠ¹ì • í‚¤ ì°¨ë‹¨</li>
                            <li>ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ì „ë‹¬</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="mermaid-container">
                <div class="mermaid">
                    sequenceDiagram
                    participant VHAL as Vehicle HAL
                    participant CIS as CarInputService
                    participant IM as InputManager
                    participant ID as InputDispatcher
                    participant APP as Application

                    VHAL->>CIS: onHalEvents(HW_KEY_INPUT)
                    CIS->>CIS: Parse VehiclePropValue
                    CIS->>CIS: Create KeyEvent object
                    CIS->>CIS: Determine target display

                    alt Special Key (Voice/Call)
                        CIS->>CIS: Handle internally
                        CIS->>APP: Direct Intent
                    else Normal Key
                        CIS->>IM: injectInputEvent(KeyEvent)
                        IM->>ID: notifyKey()
                        ID->>APP: dispatchKeyEvent()
                    end
                </div>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-teal); font-size: 1.3rem;">ğŸ“‹ CarInputService ì£¼ìš” ë©”ì„œë“œ</h3>
            <div class="code-block">
                <pre><code>// CarInputService.java í•µì‹¬ ë¡œì§ (ì˜ì‚¬ ì½”ë“œ)
public class CarInputService extends ICarInput.Stub {

    // VHALì—ì„œ í‚¤ ì´ë²¤íŠ¸ ìˆ˜ì‹ 
    @Override
    public void onHalEvents(List&lt;VehiclePropValue&gt; values) {
        for (VehiclePropValue value : values) {
            if (value.prop == VehicleProperty.HW_KEY_INPUT) {
                handleKeyEvent(value);
            } else if (value.prop == VehicleProperty.HW_ROTARY_INPUT) {
                handleRotaryEvent(value);
            }
        }
    }

    private void handleKeyEvent(VehiclePropValue value) {
        int[] data = value.value.int32Values;
        int action = data[0];        // 0: DOWN, 1: UP
        int keyCode = data[1];       // Android KeyCode
        int displayType = data[2];   // 0: MAIN, 1: CLUSTER
        int repeatCount = data.length > 3 ? data[3] : 0;

        // KeyEvent ê°ì²´ ìƒì„±
        KeyEvent event = new KeyEvent(
            SystemClock.uptimeMillis(),
            SystemClock.uptimeMillis(),
            action == 0 ? KeyEvent.ACTION_DOWN : KeyEvent.ACTION_UP,
            keyCode,
            repeatCount
        );

        // íŠ¹ìˆ˜ í‚¤ ì²˜ë¦¬
        if (isSpecialKey(keyCode)) {
            handleSpecialKey(keyCode, action);
            return;
        }

        // íƒ€ê²Ÿ ë””ìŠ¤í”Œë ˆì´ ê²°ì •
        int targetDisplayId = getTargetDisplay(displayType);

        // InputManagerë¡œ í‚¤ ì¸ì ì…˜
        mInputManager.injectInputEvent(
            event,
            InputManager.INJECT_INPUT_EVENT_MODE_ASYNC,
            targetDisplayId
        );
    }

    private boolean isSpecialKey(int keyCode) {
        return keyCode == KeyEvent.KEYCODE_VOICE_ASSIST ||
               keyCode == KeyEvent.KEYCODE_CALL ||
               keyCode == KeyEvent.KEYCODE_ENDCALL;
    }

    private void handleSpecialKey(int keyCode, int action) {
        if (action != KeyEvent.ACTION_DOWN) {
            return;  // Only handle key down
        }

        switch (keyCode) {
            case KeyEvent.KEYCODE_VOICE_ASSIST:
                // ìŒì„± ì¸ì‹ ì‹œì‘
                startVoiceAssist();
                break;

            case KeyEvent.KEYCODE_CALL:
                // í†µí™” ì‹œì‘/ë°›ê¸°
                handleCallButton();
                break;

            case KeyEvent.KEYCODE_ENDCALL:
                // í†µí™” ì¢…ë£Œ
                endCall();
                break;
        }
    }

    private int getTargetDisplay(int displayType) {
        switch (displayType) {
            case 0:  // MAIN
                return Display.DEFAULT_DISPLAY;

            case 1:  // CLUSTER
                return getClusterDisplayId();

            default:  // UNKNOWN
                return getFocusedDisplayId();
        }
    }
}</code></pre>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-teal); font-size: 1.3rem;">ğŸ“Š í‚¤ í•„í„°ë§ ê·œì¹™</h3>
            <div class="comparison-table">
                <table>
                    <thead>
                        <tr>
                            <th>í‚¤ ì¢…ë¥˜</th>
                            <th>ì£¼í–‰ ì¤‘ (Moving)</th>
                            <th>ì •ì°¨ ì¤‘ (Parked)</th>
                            <th>ì²˜ë¦¬ ë°©ë²•</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ë¯¸ë””ì–´ í‚¤ (Play/Pause/Next)</td>
                            <td>âœ… í—ˆìš©</td>
                            <td>âœ… í—ˆìš©</td>
                            <td>MediaSessionServiceë¡œ ì „ë‹¬</td>
                        </tr>
                        <tr>
                            <td>ë³¼ë¥¨ í‚¤ (Up/Down)</td>
                            <td>âœ… í—ˆìš©</td>
                            <td>âœ… í—ˆìš©</td>
                            <td>CarAudioServiceë¡œ ì „ë‹¬</td>
                        </tr>
                        <tr>
                            <td>ìŒì„± ì¸ì‹ (Voice Assist)</td>
                            <td>âœ… í—ˆìš©</td>
                            <td>âœ… í—ˆìš©</td>
                            <td>CarInputService ë‚´ë¶€ ì²˜ë¦¬</td>
                        </tr>
                        <tr>
                            <td>í†µí™” í‚¤ (Call/Endcall)</td>
                            <td>âœ… í—ˆìš©</td>
                            <td>âœ… í—ˆìš©</td>
                            <td>Telecom Serviceë¡œ ì „ë‹¬</td>
                        </tr>
                        <tr>
                            <td>Rotary Nudge</td>
                            <td>âœ… í—ˆìš© (ì œí•œì )</td>
                            <td>âœ… í—ˆìš©</td>
                            <td>RotaryServiceë¡œ ì „ë‹¬</td>
                        </tr>
                        <tr>
                            <td>Back/Home í‚¤</td>
                            <td>âœ… í—ˆìš©</td>
                            <td>âœ… í—ˆìš©</td>
                            <td>ActivityTaskManager</td>
                        </tr>
                        <tr>
                            <td>í…ìŠ¤íŠ¸ ì…ë ¥ í‚¤</td>
                            <td>âŒ ì°¨ë‹¨</td>
                            <td>âœ… í—ˆìš©</td>
                            <td>UX Restrictions ì ìš©</td>
                        </tr>
                        <tr>
                            <td>ì„¤ì • ì§„ì… í‚¤</td>
                            <td>âŒ ì°¨ë‹¨</td>
                            <td>âœ… í—ˆìš©</td>
                            <td>UX Restrictions ì ìš©</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Section 11: Cluster Display Key Handling -->
        <section class="section sec-car">
            <h2 class="section-title">
                <span class="section-number">11</span>
                Cluster Display í‚¤ ì²˜ë¦¬
            </h2>
            <p class="section-description">
                ê³„ê¸°íŒ(Instrument Cluster) ë””ìŠ¤í”Œë ˆì´ë¡œ ë¼ìš°íŒ…ë˜ëŠ” í‚¤ ì´ë²¤íŠ¸ ì²˜ë¦¬ì…ë‹ˆë‹¤.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ“Š</span> Cluster Display</h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>ë…ë¦½ ë””ìŠ¤í”Œë ˆì´</strong>: ê³„ê¸°íŒ ë³„ë„ í™”ë©´</li>
                            <li><strong>ì œí•œëœ UI</strong>: ì•ˆì „ì„ ìœ„í•œ ê°„ì†Œí™”</li>
                            <li><strong>ë¯¸ë””ì–´ ì •ë³´</strong>: ì¬ìƒ ì¤‘ì¸ ê³¡ ì •ë³´</li>
                            <li><strong>ë‚´ë¹„ê²Œì´ì…˜</strong>: ê°„ë‹¨í•œ ê²½ë¡œ ì•ˆë‚´</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ¯</span> ë¼ìš°íŒ… ê·œì¹™</h3>
                    <div class="card-description">
                        <ul>
                            <li>displayType=1ì¸ ì´ë²¤íŠ¸ë§Œ ì²˜ë¦¬</li>
                            <li>ClusterHomeServiceë¡œ ì „ë‹¬</li>
                            <li>Cluster ì „ìš© í‚¤ ë§¤í•‘</li>
                            <li>Main Displayì™€ ë…ë¦½ ë™ì‘</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ”„</span> ClusterHomeService</h3>
                    <div class="card-description">
                        <ul>
                            <li>Cluster UI ê´€ë¦¬</li>
                            <li>í‚¤ ì´ë²¤íŠ¸ ë¶„ë°°</li>
                            <li>ë¯¸ë””ì–´/ë‚´ë¹„ ì „í™˜</li>
                            <li>ActivityView í˜¸ìŠ¤íŒ…</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="mermaid-container">
                <div class="mermaid">
                    graph TB
                    HW[Steering Wheel Button] --> VHAL[Vehicle HAL]
                    VHAL --> CIS[CarInputService]

                    CIS --> DT{Display Type?}

                    DT -->|0: MAIN| MAIN_DISP[Main Display<br />ActivityTaskManager]
                    DT -->|1: CLUSTER| CLUSTER_DISP[Cluster Display<br />ClusterHomeService]

                    MAIN_DISP --> MEDIA_APP[Media App<br />Main Screen]
                    CLUSTER_DISP --> CLUSTER_UI[Cluster UI<br />Media Info]

                    style DT fill:#f9f
                    style CLUSTER_DISP fill:#e3f2fd
                </div>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-indigo); font-size: 1.3rem;">ğŸ“‹ Cluster ì „ìš© í‚¤ ë§¤í•‘</h3>
            <div class="comparison-table">
                <table>
                    <thead>
                        <tr>
                            <th>í‚¤ ì½”ë“œ</th>
                            <th>Cluster ë™ì‘</th>
                            <th>Main Display ë™ì‘</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>KEYCODE_MEDIA_PLAY_PAUSE</td>
                            <td>Cluster ë¯¸ë””ì–´ ì •ë³´ ì—…ë°ì´íŠ¸</td>
                            <td>MediaSession onPlay() í˜¸ì¶œ</td>
                        </tr>
                        <tr>
                            <td>KEYCODE_MEDIA_NEXT</td>
                            <td>Clusterì— ë‹¤ìŒ ê³¡ ì •ë³´ í‘œì‹œ</td>
                            <td>MediaSession onSkipToNext()</td>
                        </tr>
                        <tr>
                            <td>KEYCODE_DPAD_UP/DOWN</td>
                            <td>Cluster ë©”ë‰´ íƒìƒ‰</td>
                            <td>ì•± ë‚´ í¬ì»¤ìŠ¤ ì´ë™</td>
                        </tr>
                        <tr>
                            <td>KEYCODE_DPAD_CENTER</td>
                            <td>Cluster í•­ëª© ì„ íƒ</td>
                            <td>Rotary ì„¼í„° í´ë¦­</td>
                        </tr>
                        <tr>
                            <td>KEYCODE_STEM_PRIMARY</td>
                            <td>Cluster ëª¨ë“œ ì „í™˜ (Media â†” Nav)</td>
                            <td>ìŒì„± ì¸ì‹ ì‹œì‘</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-indigo); font-size: 1.3rem;">ğŸ”§ ClusterHomeService êµ¬í˜„ ì˜ˆì‹œ</h3>
            <div class="code-block">
                <pre><code>// ClusterHomeServiceì—ì„œ í‚¤ ì´ë²¤íŠ¸ ì²˜ë¦¬
class ClusterHomeService : Service() {
    private var currentMode = ClusterMode.MEDIA

    // í‚¤ ì´ë²¤íŠ¸ ìˆ˜ì‹ 
    fun onKeyEvent(keyCode: Int, action: Int) {
        when (keyCode) {
            KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE -> {
                if (action == KeyEvent.ACTION_DOWN) {
                    handleMediaPlayPause()
                }
            }

            KeyEvent.KEYCODE_MEDIA_NEXT -> {
                if (action == KeyEvent.ACTION_DOWN) {
                    handleMediaNext()
                }
            }

            KeyEvent.KEYCODE_DPAD_UP -> {
                if (action == KeyEvent.ACTION_DOWN) {
                    navigateClusterMenu(Direction.UP)
                }
            }

            KeyEvent.KEYCODE_DPAD_DOWN -> {
                if (action == KeyEvent.ACTION_DOWN) {
                    navigateClusterMenu(Direction.DOWN)
                }
            }

            KeyEvent.KEYCODE_STEM_PRIMARY -> {
                if (action == KeyEvent.ACTION_DOWN) {
                    toggleClusterMode()
                }
            }
        }
    }

    private fun handleMediaPlayPause() {
        // MediaControllerë¥¼ í†µí•´ ì¬ìƒ/ì¼ì‹œì •ì§€
        val controller = getActiveMediaController()
        val state = controller?.playbackState?.state

        if (state == PlaybackStateCompat.STATE_PLAYING) {
            controller.transportControls.pause()
        } else {
            controller.transportControls.play()
        }

        // Cluster UI ì—…ë°ì´íŠ¸
        updateClusterMediaInfo()
    }

    private fun toggleClusterMode() {
        currentMode = when (currentMode) {
            ClusterMode.MEDIA -> ClusterMode.NAVIGATION
            ClusterMode.NAVIGATION -> ClusterMode.MEDIA
        }

        updateClusterDisplay(currentMode)
    }

    enum class ClusterMode {
        MEDIA,
        NAVIGATION
    }
}</code></pre>
            </div>
        </section>

        <!-- Section 12: Android Version Changes -->
        <section class="section sec-input">
            <h2 class="section-title">
                <span class="section-number">12</span>
                Android ë²„ì „ë³„ ë³€í™”
            </h2>
            <p class="section-description">
                Android ë²„ì „ì— ë”°ë¥¸ Input Framework ë° í‚¤ ì´ë²¤íŠ¸ ì²˜ë¦¬ ë³€í™”ì…ë‹ˆë‹¤.
            </p>

            <div class="comparison-table">
                <table>
                    <thead>
                        <tr>
                            <th>ë²„ì „</th>
                            <th>ì£¼ìš” ë³€í™”</th>
                            <th>ìƒˆë¡œìš´ ê¸°ëŠ¥</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Android 14</strong><br />(API 34)</td>
                            <td>
                                â€¢ Rotary Controller ê°œì„ <br />
                                â€¢ Cluster Display ë©€í‹° ìœˆë„ìš°<br />
                                â€¢ í–¥ìƒëœ í‚¤ í•„í„°ë§
                            </td>
                            <td>
                                â€¢ Per-display Input routing<br />
                                â€¢ Enhanced UX Restrictions<br />
                                â€¢ Multi-user input isolation
                            </td>
                        </tr>
                        <tr>
                            <td><strong>Android 13</strong><br />(API 33)</td>
                            <td>
                                â€¢ Input Method ê°œì„ <br />
                                â€¢ ì°¨ëŸ‰ íŠ¹í™” IME<br />
                                â€¢ Stylus ì§€ì› ê°•í™”
                            </td>
                            <td>
                                â€¢ CarInputManager API<br />
                                â€¢ Custom input device support<br />
                                â€¢ Haptic feedback customization
                            </td>
                        </tr>
                        <tr>
                            <td><strong>Android 12</strong><br />(API 31)</td>
                            <td>
                                â€¢ InputFlinger ë¦¬íŒ©í† ë§<br />
                                â€¢ MotionEvent ìµœì í™”<br />
                                â€¢ Touch latency ê°œì„ 
                            </td>
                            <td>
                                â€¢ Input transfer API<br />
                                â€¢ Per-window input features<br />
                                â€¢ Enhanced gesture support
                            </td>
                        </tr>
                        <tr>
                            <td><strong>Android 11</strong><br />(API 30)</td>
                            <td>
                                â€¢ Rotary Input ì •ì‹ ì§€ì›<br />
                                â€¢ CarInputService ì•ˆì •í™”<br />
                                â€¢ VHAL 2.0 í†µí•©
                            </td>
                            <td>
                                â€¢ RotaryService<br />
                                â€¢ Direct Manipulation mode<br />
                                â€¢ Hardware button customization
                            </td>
                        </tr>
                        <tr>
                            <td><strong>Android 10</strong><br />(API 29)</td>
                            <td>
                                â€¢ AAOS ì°¨ëŸ‰ Input ë„ì…<br />
                                â€¢ Vehicle HAL í†µí•©<br />
                                â€¢ Cluster Display ì§€ì›
                            </td>
                            <td>
                                â€¢ CarInputService<br />
                                â€¢ HW_KEY_INPUT property<br />
                                â€¢ Display-specific routing
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-teal); font-size: 1.3rem;">ğŸ”„ API ë³€í™” ë° ë§ˆì´ê·¸ë ˆì´ì…˜</h3>
            <div class="code-block">
                <pre><code>// Android 10 ì´ì „ (ì¼ë°˜ Android)
// ì°¨ëŸ‰ íŠ¹í™” ì…ë ¥ ì—†ìŒ, í‘œì¤€ InputDeviceë§Œ ì‚¬ìš©
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // ì¼ë°˜ í‚¤ ì´ë²¤íŠ¸ ì²˜ë¦¬
    return super.onKeyDown(keyCode, event);
}

// ========================================

// Android 10+ (AAOS)
// CarInputService ë„ì…, VHAL í†µí•©
override fun onCreate() {
    super.onCreate()

    // Car API ì‚¬ìš©
    val car = Car.createCar(this)
    // CarInputServiceê°€ ìë™ìœ¼ë¡œ VHAL ì´ë²¤íŠ¸ ì²˜ë¦¬
}

// ========================================

// Android 11+ (Rotary ì •ì‹ ì§€ì›)
override fun onGenericMotionEvent(event: MotionEvent?): Boolean {
    if (event?.source == InputDevice.SOURCE_ROTARY_ENCODER) {
        // Rotary ì´ë²¤íŠ¸ ì²˜ë¦¬
        val scroll = event.getAxisValue(MotionEvent.AXIS_SCROLL)
        handleRotaryScroll(scroll)
        return true
    }
    return super.onGenericMotionEvent(event)
}

// ========================================

// Android 13+ (CarInputManager API)
val carInputManager = car.getCarManager(Car.CAR_INPUT_SERVICE) as CarInputManager

// Custom input device ë“±ë¡
carInputManager.requestInputEventCapture(
    CarInputManager.INPUT_TYPE_ALL_INPUTS,
    CarInputManager.CAPTURE_REQ_FLAGS_ALLOW_DELAYED_GRANT
) { event ->
    // ëª¨ë“  ì…ë ¥ ì´ë²¤íŠ¸ ìº¡ì²˜
    handleCapturedEvent(event)
}</code></pre>
            </div>
        </section>

        <!-- Section 13: Debugging & Troubleshooting -->
        <section class="section sec-car">
            <h2 class="section-title">
                <span class="section-number">13</span>
                ë””ë²„ê¹… & íŠ¸ëŸ¬ë¸”ìŠˆíŒ…
            </h2>
            <p class="section-description">
                í‚¤ ì´ë²¤íŠ¸ ë¬¸ì œë¥¼ ì§„ë‹¨í•˜ê³  í•´ê²°í•˜ê¸° ìœ„í•œ ë„êµ¬ ë° ë°©ë²•ë¡ ì…ë‹ˆë‹¤.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ”</span> ì£¼ìš” ë””ë²„ê¹… ë„êµ¬</h3>
                    <div class="card-description">
                        <ul>
                            <li><code>getevent</code>: ì›ì‹œ ì…ë ¥ ì´ë²¤íŠ¸</li>
                            <li><code>dumpsys input</code>: Input ì‹œìŠ¤í…œ ìƒíƒœ</li>
                            <li><code>dumpsys car_service</code>: CarInputService</li>
                            <li><code>logcat -s CarInputService:V</code></li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title"><span class="card-icon">âš ï¸</span> ì¼ë°˜ì ì¸ ë¬¸ì œ</h3>
                    <div class="card-description">
                        <ul>
                            <li>í‚¤ ì´ë²¤íŠ¸ ë¯¸ì „ë‹¬</li>
                            <li>ì˜ëª»ëœ ë””ìŠ¤í”Œë ˆì´ ë¼ìš°íŒ…</li>
                            <li>Rotary ì…ë ¥ ë¯¸ë™ì‘</li>
                            <li>MediaSession ë¯¸ì‘ë‹µ</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ› ï¸</span> ë¡œê·¸ ë¶„ì„</h3>
                    <div class="card-description">
                        <ul>
                            <li>VHAL Property ë¡œê·¸</li>
                            <li>KeyEvent dispatch ì¶”ì </li>
                            <li>MediaSession priority í™•ì¸</li>
                            <li>Display routing ê²€ì¦</li>
                        </ul>
                    </div>
                </div>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-teal); font-size: 1.3rem;">ğŸ”§ ì£¼ìš” ë””ë²„ê¹… ëª…ë ¹ì–´</h3>
            <div class="code-block">
                <pre><code># getevent - ì›ì‹œ ì…ë ¥ ì´ë²¤íŠ¸ ëª¨ë‹ˆí„°ë§
adb shell getevent -lt

# ì¶œë ¥ ì˜ˆì‹œ:
# [    123.456789] EV_KEY       KEY_PLAYPAUSE        DOWN
# [    123.567890] EV_KEY       KEY_PLAYPAUSE        UP

# dumpsys input - Input ì‹œìŠ¤í…œ ìƒíƒœ
adb shell dumpsys input

# ì¶œë ¥ ì˜ˆì‹œ:
# INPUT MANAGER (dumpsys input)
#
# Event Hub State:
#   Built-in Keyboard: device 1
#   Vehicle Hardware Keys: device 5
#
# Input Dispatcher State:
#   Focused application: com.spotify.music
#   Focused window: com.spotify.music/MainActivity

# dumpsys car_service - CarInputService ìƒíƒœ
adb shell dumpsys car_service --services CarInputService

# ì¶œë ¥ ì˜ˆì‹œ:
# CarInputService:
#   Captured events: 1234
#   Last key: KEYCODE_MEDIA_PLAY (126)
#   Display routing: MAIN (0)
#   Rotary events: 567

# MediaSession ìƒíƒœ í™•ì¸
adb shell dumpsys media_session

# ì¶œë ¥ ì˜ˆì‹œ:
# Active sessions:
#   com.spotify.music (priority: 100, state: PLAYING)
#   com.google.android.apps.maps (priority: 50, state: PAUSED)</code></pre>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-teal); font-size: 1.3rem;">ğŸ“‹ logcat í•„í„°ë§</h3>
            <div class="code-block">
                <pre><code># CarInputService ë¡œê·¸
adb logcat -s CarInputService:V

# Input ê´€ë ¨ ëª¨ë“  ë¡œê·¸
adb logcat -s CarInputService:V InputDispatcher:V InputReader:V

# í‚¤ ì´ë²¤íŠ¸ ì¶”ì 
adb logcat | grep -i "key event"

# MediaSession ë””ìŠ¤íŒ¨ì¹˜ ì¶”ì 
adb logcat -s MediaSessionService:V | grep -i "dispatch"

# Rotary ì´ë²¤íŠ¸ ì¶”ì 
adb logcat -s RotaryService:V

# VHAL Property ë¡œê·¸
adb logcat -s VehicleHal:V | grep -i "HW_KEY"</code></pre>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-teal); font-size: 1.3rem;">âš ï¸ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ</h3>
            <div class="comparison-table">
                <table>
                    <thead>
                        <tr>
                            <th>ë¬¸ì œ ì¦ìƒ</th>
                            <th>ê°€ëŠ¥í•œ ì›ì¸</th>
                            <th>í•´ê²° ë°©ë²•</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ë¯¸ë””ì–´ í‚¤ ëˆŒëŸ¬ë„ ë°˜ì‘ ì—†ìŒ</td>
                            <td>
                                â€¢ MediaSession ë¯¸ìƒì„±<br />
                                â€¢ isActive = false<br />
                                â€¢ Callback ë¯¸êµ¬í˜„
                            </td>
                            <td>
                                â€¢ MediaSession.isActive = true ì„¤ì •<br />
                                â€¢ setCallback() í™•ì¸<br />
                                â€¢ dumpsys media_session í™•ì¸
                            </td>
                        </tr>
                        <tr>
                            <td>í‚¤ ì´ë²¤íŠ¸ê°€ ì•±ì— ì•ˆ ì˜´</td>
                            <td>
                                â€¢ VHAL ë¯¸ì „ì†¡<br />
                                â€¢ CarInputService í•„í„°ë§<br />
                                â€¢ Display routing ì˜¤ë¥˜
                            </td>
                            <td>
                                â€¢ geteventë¡œ í•˜ë“œì›¨ì–´ í™•ì¸<br />
                                â€¢ dumpsys car_service ë¡œê·¸<br />
                                â€¢ displayType ê²€ì¦
                            </td>
                        </tr>
                        <tr>
                            <td>Clusterì— í‚¤ ì•ˆ ê°</td>
                            <td>
                                â€¢ displayType != 1<br />
                                â€¢ ClusterHomeService ë¯¸ì‹¤í–‰<br />
                                â€¢ Cluster Display ë¯¸ë“±ë¡
                            </td>
                            <td>
                                â€¢ VHAL displayType í™•ì¸<br />
                                â€¢ dumpsys displayë¡œ Cluster í™•ì¸<br />
                                â€¢ ClusterHomeService ë¡œê·¸
                            </td>
                        </tr>
                        <tr>
                            <td>Rotary íšŒì „ ì•ˆ ë¨</td>
                            <td>
                                â€¢ HW_ROTARY_INPUT ë¯¸ì „ì†¡<br />
                                â€¢ RotaryService ë¹„í™œì„±í™”<br />
                                â€¢ Viewê°€ í¬ì»¤ìŠ¤ ë¶ˆê°€ëŠ¥
                            </td>
                            <td>
                                â€¢ geteventë¡œ Rotary ì´ë²¤íŠ¸ í™•ì¸<br />
                                â€¢ View.focusable = true ì„¤ì •<br />
                                â€¢ onGenericMotionEvent() êµ¬í˜„
                            </td>
                        </tr>
                        <tr>
                            <td>ë³¼ë¥¨ í‚¤ ì•ˆ ë¨¹í˜</td>
                            <td>
                                â€¢ CarAudioService ì˜¤ë¥˜<br />
                                â€¢ Volume Group ë¯¸ì„¤ì •<br />
                                â€¢ Fixed Volume ë¯¸í™œì„±í™”
                            </td>
                            <td>
                                â€¢ dumpsys car_service --services CarAudioService<br />
                                â€¢ car_audio_configuration.xml í™•ì¸<br />
                                â€¢ Audio HAL ë¡œê·¸ í™•ì¸
                            </td>
                        </tr>
                        <tr>
                            <td>ìŒì„± ì¸ì‹ ë²„íŠ¼ ì•ˆ ë¨</td>
                            <td>
                                â€¢ KEYCODE_VOICE_ASSIST ë¯¸ë§¤í•‘<br />
                                â€¢ Google App ë¯¸ì„¤ì¹˜<br />
                                â€¢ ê¶Œí•œ ë¶€ì¡±
                            </td>
                            <td>
                                â€¢ Generic.kl í‚¤ ë§¤í•‘ í™•ì¸<br />
                                â€¢ Google App ì„¤ì¹˜ í™•ì¸<br />
                                â€¢ RECORD_AUDIO ê¶Œí•œ í™•ì¸
                            </td>
                        </tr>
                        <tr>
                            <td>ì£¼í–‰ ì¤‘ íŠ¹ì • í‚¤ ì°¨ë‹¨ë¨</td>
                            <td>
                                â€¢ UX Restrictions ì ìš©<br />
                                â€¢ ì˜ë„ëœ ì•ˆì „ ê¸°ëŠ¥<br />
                                â€¢ í‚¤ í•„í„°ë§ ê·œì¹™
                            </td>
                            <td>
                                â€¢ dumpsys car_service --services CarUxRestrictionsManagerService<br />
                                â€¢ Driving State í™•ì¸<br />
                                â€¢ ì •ì°¨ í›„ ì¬ì‹œë„
                            </td>
                        </tr>
                        <tr>
                            <td>Custom Key ì¸ì‹ ì•ˆ ë¨</td>
                            <td>
                                â€¢ Key Layout íŒŒì¼ ëˆ„ë½<br />
                                â€¢ KeyCode ë§¤í•‘ ì˜¤ë¥˜<br />
                                â€¢ Vendor Overlay ë¯¸ì ìš©
                            </td>
                            <td>
                                â€¢ .kl íŒŒì¼ ìƒì„±<br />
                                â€¢ geteventë¡œ Linux code í™•ì¸<br />
                                â€¢ Overlay ë¹Œë“œ í™•ì¸
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-teal); font-size: 1.3rem;">ğŸ” í‚¤ ì´ë²¤íŠ¸ ì „ì²´ ê²½ë¡œ ì¶”ì </h3>
            <div class="code-block">
                <pre><code># 1. í•˜ë“œì›¨ì–´ ë ˆë²¨ í™•ì¸
adb shell getevent -lt | grep "KEY_PLAYPAUSE"

# 2. VHAL Property í™•ì¸
adb logcat -s VehicleHal:V | grep "HW_KEY_INPUT"

# 3. CarInputService ìˆ˜ì‹  í™•ì¸
adb logcat -s CarInputService:V | grep "onHalEvents"

# 4. InputManager ì¸ì ì…˜ í™•ì¸
adb logcat -s InputManager:V | grep "injectInputEvent"

# 5. InputDispatcher ì „ë‹¬ í™•ì¸
adb logcat -s InputDispatcher:V | grep "notifyKey"

# 6. MediaSessionService ë””ìŠ¤íŒ¨ì¹˜ í™•ì¸
adb logcat -s MediaSessionService:V | grep "dispatchMediaKeyEvent"

# 7. ì•± ìˆ˜ì‹  í™•ì¸
adb logcat -s YourApp:V | grep "onPlay"

# ì „ì²´ í•œ ë²ˆì—
adb logcat -s VehicleHal:V CarInputService:V InputDispatcher:V MediaSessionService:V | grep -E "KEY|MEDIA"</code></pre>
            </div>
        </section>

        <!-- Section 14: AOSP Source Reference -->
        <section class="section sec-input">
            <h2 class="section-title">
                <span class="section-number">14</span>
                AOSP ì†ŒìŠ¤ ì½”ë“œ ì°¸ì¡°
            </h2>
            <p class="section-description">
                AAOS í‚¤ ì´ë²¤íŠ¸ ì²˜ë¦¬ì˜ í•µì‹¬ ì†ŒìŠ¤ ì½”ë“œ ìœ„ì¹˜ ë° ì£¼ìš” íŒŒì¼ì…ë‹ˆë‹¤.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸš—</span> CarInputService</h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>CarInputService.java</strong></li>
                            <li>packages/services/Car/service/src/com/android/car/input/</li>
                            <li>VHAL ì´ë²¤íŠ¸ ìˆ˜ì‹  ë° í‚¤ ì¸ì ì…˜</li>
                            <li>Display Routing, í‚¤ í•„í„°ë§</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title"><span class="card-icon">âŒ¨ï¸</span> InputReader/Dispatcher</h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>InputReader.cpp</strong></li>
                            <li>frameworks/native/services/inputflinger/reader/</li>
                            <li>Linux evdev â†’ Android KeyEvent</li>
                            <li>Key Layout íŒŒì¼ íŒŒì‹±</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title"><span class="card-icon">ğŸ”„</span> RotaryService</h3>
                    <div class="card-description">
                        <ul>
                            <li><strong>RotaryService.java</strong></li>
                            <li>packages/apps/Car/RotaryController/</li>
                            <li>Rotary ì…ë ¥ â†’ Focus Navigation</li>
                            <li>Nudge, Inertia ì²˜ë¦¬</li>
                        </ul>
                    </div>
                </div>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-teal); font-size: 1.3rem;">ğŸ“‚ ì£¼ìš” ë””ë ‰í† ë¦¬ êµ¬ì¡°</h3>
            <div class="code-block">
                <pre><code># CarInputService ì†ŒìŠ¤
packages/services/Car/service/src/com/android/car/input/
â”œâ”€â”€ CarInputService.java            # ë©”ì¸ ì„œë¹„ìŠ¤
â”œâ”€â”€ InputHalService.java            # VHAL í†µì‹ 
â””â”€â”€ CarInputManager.java            # Public API

# RotaryService ì†ŒìŠ¤
packages/apps/Car/RotaryController/
â”œâ”€â”€ src/com/android/car/rotary/
â”‚   â”œâ”€â”€ RotaryService.java          # ë©”ì¸ ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ Navigator.java              # Focus íƒìƒ‰
â”‚   â””â”€â”€ RotaryCache.java            # ìºì‹±

# InputReader (Native)
frameworks/native/services/inputflinger/
â”œâ”€â”€ reader/
â”‚   â”œâ”€â”€ InputReader.cpp             # ì…ë ¥ ì½ê¸°
â”‚   â”œâ”€â”€ EventHub.cpp                # evdev ì´ë²¤íŠ¸
â”‚   â””â”€â”€ mapper/
â”‚       â”œâ”€â”€ KeyboardInputMapper.cpp # í‚¤ë³´ë“œ ë§¤í•‘
â”‚       â””â”€â”€ RotaryEncoderInputMapper.cpp  # Rotary ë§¤í•‘
â”œâ”€â”€ dispatcher/
â”‚   â””â”€â”€ InputDispatcher.cpp         # ì´ë²¤íŠ¸ ë¶„ë°°

# InputManager (Framework)
frameworks/base/services/core/java/com/android/server/input/
â”œâ”€â”€ InputManagerService.java        # Input ì‹œìŠ¤í…œ ê´€ë¦¬
â””â”€â”€ InputFilter.java                # ì…ë ¥ í•„í„°ë§

# MediaSession (Framework)
frameworks/base/media/java/android/media/session/
â”œâ”€â”€ MediaSessionManager.java        # Session ê´€ë¦¬
â”œâ”€â”€ MediaSession.java               # Session API
â””â”€â”€ MediaController.java            # Controller API

# Vehicle HAL
hardware/interfaces/automotive/vehicle/
â””â”€â”€ 2.0/
    â”œâ”€â”€ IVehicle.hal                # Vehicle ì¸í„°í˜ì´ìŠ¤
    â””â”€â”€ types.hal                   # VehicleProperty ì •ì˜

# Key Layout íŒŒì¼
frameworks/base/data/keyboards/
â”œâ”€â”€ Generic.kl                      # ê¸°ë³¸ í‚¤ ë§¤í•‘
â””â”€â”€ Vendor_[xxxx]_Product_[yyyy].kl # ë””ë°”ì´ìŠ¤ë³„ ë§¤í•‘</code></pre>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-teal); font-size: 1.3rem;">ğŸ” ì£¼ìš” í´ë˜ìŠ¤ ìƒì„¸</h3>
            <div class="code-block">
                <pre><code>// CarInputService.java - í•µì‹¬ ë©”ì„œë“œ
public class CarInputService extends ICarInput.Stub {
    // VHAL ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
    private final VehicleHal.VehicleHalEventListener mVehicleHalListener =
        new VehicleHal.VehicleHalEventListener() {
            @Override
            public void onHalEvents(List&lt;VehiclePropValue&gt; values) {
                for (VehiclePropValue v : values) {
                    handleKeyEvent(v);
                }
            }
        };

    // í‚¤ ì¸ì ì…˜
    private void injectKeyEvent(KeyEvent event, int targetDisplay) {
        mInputManager.injectInputEvent(
            event,
            InputManager.INJECT_INPUT_EVENT_MODE_ASYNC,
            targetDisplay
        );
    }
}

// InputReader.cpp - í‚¤ ì½ê¸°
void EventHub::scanDevicesLocked() {
    // /dev/input/event* ë””ë°”ì´ìŠ¤ ìŠ¤ìº”
    for (int i = 0; i < INPUT_MAX_DEVICES; i++) {
        char devname[PATH_MAX];
        snprintf(devname, sizeof(devname), "/dev/input/event%d", i);

        int fd = open(devname, O_RDONLY | O_CLOEXEC);
        if (fd >= 0) {
            // ë””ë°”ì´ìŠ¤ ì •ë³´ ì½ê¸°
            struct input_id id;
            ioctl(fd, EVIOCGID, &id);
        }
    }
}

// MediaSessionService.java - í‚¤ ë””ìŠ¤íŒ¨ì¹˜
boolean dispatchMediaKeyEvent(KeyEvent keyEvent, boolean asSystemService) {
    // Priority ê¸°ë°˜ íƒ€ê²Ÿ ì„ íƒ
    MediaSessionRecord target = findMediaSession();

    if (target != null) {
        target.getCallback().onMediaButton(keyEvent);
        return true;
    }
    return false;
}</code></pre>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 16px; color: var(--accent-teal); font-size: 1.3rem;">ğŸŒ ìœ ìš©í•œ AOSP ë§í¬</h3>
            <div class="code-block">
                <pre><code># CarInputService ì†ŒìŠ¤
https://cs.android.com/android/platform/superproject/main/+/main:packages/services/Car/service/src/com/android/car/input/

# RotaryService ì†ŒìŠ¤
https://cs.android.com/android/platform/superproject/main/+/main:packages/apps/Car/RotaryController/

# InputReader ì†ŒìŠ¤
https://cs.android.com/android/platform/superproject/main/+/main:frameworks/native/services/inputflinger/reader/

# MediaSessionService ì†ŒìŠ¤
https://cs.android.com/android/platform/superproject/main/+/main:frameworks/base/media/java/android/media/session/

# Vehicle HAL ì†ŒìŠ¤
https://cs.android.com/android/platform/superproject/main/+/main:hardware/interfaces/automotive/vehicle/

# AAOS Input ê³µì‹ ë¬¸ì„œ
https://source.android.com/docs/automotive/hmi/input

# Key Layout ë¬¸ì„œ
https://source.android.com/docs/core/interaction/input/key-layout-files</code></pre>
            </div>
        </section>

        <!-- Section 15: Related Documentation -->
        <section class="section sec-car">
            <h2 class="section-title">
                <span class="section-number">15</span>
                ê´€ë ¨ ìƒì„¸ ë¬¸ì„œ
            </h2>
            <p class="section-description">
                AAOS Key Eventsì™€ ì—°ê´€ëœ ë‹¤ë¥¸ ì£¼ìš” ë¬¸ì„œ ë° ë¦¬ì†ŒìŠ¤ì…ë‹ˆë‹¤.
            </p>

            <div class="content-grid">
                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸš—</span>
                        <a href="carmedia.html" style="color: inherit; text-decoration: none;">
                            Car Media Service
                        </a>
                    </h3>
                    <div class="card-description">
                        ë¯¸ë””ì–´ í‚¤ ì´ë²¤íŠ¸ì™€ CarMediaService, MediaSessionì˜ í†µí•© ë™ì‘
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸµ</span>
                        <a href="mediasession.html" style="color: inherit; text-decoration: none;">
                            MediaSession
                        </a>
                    </h3>
                    <div class="card-description">
                        MediaSession Callbackê³¼ ë¯¸ë””ì–´ í‚¤ ë””ìŠ¤íŒ¨ì¹­, Priority ê¸°ë°˜ ì „ë‹¬
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”Š</span>
                        <a href="audio-framework.html" style="color: inherit; text-decoration: none;">
                            Audio Framework
                        </a>
                    </h3>
                    <div class="card-description">
                        ë³¼ë¥¨ í‚¤ ì²˜ë¦¬ì™€ CarAudioService, Volume Groups ì—°ë™
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸš™</span>
                        <a href="aaos.html" style="color: inherit; text-decoration: none;">
                            Android Automotive OS
                        </a>
                    </h3>
                    <div class="card-description">
                        AAOS ì „ì²´ ì•„í‚¤í…ì²˜, Vehicle HAL, CarService í†µí•©
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">âš ï¸</span>
                        <a href="aaos-last-media.html" style="color: inherit; text-decoration: none;">
                            Last Media Source & Autoplay
                        </a>
                    </h3>
                    <div class="card-description">
                        ì‹œë™ ì¼œì§ ì‹œ ìë™ ì¬ìƒê³¼ ë¯¸ë””ì–´ í‚¤ì˜ ì—°ë™
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">
                        <span class="card-icon">ğŸ”‹</span>
                        <a href="power-policy-suspend.html" style="color: inherit; text-decoration: none;">
                            Power Policy & Suspend
                        </a>
                    </h3>
                    <div class="card-description">
                        ì°¨ëŸ‰ ì „ì› ìƒíƒœì— ë”°ë¥¸ í‚¤ ì´ë²¤íŠ¸ ì²˜ë¦¬ ë° Wake-up
                    </div>
                </div>
            </div>

            <div class="highlight-box" style="margin-top: 30px;">
                <strong>ğŸ’¡ ì¶”ê°€ ë¦¬ì†ŒìŠ¤:</strong> Android ê³µì‹ ë¬¸ì„œ
                <a href="https://source.android.com/docs/automotive/hmi/input" target="_blank"
                   style="color: var(--accent-primary);">AAOS Input System</a>,
                <a href="https://source.android.com/docs/core/interaction/input" target="_blank"
                   style="color: var(--accent-primary);">Input Framework</a>
            </div>
        </section>

        <a href="index.html" class="nav-button">â† Back to Dashboard</a>
    </div>

    <script src="scripts/mermaid-theme.js"></script>
    <!-- Navigation & Copy Features -->
    <script src="scripts/copy-code.js"></script>
    <script src="scripts/toc-generator.js"></script>
    <script src="scripts/page-navigation.js"></script>
    <!-- Interactive Diagram Features -->
    <script src="scripts/diagram-data.js"></script>
    <script src="scripts/diagram-interactive.js"></script>

    <script src="scripts/theme-toggle.js?v=2"></script>
    <script src="scripts/lang-switch.js"></script>
</body>

</html>
```